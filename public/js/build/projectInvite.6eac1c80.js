import{n as a}from"./app.af42c865.js";var r=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"page-invite"},[e("PageTitle",{attrs:{title:t.$L("\u52A0\u5165\u9879\u76EE")}}),t.loadIng>0?e("div",{staticClass:"invite-load"},[e("Loading")],1):e("div",{staticClass:"invite-warp"},[t.project.id>0?e("Card",[e("p",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.project.name))]),t.project.desc?e("div",{staticClass:"invite-desc"},[t._v(t._s(t.project.desc))]):e("div",[t._v(t._s(t.$L("\u6682\u65E0\u4ECB\u7ECD")))]),e("div",{staticClass:"invite-footer"},[t.already?e("Button",{attrs:{type:"success",icon:"ios-checkmark-circle-outline"},on:{click:t.goProject}},[t._v(t._s(t.$L("\u5DF2\u52A0\u5165")))]):e("Button",{attrs:{type:"primary",loading:t.joinLoad>0},on:{click:t.joinProject}},[t._v(t._s(t.$L("\u52A0\u5165\u9879\u76EE")))])],1)]):e("Card",[e("p",[t._v(t._s(t.$L("\u9080\u8BF7\u5730\u5740\u4E0D\u5B58\u5728\u6216\u5DF2\u88AB\u5220\u9664\uFF01")))])])],1)],1)},s=[];const c={data(){return{loadIng:0,joinLoad:0,already:!1,project:{}}},watch:{$route:{handler(t){this.code=t.query?t.query.code:"",this.getData()},immediate:!0}},methods:{getData(){this.loadIng++,this.$store.dispatch("call",{url:"project/invite/info",data:{code:this.code}}).then(({data:t})=>{this.already=t.already,this.project=t.project}).catch(()=>{this.project={}}).finally(t=>{this.loadIng--})},joinProject(){this.joinLoad++,this.$store.dispatch("call",{url:"project/invite/join",data:{code:this.code}}).then(({data:t})=>{this.already=t.already,this.project=t.project,this.goProject()}).catch(({msg:t})=>{$A.modalError(t)}).finally(t=>{this.joinLoad--})},goProject(){this.$nextTick(()=>{$A.goForward({name:"manage-project",params:{projectId:this.project.id}})})}}},o={};var n=a(c,r,s,!1,l,"2305dec0",null,null);function l(t){for(let i in o)this[i]=o[i]}var _=function(){return n.exports}();export{_ as default};
