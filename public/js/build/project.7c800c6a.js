import{g as xn,e as Tn,f as Sn,m as It,n as gt,d as Se,c as Ae,o as kn}from"./app.3d81bfbf.js";import{T as sn,P as In}from"./ProjectLog.7a036454.js";import{T as ln}from"./TaskMenu.bdcf4604.js";import{D as jn}from"./index.8fb9f3fd.js";import{U as cn}from"./UserSelect.6a5dfe83.js";import{D as En}from"./DialogWrapper.68f3aecd.js";import{l as Ln}from"./longpress.43ca7fd9.js";import"./ImgUpload.7f60f3a4.js";import"./details.ee26823b.js";var dn={exports:{}};/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function oe(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?oe=function(r){return typeof r}:oe=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},oe(t)}function An(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function vt(){return vt=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},vt.apply(this,arguments)}function kt(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.forEach(function(a){An(t,a,e[a])})}return t}function On(t,r){if(t==null)return{};var e={},n=Object.keys(t),a,o;for(o=0;o<n.length;o++)a=n[o],!(r.indexOf(a)>=0)&&(e[a]=t[a]);return e}function Pn(t,r){if(t==null)return{};var e=On(t,r),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],!(r.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,n)||(e[n]=t[n]))}return e}function Mn(t){return Nn(t)||Fn(t)||Rn()}function Nn(t){if(Array.isArray(t)){for(var r=0,e=new Array(t.length);r<t.length;r++)e[r]=t[r];return e}}function Fn(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function Rn(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var Wn="1.10.2";function Ct(t){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(t)}var Dt=Ct(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Jt=Ct(/Edge/i),Fe=Ct(/firefox/i),ke=Ct(/safari/i)&&!Ct(/chrome/i)&&!Ct(/android/i),un=Ct(/iP(ad|od|hone)/i),Bn=Ct(/chrome/i)&&Ct(/android/i),fn={capture:!1,passive:!1};function F(t,r,e){t.addEventListener(r,e,!Dt&&fn)}function M(t,r,e){t.removeEventListener(r,e,!Dt&&fn)}function ce(t,r){if(!!r){if(r[0]===">"&&(r=r.substring(1)),t)try{if(t.matches)return t.matches(r);if(t.msMatchesSelector)return t.msMatchesSelector(r);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(r)}catch{return!1}return!1}}function Un(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function wt(t,r,e,n){if(t){e=e||document;do{if(r!=null&&(r[0]===">"?t.parentNode===e&&ce(t,r):ce(t,r))||n&&t===e)return t;if(t===e)break}while(t=Un(t))}return null}var Re=/\s+/g;function V(t,r,e){if(t&&r)if(t.classList)t.classList[e?"add":"remove"](r);else{var n=(" "+t.className+" ").replace(Re," ").replace(" "+r+" "," ");t.className=(n+(e?" "+r:"")).replace(Re," ")}}function _(t,r,e){var n=t&&t.style;if(n){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(e=t.currentStyle),r===void 0?e:e[r];!(r in n)&&r.indexOf("webkit")===-1&&(r="-webkit-"+r),n[r]=e+(typeof e=="string"?"":"px")}}function At(t,r){var e="";if(typeof t=="string")e=t;else do{var n=_(t,"transform");n&&n!=="none"&&(e=n+" "+e)}while(!r&&(t=t.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(e)}function hn(t,r,e){if(t){var n=t.getElementsByTagName(r),a=0,o=n.length;if(e)for(;a<o;a++)e(n[a],a);return n}return[]}function _t(){var t=document.scrollingElement;return t||document.documentElement}function Q(t,r,e,n,a){if(!(!t.getBoundingClientRect&&t!==window)){var o,s,i,l,c,d,u;if(t!==window&&t!==_t()?(o=t.getBoundingClientRect(),s=o.top,i=o.left,l=o.bottom,c=o.right,d=o.height,u=o.width):(s=0,i=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(r||e)&&t!==window&&(a=a||t.parentNode,!Dt))do if(a&&a.getBoundingClientRect&&(_(a,"transform")!=="none"||e&&_(a,"position")!=="static")){var f=a.getBoundingClientRect();s-=f.top+parseInt(_(a,"border-top-width")),i-=f.left+parseInt(_(a,"border-left-width")),l=s+o.height,c=i+o.width;break}while(a=a.parentNode);if(n&&t!==window){var v=At(a||t),h=v&&v.a,m=v&&v.d;v&&(s/=m,i/=h,u/=h,d/=m,l=s+d,c=i+u)}return{top:s,left:i,bottom:l,right:c,width:u,height:d}}}function We(t,r,e){for(var n=St(t,!0),a=Q(t)[r];n;){var o=Q(n)[e],s=void 0;if(e==="top"||e==="left"?s=a>=o:s=a<=o,!s)return n;if(n===_t())break;n=St(n,!1)}return!1}function de(t,r,e){for(var n=0,a=0,o=t.children;a<o.length;){if(o[a].style.display!=="none"&&o[a]!==k.ghost&&o[a]!==k.dragged&&wt(o[a],e.draggable,t,!1)){if(n===r)return o[a];n++}a++}return null}function Oe(t,r){for(var e=t.lastElementChild;e&&(e===k.ghost||_(e,"display")==="none"||r&&!ce(e,r));)e=e.previousElementSibling;return e||null}function Z(t,r){var e=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==k.clone&&(!r||ce(t,r))&&e++;return e}function Be(t){var r=0,e=0,n=_t();if(t)do{var a=At(t),o=a.a,s=a.d;r+=t.scrollLeft*o,e+=t.scrollTop*s}while(t!==n&&(t=t.parentNode));return[r,e]}function zn(t,r){for(var e in t)if(!!t.hasOwnProperty(e)){for(var n in r)if(r.hasOwnProperty(n)&&r[n]===t[e][n])return Number(e)}return-1}function St(t,r){if(!t||!t.getBoundingClientRect)return _t();var e=t,n=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var a=_(e);if(e.clientWidth<e.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return _t();if(n||r)return e;n=!0}}while(e=e.parentNode);return _t()}function Gn(t,r){if(t&&r)for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e]);return t}function ve(t,r){return Math.round(t.top)===Math.round(r.top)&&Math.round(t.left)===Math.round(r.left)&&Math.round(t.height)===Math.round(r.height)&&Math.round(t.width)===Math.round(r.width)}var Xt;function pn(t,r){return function(){if(!Xt){var e=arguments,n=this;e.length===1?t.call(n,e[0]):t.apply(n,e),Xt=setTimeout(function(){Xt=void 0},r)}}}function Hn(){clearTimeout(Xt),Xt=void 0}function mn(t,r,e){t.scrollLeft+=r,t.scrollTop+=e}function Pe(t){var r=window.Polymer,e=window.jQuery||window.Zepto;return r&&r.dom?r.dom(t).cloneNode(!0):e?e(t).clone(!0)[0]:t.cloneNode(!0)}function Ue(t,r){_(t,"position","absolute"),_(t,"top",r.top),_(t,"left",r.left),_(t,"width",r.width),_(t,"height",r.height)}function ge(t){_(t,"position",""),_(t,"top",""),_(t,"left",""),_(t,"width",""),_(t,"height","")}var lt="Sortable"+new Date().getTime();function Xn(){var t=[],r;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(a){if(!(_(a,"display")==="none"||a===k.ghost)){t.push({target:a,rect:Q(a)});var o=kt({},t[t.length-1].rect);if(a.thisAnimationDuration){var s=At(a,!0);s&&(o.top-=s.f,o.left-=s.e)}a.fromRect=o}})}},addAnimationState:function(n){t.push(n)},removeAnimationState:function(n){t.splice(zn(t,{target:n}),1)},animateAll:function(n){var a=this;if(!this.options.animation){clearTimeout(r),typeof n=="function"&&n();return}var o=!1,s=0;t.forEach(function(i){var l=0,c=i.target,d=c.fromRect,u=Q(c),f=c.prevFromRect,v=c.prevToRect,h=i.rect,m=At(c,!0);m&&(u.top-=m.f,u.left-=m.e),c.toRect=u,c.thisAnimationDuration&&ve(f,u)&&!ve(d,u)&&(h.top-u.top)/(h.left-u.left)===(d.top-u.top)/(d.left-u.left)&&(l=Vn(h,f,v,a.options)),ve(u,d)||(c.prevFromRect=d,c.prevToRect=u,l||(l=a.options.animation),a.animate(c,h,u,l)),l&&(o=!0,s=Math.max(s,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(r),o?r=setTimeout(function(){typeof n=="function"&&n()},s):typeof n=="function"&&n(),t=[]},animate:function(n,a,o,s){if(s){_(n,"transition",""),_(n,"transform","");var i=At(this.el),l=i&&i.a,c=i&&i.d,d=(a.left-o.left)/(l||1),u=(a.top-o.top)/(c||1);n.animatingX=!!d,n.animatingY=!!u,_(n,"transform","translate3d("+d+"px,"+u+"px,0)"),Yn(n),_(n,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),_(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){_(n,"transition",""),_(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},s)}}}}function Yn(t){return t.offsetWidth}function Vn(t,r,e,n){return Math.sqrt(Math.pow(r.top-t.top,2)+Math.pow(r.left-t.left,2))/Math.sqrt(Math.pow(r.top-e.top,2)+Math.pow(r.left-e.left,2))*n.animation}var Ft=[],ye={initializeByDefault:!0},Zt={mount:function(r){for(var e in ye)ye.hasOwnProperty(e)&&!(e in r)&&(r[e]=ye[e]);Ft.push(r)},pluginEvent:function(r,e,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var o=r+"Global";Ft.forEach(function(s){!e[s.pluginName]||(e[s.pluginName][o]&&e[s.pluginName][o](kt({sortable:e},n)),e.options[s.pluginName]&&e[s.pluginName][r]&&e[s.pluginName][r](kt({sortable:e},n)))})},initializePlugins:function(r,e,n,a){Ft.forEach(function(i){var l=i.pluginName;if(!(!r.options[l]&&!i.initializeByDefault)){var c=new i(r,e,r.options);c.sortable=r,c.options=r.options,r[l]=c,vt(n,c.defaults)}});for(var o in r.options)if(!!r.options.hasOwnProperty(o)){var s=this.modifyOption(r,o,r.options[o]);typeof s!="undefined"&&(r.options[o]=s)}},getEventProperties:function(r,e){var n={};return Ft.forEach(function(a){typeof a.eventProperties=="function"&&vt(n,a.eventProperties.call(e[a.pluginName],r))}),n},modifyOption:function(r,e,n){var a;return Ft.forEach(function(o){!r[o.pluginName]||o.optionListeners&&typeof o.optionListeners[e]=="function"&&(a=o.optionListeners[e].call(r[o.pluginName],n))}),a}};function Ut(t){var r=t.sortable,e=t.rootEl,n=t.name,a=t.targetEl,o=t.cloneEl,s=t.toEl,i=t.fromEl,l=t.oldIndex,c=t.newIndex,d=t.oldDraggableIndex,u=t.newDraggableIndex,f=t.originalEvent,v=t.putSortable,h=t.extraEventProperties;if(r=r||e&&e[lt],!!r){var m,b=r.options,T="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Dt&&!Jt?m=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(n,!0,!0)),m.to=s||e,m.from=i||e,m.item=a||e,m.clone=o,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=d,m.newDraggableIndex=u,m.originalEvent=f,m.pullMode=v?v.lastPutMode:void 0;var S=kt({},h,Zt.getEventProperties(n,r));for(var x in S)m[x]=S[x];e&&e.dispatchEvent(m),b[T]&&b[T].call(r,m)}}var dt=function(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=n.evt,o=Pn(n,["evt"]);Zt.pluginEvent.bind(k)(r,e,kt({dragEl:w,parentEl:nt,ghostEl:A,rootEl:Y,nextEl:Lt,lastDownEl:ae,cloneEl:J,cloneHidden:Tt,dragStarted:zt,putSortable:at,activeSortable:k.active,originalEvent:a,oldIndex:Nt,oldDraggableIndex:Yt,newIndex:pt,newDraggableIndex:xt,hideGhostForTarget:bn,unhideGhostForTarget:wn,cloneNowHidden:function(){Tt=!0},cloneNowShown:function(){Tt=!1},dispatchSortableEvent:function(i){ct({sortable:e,name:i,originalEvent:a})}},o))};function ct(t){Ut(kt({putSortable:at,cloneEl:J,targetEl:w,rootEl:Y,oldIndex:Nt,oldDraggableIndex:Yt,newIndex:pt,newDraggableIndex:xt},t))}var w,nt,A,Y,Lt,ae,J,Tt,Nt,pt,Yt,xt,qt,at,Mt=!1,ue=!1,fe=[],jt,yt,be,we,ze,Ge,zt,Ot,Vt,Kt=!1,te=!1,se,it,$e=[],Ie=!1,he=[],me=typeof document!="undefined",ee=un,He=Jt||Dt?"cssFloat":"float",Kn=me&&!Bn&&!un&&"draggable"in document.createElement("div"),vn=function(){if(!!me){if(Dt)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),gn=function(r,e){var n=_(r),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=de(r,0,e),s=de(r,1,e),i=o&&_(o),l=s&&_(s),c=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+Q(o).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Q(s).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&i.float&&i.float!=="none"){var u=i.float==="left"?"left":"right";return s&&(l.clear==="both"||l.clear===u)?"vertical":"horizontal"}return o&&(i.display==="block"||i.display==="flex"||i.display==="table"||i.display==="grid"||c>=a&&n[He]==="none"||s&&n[He]==="none"&&c+d>a)?"vertical":"horizontal"},Jn=function(r,e,n){var a=n?r.left:r.top,o=n?r.right:r.bottom,s=n?r.width:r.height,i=n?e.left:e.top,l=n?e.right:e.bottom,c=n?e.width:e.height;return a===i||o===l||a+s/2===i+c/2},Zn=function(r,e){var n;return fe.some(function(a){if(!Oe(a)){var o=Q(a),s=a[lt].options.emptyInsertThreshold,i=r>=o.left-s&&r<=o.right+s,l=e>=o.top-s&&e<=o.bottom+s;if(s&&i&&l)return n=a}}),n},yn=function(r){function e(o,s){return function(i,l,c,d){var u=i.options.group.name&&l.options.group.name&&i.options.group.name===l.options.group.name;if(o==null&&(s||u))return!0;if(o==null||o===!1)return!1;if(s&&o==="clone")return o;if(typeof o=="function")return e(o(i,l,c,d),s)(i,l,c,d);var f=(s?i:l).options.group.name;return o===!0||typeof o=="string"&&o===f||o.join&&o.indexOf(f)>-1}}var n={},a=r.group;(!a||oe(a)!="object")&&(a={name:a}),n.name=a.name,n.checkPull=e(a.pull,!0),n.checkPut=e(a.put),n.revertClone=a.revertClone,r.group=n},bn=function(){!vn&&A&&_(A,"display","none")},wn=function(){!vn&&A&&_(A,"display","")};me&&document.addEventListener("click",function(t){if(ue)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),ue=!1,!1},!0);var Et=function(r){if(w){r=r.touches?r.touches[0]:r;var e=Zn(r.clientX,r.clientY);if(e){var n={};for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[lt]._onDragOver(n)}}},Qn=function(r){w&&w.parentNode[lt]._isOutsideThisEl(r.target)};function k(t,r){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=r=vt({},r),t[lt]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return gn(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,i){s.setData("Text",i.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:k.supportPointer!==!1&&"PointerEvent"in window,emptyInsertThreshold:5};Zt.initializePlugins(this,t,e);for(var n in e)!(n in r)&&(r[n]=e[n]);yn(r);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=r.forceFallback?!1:Kn,this.nativeDraggable&&(this.options.touchStartThreshold=1),r.supportPointer?F(t,"pointerdown",this._onTapStart):(F(t,"mousedown",this._onTapStart),F(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(F(t,"dragover",this),F(t,"dragenter",this)),fe.push(this.el),r.store&&r.store.get&&this.sort(r.store.get(this)||[]),vt(this,Xn())}k.prototype={constructor:k,_isOutsideThisEl:function(r){!this.el.contains(r)&&r!==this.el&&(Ot=null)},_getDirection:function(r,e){return typeof this.options.direction=="function"?this.options.direction.call(this,r,e,w):this.options.direction},_onTapStart:function(r){if(!!r.cancelable){var e=this,n=this.el,a=this.options,o=a.preventOnFilter,s=r.type,i=r.touches&&r.touches[0]||r.pointerType&&r.pointerType==="touch"&&r,l=(i||r).target,c=r.target.shadowRoot&&(r.path&&r.path[0]||r.composedPath&&r.composedPath()[0])||l,d=a.filter;if(ar(n),!w&&!(/mousedown|pointerdown/.test(s)&&r.button!==0||a.disabled)&&!c.isContentEditable&&(l=wt(l,a.draggable,n,!1),!(l&&l.animated)&&ae!==l)){if(Nt=Z(l),Yt=Z(l,a.draggable),typeof d=="function"){if(d.call(this,r,l,this)){ct({sortable:e,rootEl:c,name:"filter",targetEl:l,toEl:n,fromEl:n}),dt("filter",e,{evt:r}),o&&r.cancelable&&r.preventDefault();return}}else if(d&&(d=d.split(",").some(function(u){if(u=wt(c,u.trim(),n,!1),u)return ct({sortable:e,rootEl:u,name:"filter",targetEl:l,fromEl:n,toEl:n}),dt("filter",e,{evt:r}),!0}),d)){o&&r.cancelable&&r.preventDefault();return}a.handle&&!wt(c,a.handle,n,!1)||this._prepareDragStart(r,i,l)}}},_prepareDragStart:function(r,e,n){var a=this,o=a.el,s=a.options,i=o.ownerDocument,l;if(n&&!w&&n.parentNode===o){var c=Q(n);if(Y=o,w=n,nt=w.parentNode,Lt=w.nextSibling,ae=n,qt=s.group,k.dragged=w,jt={target:w,clientX:(e||r).clientX,clientY:(e||r).clientY},ze=jt.clientX-c.left,Ge=jt.clientY-c.top,this._lastX=(e||r).clientX,this._lastY=(e||r).clientY,w.style["will-change"]="all",l=function(){if(dt("delayEnded",a,{evt:r}),k.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Fe&&a.nativeDraggable&&(w.draggable=!0),a._triggerDragStart(r,e),ct({sortable:a,name:"choose",originalEvent:r}),V(w,s.chosenClass,!0)},s.ignore.split(",").forEach(function(d){hn(w,d.trim(),Ce)}),F(i,"dragover",Et),F(i,"mousemove",Et),F(i,"touchmove",Et),F(i,"mouseup",a._onDrop),F(i,"touchend",a._onDrop),F(i,"touchcancel",a._onDrop),Fe&&this.nativeDraggable&&(this.options.touchStartThreshold=4,w.draggable=!0),dt("delayStart",this,{evt:r}),s.delay&&(!s.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(Jt||Dt))){if(k.eventCanceled){this._onDrop();return}F(i,"mouseup",a._disableDelayedDrag),F(i,"touchend",a._disableDelayedDrag),F(i,"touchcancel",a._disableDelayedDrag),F(i,"mousemove",a._delayedDragTouchMoveHandler),F(i,"touchmove",a._delayedDragTouchMoveHandler),s.supportPointer&&F(i,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(l,s.delay)}else l()}},_delayedDragTouchMoveHandler:function(r){var e=r.touches?r.touches[0]:r;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){w&&Ce(w),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var r=this.el.ownerDocument;M(r,"mouseup",this._disableDelayedDrag),M(r,"touchend",this._disableDelayedDrag),M(r,"touchcancel",this._disableDelayedDrag),M(r,"mousemove",this._delayedDragTouchMoveHandler),M(r,"touchmove",this._delayedDragTouchMoveHandler),M(r,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(r,e){e=e||r.pointerType=="touch"&&r,!this.nativeDraggable||e?this.options.supportPointer?F(document,"pointermove",this._onTouchMove):e?F(document,"touchmove",this._onTouchMove):F(document,"mousemove",this._onTouchMove):(F(w,"dragend",this),F(Y,"dragstart",this._onDragStart));try{document.selection?ie(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(r,e){if(Mt=!1,Y&&w){dt("dragStarted",this,{evt:e}),this.nativeDraggable&&F(document,"dragover",Qn);var n=this.options;!r&&V(w,n.dragClass,!1),V(w,n.ghostClass,!0),k.active=this,r&&this._appendGhost(),ct({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(yt){this._lastX=yt.clientX,this._lastY=yt.clientY,bn();for(var r=document.elementFromPoint(yt.clientX,yt.clientY),e=r;r&&r.shadowRoot&&(r=r.shadowRoot.elementFromPoint(yt.clientX,yt.clientY),r!==e);)e=r;if(w.parentNode[lt]._isOutsideThisEl(r),e)do{if(e[lt]){var n=void 0;if(n=e[lt]._onDragOver({clientX:yt.clientX,clientY:yt.clientY,target:r,rootEl:e}),n&&!this.options.dragoverBubble)break}r=e}while(e=e.parentNode);wn()}},_onTouchMove:function(r){if(jt){var e=this.options,n=e.fallbackTolerance,a=e.fallbackOffset,o=r.touches?r.touches[0]:r,s=A&&At(A,!0),i=A&&s&&s.a,l=A&&s&&s.d,c=ee&&it&&Be(it),d=(o.clientX-jt.clientX+a.x)/(i||1)+(c?c[0]-$e[0]:0)/(i||1),u=(o.clientY-jt.clientY+a.y)/(l||1)+(c?c[1]-$e[1]:0)/(l||1);if(!k.active&&!Mt){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(r,!0)}if(A){s?(s.e+=d-(be||0),s.f+=u-(we||0)):s={a:1,b:0,c:0,d:1,e:d,f:u};var f="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");_(A,"webkitTransform",f),_(A,"mozTransform",f),_(A,"msTransform",f),_(A,"transform",f),be=d,we=u,yt=o}r.cancelable&&r.preventDefault()}},_appendGhost:function(){if(!A){var r=this.options.fallbackOnBody?document.body:Y,e=Q(w,!0,ee,!0,r),n=this.options;if(ee){for(it=r;_(it,"position")==="static"&&_(it,"transform")==="none"&&it!==document;)it=it.parentNode;it!==document.body&&it!==document.documentElement?(it===document&&(it=_t()),e.top+=it.scrollTop,e.left+=it.scrollLeft):it=_t(),$e=Be(it)}A=w.cloneNode(!0),V(A,n.ghostClass,!1),V(A,n.fallbackClass,!0),V(A,n.dragClass,!0),_(A,"transition",""),_(A,"transform",""),_(A,"box-sizing","border-box"),_(A,"margin",0),_(A,"top",e.top),_(A,"left",e.left),_(A,"width",e.width),_(A,"height",e.height),_(A,"opacity","0.8"),_(A,"position",ee?"absolute":"fixed"),_(A,"zIndex","100000"),_(A,"pointerEvents","none"),k.ghost=A,r.appendChild(A),_(A,"transform-origin",ze/parseInt(A.style.width)*100+"% "+Ge/parseInt(A.style.height)*100+"%")}},_onDragStart:function(r,e){var n=this,a=r.dataTransfer,o=n.options;if(dt("dragStart",this,{evt:r}),k.eventCanceled){this._onDrop();return}dt("setupClone",this),k.eventCanceled||(J=Pe(w),J.draggable=!1,J.style["will-change"]="",this._hideClone(),V(J,this.options.chosenClass,!1),k.clone=J),n.cloneId=ie(function(){dt("clone",n),!k.eventCanceled&&(n.options.removeCloneOnHide||Y.insertBefore(J,w),n._hideClone(),ct({sortable:n,name:"clone"}))}),!e&&V(w,o.dragClass,!0),e?(ue=!0,n._loopId=setInterval(n._emulateDragOver,50)):(M(document,"mouseup",n._onDrop),M(document,"touchend",n._onDrop),M(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",o.setData&&o.setData.call(n,a,w)),F(document,"drop",n),_(w,"transform","translateZ(0)")),Mt=!0,n._dragStartId=ie(n._dragStarted.bind(n,e,r)),F(document,"selectstart",n),zt=!0,ke&&_(document.body,"user-select","none")},_onDragOver:function(r){var e=this.el,n=r.target,a,o,s,i=this.options,l=i.group,c=k.active,d=qt===l,u=i.sort,f=at||c,v,h=this,m=!1;if(Ie)return;function b(X,ut){dt(X,h,kt({evt:r,isOwner:d,axis:v?"vertical":"horizontal",revert:s,dragRect:a,targetRect:o,canSort:u,fromSortable:f,target:n,completed:S,onMove:function(ot,y){return _e(Y,e,w,a,ot,Q(ot),r,y)},changed:x},ut))}function T(){b("dragOverAnimationCapture"),h.captureAnimationState(),h!==f&&f.captureAnimationState()}function S(X){return b("dragOverCompleted",{insertion:X}),X&&(d?c._hideClone():c._showClone(h),h!==f&&(V(w,at?at.options.ghostClass:c.options.ghostClass,!1),V(w,i.ghostClass,!0)),at!==h&&h!==k.active?at=h:h===k.active&&at&&(at=null),f===h&&(h._ignoreWhileAnimating=n),h.animateAll(function(){b("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(n===w&&!w.animated||n===e&&!n.animated)&&(Ot=null),!i.dragoverBubble&&!r.rootEl&&n!==document&&(w.parentNode[lt]._isOutsideThisEl(r.target),!X&&Et(r)),!i.dragoverBubble&&r.stopPropagation&&r.stopPropagation(),m=!0}function x(){pt=Z(w),xt=Z(w,i.draggable),ct({sortable:h,name:"change",toEl:e,newIndex:pt,newDraggableIndex:xt,originalEvent:r})}if(r.preventDefault!==void 0&&r.cancelable&&r.preventDefault(),n=wt(n,i.draggable,e,!0),b("dragOver"),k.eventCanceled)return m;if(w.contains(r.target)||n.animated&&n.animatingX&&n.animatingY||h._ignoreWhileAnimating===n)return S(!1);if(ue=!1,c&&!i.disabled&&(d?u||(s=!Y.contains(w)):at===this||(this.lastPutMode=qt.checkPull(this,c,w,r))&&l.checkPut(this,c,w,r))){if(v=this._getDirection(r,n)==="vertical",a=Q(w),b("dragOverValid"),k.eventCanceled)return m;if(s)return nt=Y,T(),this._hideClone(),b("revert"),k.eventCanceled||(Lt?Y.insertBefore(w,Lt):Y.appendChild(w)),S(!0);var D=Oe(e,i.draggable);if(!D||er(r,v,this)&&!D.animated){if(D===w)return S(!1);if(D&&e===r.target&&(n=D),n&&(o=Q(n)),_e(Y,e,w,a,n,o,r,!!n)!==!1)return T(),e.appendChild(w),nt=e,x(),S(!0)}else if(n.parentNode===e){o=Q(n);var N=0,W,B=w.parentNode!==e,j=!Jn(w.animated&&w.toRect||a,n.animated&&n.toRect||o,v),L=v?"top":"left",I=We(n,"top","top")||We(w,"top","top"),R=I?I.scrollTop:void 0;Ot!==n&&(W=o[L],Kt=!1,te=!j&&i.invertSwap||B),N=nr(r,n,o,v,j?1:i.swapThreshold,i.invertedSwapThreshold==null?i.swapThreshold:i.invertedSwapThreshold,te,Ot===n);var K;if(N!==0){var et=Z(w);do et-=N,K=nt.children[et];while(K&&(_(K,"display")==="none"||K===A))}if(N===0||K===n)return S(!1);Ot=n,Vt=N;var q=n.nextElementSibling,G=!1;G=N===1;var U=_e(Y,e,w,a,n,o,r,G);if(U!==!1)return(U===1||U===-1)&&(G=U===1),Ie=!0,setTimeout(tr,30),T(),G&&!q?e.appendChild(w):n.parentNode.insertBefore(w,G?q:n),I&&mn(I,0,R-I.scrollTop),nt=w.parentNode,W!==void 0&&!te&&(se=Math.abs(W-Q(n)[L])),x(),S(!0)}if(e.contains(w))return S(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){M(document,"mousemove",this._onTouchMove),M(document,"touchmove",this._onTouchMove),M(document,"pointermove",this._onTouchMove),M(document,"dragover",Et),M(document,"mousemove",Et),M(document,"touchmove",Et)},_offUpEvents:function(){var r=this.el.ownerDocument;M(r,"mouseup",this._onDrop),M(r,"touchend",this._onDrop),M(r,"pointerup",this._onDrop),M(r,"touchcancel",this._onDrop),M(document,"selectstart",this)},_onDrop:function(r){var e=this.el,n=this.options;if(pt=Z(w),xt=Z(w,n.draggable),dt("drop",this,{evt:r}),nt=w&&w.parentNode,pt=Z(w),xt=Z(w,n.draggable),k.eventCanceled){this._nulling();return}Mt=!1,te=!1,Kt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),je(this.cloneId),je(this._dragStartId),this.nativeDraggable&&(M(document,"drop",this),M(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ke&&_(document.body,"user-select",""),_(w,"transform",""),r&&(zt&&(r.cancelable&&r.preventDefault(),!n.dropBubble&&r.stopPropagation()),A&&A.parentNode&&A.parentNode.removeChild(A),(Y===nt||at&&at.lastPutMode!=="clone")&&J&&J.parentNode&&J.parentNode.removeChild(J),w&&(this.nativeDraggable&&M(w,"dragend",this),Ce(w),w.style["will-change"]="",zt&&!Mt&&V(w,at?at.options.ghostClass:this.options.ghostClass,!1),V(w,this.options.chosenClass,!1),ct({sortable:this,name:"unchoose",toEl:nt,newIndex:null,newDraggableIndex:null,originalEvent:r}),Y!==nt?(pt>=0&&(ct({rootEl:nt,name:"add",toEl:nt,fromEl:Y,originalEvent:r}),ct({sortable:this,name:"remove",toEl:nt,originalEvent:r}),ct({rootEl:nt,name:"sort",toEl:nt,fromEl:Y,originalEvent:r}),ct({sortable:this,name:"sort",toEl:nt,originalEvent:r})),at&&at.save()):pt!==Nt&&pt>=0&&(ct({sortable:this,name:"update",toEl:nt,originalEvent:r}),ct({sortable:this,name:"sort",toEl:nt,originalEvent:r})),k.active&&((pt==null||pt===-1)&&(pt=Nt,xt=Yt),ct({sortable:this,name:"end",toEl:nt,originalEvent:r}),this.save()))),this._nulling()},_nulling:function(){dt("nulling",this),Y=w=nt=A=Lt=J=ae=Tt=jt=yt=zt=pt=xt=Nt=Yt=Ot=Vt=at=qt=k.dragged=k.ghost=k.clone=k.active=null,he.forEach(function(r){r.checked=!0}),he.length=be=we=0},handleEvent:function(r){switch(r.type){case"drop":case"dragend":this._onDrop(r);break;case"dragenter":case"dragover":w&&(this._onDragOver(r),qn(r));break;case"selectstart":r.preventDefault();break}},toArray:function(){for(var r=[],e,n=this.el.children,a=0,o=n.length,s=this.options;a<o;a++)e=n[a],wt(e,s.draggable,this.el,!1)&&r.push(e.getAttribute(s.dataIdAttr)||or(e));return r},sort:function(r){var e={},n=this.el;this.toArray().forEach(function(a,o){var s=n.children[o];wt(s,this.options.draggable,n,!1)&&(e[a]=s)},this),r.forEach(function(a){e[a]&&(n.removeChild(e[a]),n.appendChild(e[a]))})},save:function(){var r=this.options.store;r&&r.set&&r.set(this)},closest:function(r,e){return wt(r,e||this.options.draggable,this.el,!1)},option:function(r,e){var n=this.options;if(e===void 0)return n[r];var a=Zt.modifyOption(this,r,e);typeof a!="undefined"?n[r]=a:n[r]=e,r==="group"&&yn(n)},destroy:function(){dt("destroy",this);var r=this.el;r[lt]=null,M(r,"mousedown",this._onTapStart),M(r,"touchstart",this._onTapStart),M(r,"pointerdown",this._onTapStart),this.nativeDraggable&&(M(r,"dragover",this),M(r,"dragenter",this)),Array.prototype.forEach.call(r.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),fe.splice(fe.indexOf(this.el),1),this.el=r=null},_hideClone:function(){if(!Tt){if(dt("hideClone",this),k.eventCanceled)return;_(J,"display","none"),this.options.removeCloneOnHide&&J.parentNode&&J.parentNode.removeChild(J),Tt=!0}},_showClone:function(r){if(r.lastPutMode!=="clone"){this._hideClone();return}if(Tt){if(dt("showClone",this),k.eventCanceled)return;Y.contains(w)&&!this.options.group.revertClone?Y.insertBefore(J,w):Lt?Y.insertBefore(J,Lt):Y.appendChild(J),this.options.group.revertClone&&this.animate(w,J),_(J,"display",""),Tt=!1}}};function qn(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function _e(t,r,e,n,a,o,s,i){var l,c=t[lt],d=c.options.onMove,u;return window.CustomEvent&&!Dt&&!Jt?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=r,l.from=t,l.dragged=e,l.draggedRect=n,l.related=a||r,l.relatedRect=o||Q(r),l.willInsertAfter=i,l.originalEvent=s,t.dispatchEvent(l),d&&(u=d.call(c,l,s)),u}function Ce(t){t.draggable=!1}function tr(){Ie=!1}function er(t,r,e){var n=Q(Oe(e.el,e.options.draggable)),a=10;return r?t.clientX>n.right+a||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+a}function nr(t,r,e,n,a,o,s,i){var l=n?t.clientY:t.clientX,c=n?e.height:e.width,d=n?e.top:e.left,u=n?e.bottom:e.right,f=!1;if(!s){if(i&&se<c*a){if(!Kt&&(Vt===1?l>d+c*o/2:l<u-c*o/2)&&(Kt=!0),Kt)f=!0;else if(Vt===1?l<d+se:l>u-se)return-Vt}else if(l>d+c*(1-a)/2&&l<u-c*(1-a)/2)return rr(r)}return f=f||s,f&&(l<d+c*o/2||l>u-c*o/2)?l>d+c/2?1:-1:0}function rr(t){return Z(w)<Z(t)?1:-1}function or(t){for(var r=t.tagName+t.className+t.src+t.href+t.textContent,e=r.length,n=0;e--;)n+=r.charCodeAt(e);return n.toString(36)}function ar(t){he.length=0;for(var r=t.getElementsByTagName("input"),e=r.length;e--;){var n=r[e];n.checked&&he.push(n)}}function ie(t){return setTimeout(t,0)}function je(t){return clearTimeout(t)}me&&F(document,"touchmove",function(t){(k.active||Mt)&&t.cancelable&&t.preventDefault()});k.utils={on:F,off:M,css:_,find:hn,is:function(r,e){return!!wt(r,e,r,!1)},extend:Gn,throttle:pn,closest:wt,toggleClass:V,clone:Pe,index:Z,nextTick:ie,cancelNextTick:je,detectDirection:gn,getChild:de};k.get=function(t){return t[lt]};k.mount=function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];r[0].constructor===Array&&(r=r[0]),r.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(k.utils=kt({},k.utils,n.utils)),Zt.mount(n)})};k.create=function(t,r){return new k(t,r)};k.version=Wn;var rt=[],Gt,Ee,Le=!1,De,xe,pe,Ht;function sr(){function t(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this))}return t.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?F(document,"dragover",this._handleAutoScroll):this.options.supportPointer?F(document,"pointermove",this._handleFallbackAutoScroll):n.touches?F(document,"touchmove",this._handleFallbackAutoScroll):F(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?M(document,"dragover",this._handleAutoScroll):(M(document,"pointermove",this._handleFallbackAutoScroll),M(document,"touchmove",this._handleFallbackAutoScroll),M(document,"mousemove",this._handleFallbackAutoScroll)),Xe(),le(),Hn()},nulling:function(){pe=Ee=Gt=Le=Ht=De=xe=null,rt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var a=this,o=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(o,s);if(pe=e,n||Jt||Dt||ke){Te(e,this.options,i,n);var l=St(i,!0);Le&&(!Ht||o!==De||s!==xe)&&(Ht&&Xe(),Ht=setInterval(function(){var c=St(document.elementFromPoint(o,s),!0);c!==l&&(l=c,le()),Te(e,a.options,c,n)},10),De=o,xe=s)}else{if(!this.options.bubbleScroll||St(i,!0)===_t()){le();return}Te(e,this.options,St(i,!1),!1)}}},vt(t,{pluginName:"scroll",initializeByDefault:!0})}function le(){rt.forEach(function(t){clearInterval(t.pid)}),rt=[]}function Xe(){clearInterval(Ht)}var Te=pn(function(t,r,e,n){if(!!r.scroll){var a=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,s=r.scrollSensitivity,i=r.scrollSpeed,l=_t(),c=!1,d;Ee!==e&&(Ee=e,le(),Gt=r.scroll,d=r.scrollFn,Gt===!0&&(Gt=St(e,!0)));var u=0,f=Gt;do{var v=f,h=Q(v),m=h.top,b=h.bottom,T=h.left,S=h.right,x=h.width,D=h.height,N=void 0,W=void 0,B=v.scrollWidth,j=v.scrollHeight,L=_(v),I=v.scrollLeft,R=v.scrollTop;v===l?(N=x<B&&(L.overflowX==="auto"||L.overflowX==="scroll"||L.overflowX==="visible"),W=D<j&&(L.overflowY==="auto"||L.overflowY==="scroll"||L.overflowY==="visible")):(N=x<B&&(L.overflowX==="auto"||L.overflowX==="scroll"),W=D<j&&(L.overflowY==="auto"||L.overflowY==="scroll"));var K=N&&(Math.abs(S-a)<=s&&I+x<B)-(Math.abs(T-a)<=s&&!!I),et=W&&(Math.abs(b-o)<=s&&R+D<j)-(Math.abs(m-o)<=s&&!!R);if(!rt[u])for(var q=0;q<=u;q++)rt[q]||(rt[q]={});(rt[u].vx!=K||rt[u].vy!=et||rt[u].el!==v)&&(rt[u].el=v,rt[u].vx=K,rt[u].vy=et,clearInterval(rt[u].pid),(K!=0||et!=0)&&(c=!0,rt[u].pid=setInterval(function(){n&&this.layer===0&&k.active._onTouchMove(pe);var G=rt[this.layer].vy?rt[this.layer].vy*i:0,U=rt[this.layer].vx?rt[this.layer].vx*i:0;typeof d=="function"&&d.call(k.dragged.parentNode[lt],U,G,t,pe,rt[this.layer].el)!=="continue"||mn(rt[this.layer].el,U,G)}.bind({layer:u}),24))),u++}while(r.bubbleScroll&&f!==l&&(f=St(f,!1)));Le=c}},30),$n=function(r){var e=r.originalEvent,n=r.putSortable,a=r.dragEl,o=r.activeSortable,s=r.dispatchSortableEvent,i=r.hideGhostForTarget,l=r.unhideGhostForTarget;if(!!e){var c=n||o;i();var d=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(u)&&(s("spill"),this.onSpill({dragEl:a,putSortable:n}))}};function Me(){}Me.prototype={startIndex:null,dragStart:function(r){var e=r.oldDraggableIndex;this.startIndex=e},onSpill:function(r){var e=r.dragEl,n=r.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=de(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(e,a):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:$n};vt(Me,{pluginName:"revertOnSpill"});function Ne(){}Ne.prototype={onSpill:function(r){var e=r.dragEl,n=r.putSortable,a=n||this.sortable;a.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),a.animateAll()},drop:$n};vt(Ne,{pluginName:"removeOnSpill"});var mt;function ir(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(e){var n=e.dragEl;mt=n},dragOverValid:function(e){var n=e.completed,a=e.target,o=e.onMove,s=e.activeSortable,i=e.changed,l=e.cancel;if(!!s.options.swap){var c=this.sortable.el,d=this.options;if(a&&a!==c){var u=mt;o(a)!==!1?(V(a,d.swapClass,!0),mt=a):mt=null,u&&u!==mt&&V(u,d.swapClass,!1)}i(),n(!0),l()}},drop:function(e){var n=e.activeSortable,a=e.putSortable,o=e.dragEl,s=a||this.sortable,i=this.options;mt&&V(mt,i.swapClass,!1),mt&&(i.swap||a&&a.options.swap)&&o!==mt&&(s.captureAnimationState(),s!==n&&n.captureAnimationState(),lr(o,mt),s.animateAll(),s!==n&&n.animateAll())},nulling:function(){mt=null}},vt(t,{pluginName:"swap",eventProperties:function(){return{swapItem:mt}}})}function lr(t,r){var e=t.parentNode,n=r.parentNode,a,o;!e||!n||e.isEqualNode(r)||n.isEqualNode(t)||(a=Z(t),o=Z(r),e.isEqualNode(n)&&a<o&&o++,e.insertBefore(r,e.children[a]),n.insertBefore(t,n.children[o]))}var E=[],ht=[],Rt,bt,Wt=!1,ft=!1,Pt=!1,H,Bt,ne;function cr(){function t(r){for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this));r.options.supportPointer?F(document,"pointerup",this._deselectMultiDrag):(F(document,"mouseup",this._deselectMultiDrag),F(document,"touchend",this._deselectMultiDrag)),F(document,"keydown",this._checkKeyDown),F(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(a,o){var s="";E.length&&bt===r?E.forEach(function(i,l){s+=(l?", ":"")+i.textContent}):s=o.textContent,a.setData("Text",s)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var n=e.dragEl;H=n},delayEnded:function(){this.isMultiDrag=~E.indexOf(H)},setupClone:function(e){var n=e.sortable,a=e.cancel;if(!!this.isMultiDrag){for(var o=0;o<E.length;o++)ht.push(Pe(E[o])),ht[o].sortableIndex=E[o].sortableIndex,ht[o].draggable=!1,ht[o].style["will-change"]="",V(ht[o],this.options.selectedClass,!1),E[o]===H&&V(ht[o],this.options.chosenClass,!1);n._hideClone(),a()}},clone:function(e){var n=e.sortable,a=e.rootEl,o=e.dispatchSortableEvent,s=e.cancel;!this.isMultiDrag||this.options.removeCloneOnHide||E.length&&bt===n&&(Ye(!0,a),o("clone"),s())},showClone:function(e){var n=e.cloneNowShown,a=e.rootEl,o=e.cancel;!this.isMultiDrag||(Ye(!1,a),ht.forEach(function(s){_(s,"display","")}),n(),ne=!1,o())},hideClone:function(e){var n=this;e.sortable;var a=e.cloneNowHidden,o=e.cancel;!this.isMultiDrag||(ht.forEach(function(s){_(s,"display","none"),n.options.removeCloneOnHide&&s.parentNode&&s.parentNode.removeChild(s)}),a(),ne=!0,o())},dragStartGlobal:function(e){e.sortable,!this.isMultiDrag&&bt&&bt.multiDrag._deselectMultiDrag(),E.forEach(function(n){n.sortableIndex=Z(n)}),E=E.sort(function(n,a){return n.sortableIndex-a.sortableIndex}),Pt=!0},dragStarted:function(e){var n=this,a=e.sortable;if(!!this.isMultiDrag){if(this.options.sort&&(a.captureAnimationState(),this.options.animation)){E.forEach(function(s){s!==H&&_(s,"position","absolute")});var o=Q(H,!1,!0,!0);E.forEach(function(s){s!==H&&Ue(s,o)}),ft=!0,Wt=!0}a.animateAll(function(){ft=!1,Wt=!1,n.options.animation&&E.forEach(function(s){ge(s)}),n.options.sort&&re()})}},dragOver:function(e){var n=e.target,a=e.completed,o=e.cancel;ft&&~E.indexOf(n)&&(a(!1),o())},revert:function(e){var n=e.fromSortable,a=e.rootEl,o=e.sortable,s=e.dragRect;E.length>1&&(E.forEach(function(i){o.addAnimationState({target:i,rect:ft?Q(i):s}),ge(i),i.fromRect=s,n.removeAnimationState(i)}),ft=!1,dr(!this.options.removeCloneOnHide,a))},dragOverCompleted:function(e){var n=e.sortable,a=e.isOwner,o=e.insertion,s=e.activeSortable,i=e.parentEl,l=e.putSortable,c=this.options;if(o){if(a&&s._hideClone(),Wt=!1,c.animation&&E.length>1&&(ft||!a&&!s.options.sort&&!l)){var d=Q(H,!1,!0,!0);E.forEach(function(f){f!==H&&(Ue(f,d),i.appendChild(f))}),ft=!0}if(!a)if(ft||re(),E.length>1){var u=ne;s._showClone(n),s.options.animation&&!ne&&u&&ht.forEach(function(f){s.addAnimationState({target:f,rect:Bt}),f.fromRect=Bt,f.thisAnimationDuration=null})}else s._showClone(n)}},dragOverAnimationCapture:function(e){var n=e.dragRect,a=e.isOwner,o=e.activeSortable;if(E.forEach(function(i){i.thisAnimationDuration=null}),o.options.animation&&!a&&o.multiDrag.isMultiDrag){Bt=vt({},n);var s=At(H,!0);Bt.top-=s.f,Bt.left-=s.e}},dragOverAnimationComplete:function(){ft&&(ft=!1,re())},drop:function(e){var n=e.originalEvent,a=e.rootEl,o=e.parentEl,s=e.sortable,i=e.dispatchSortableEvent,l=e.oldIndex,c=e.putSortable,d=c||this.sortable;if(!!n){var u=this.options,f=o.children;if(!Pt)if(u.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),V(H,u.selectedClass,!~E.indexOf(H)),~E.indexOf(H))E.splice(E.indexOf(H),1),Rt=null,Ut({sortable:s,rootEl:a,name:"deselect",targetEl:H,originalEvt:n});else{if(E.push(H),Ut({sortable:s,rootEl:a,name:"select",targetEl:H,originalEvt:n}),n.shiftKey&&Rt&&s.el.contains(Rt)){var v=Z(Rt),h=Z(H);if(~v&&~h&&v!==h){var m,b;for(h>v?(b=v,m=h):(b=h,m=v+1);b<m;b++)~E.indexOf(f[b])||(V(f[b],u.selectedClass,!0),E.push(f[b]),Ut({sortable:s,rootEl:a,name:"select",targetEl:f[b],originalEvt:n}))}}else Rt=H;bt=d}if(Pt&&this.isMultiDrag){if((o[lt].options.sort||o!==a)&&E.length>1){var T=Q(H),S=Z(H,":not(."+this.options.selectedClass+")");if(!Wt&&u.animation&&(H.thisAnimationDuration=null),d.captureAnimationState(),!Wt&&(u.animation&&(H.fromRect=T,E.forEach(function(D){if(D.thisAnimationDuration=null,D!==H){var N=ft?Q(D):T;D.fromRect=N,d.addAnimationState({target:D,rect:N})}})),re(),E.forEach(function(D){f[S]?o.insertBefore(D,f[S]):o.appendChild(D),S++}),l===Z(H))){var x=!1;E.forEach(function(D){if(D.sortableIndex!==Z(D)){x=!0;return}}),x&&i("update")}E.forEach(function(D){ge(D)}),d.animateAll()}bt=d}(a===o||c&&c.lastPutMode!=="clone")&&ht.forEach(function(D){D.parentNode&&D.parentNode.removeChild(D)})}},nullingGlobal:function(){this.isMultiDrag=Pt=!1,ht.length=0},destroyGlobal:function(){this._deselectMultiDrag(),M(document,"pointerup",this._deselectMultiDrag),M(document,"mouseup",this._deselectMultiDrag),M(document,"touchend",this._deselectMultiDrag),M(document,"keydown",this._checkKeyDown),M(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(typeof Pt!="undefined"&&Pt)&&bt===this.sortable&&!(e&&wt(e.target,this.options.draggable,this.sortable.el,!1))&&!(e&&e.button!==0))for(;E.length;){var n=E[0];V(n,this.options.selectedClass,!1),E.shift(),Ut({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:n,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},vt(t,{pluginName:"multiDrag",utils:{select:function(e){var n=e.parentNode[lt];!n||!n.options.multiDrag||~E.indexOf(e)||(bt&&bt!==n&&(bt.multiDrag._deselectMultiDrag(),bt=n),V(e,n.options.selectedClass,!0),E.push(e))},deselect:function(e){var n=e.parentNode[lt],a=E.indexOf(e);!n||!n.options.multiDrag||!~a||(V(e,n.options.selectedClass,!1),E.splice(a,1))}},eventProperties:function(){var e=this,n=[],a=[];return E.forEach(function(o){n.push({multiDragElement:o,index:o.sortableIndex});var s;ft&&o!==H?s=-1:ft?s=Z(o,":not(."+e.options.selectedClass+")"):s=Z(o),a.push({multiDragElement:o,index:s})}),{items:Mn(E),clones:[].concat(ht),oldIndicies:n,newIndicies:a}},optionListeners:{multiDragKey:function(e){return e=e.toLowerCase(),e==="ctrl"?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function dr(t,r){E.forEach(function(e,n){var a=r.children[e.sortableIndex+(t?Number(n):0)];a?r.insertBefore(e,a):r.appendChild(e)})}function Ye(t,r){ht.forEach(function(e,n){var a=r.children[e.sortableIndex+(t?Number(n):0)];a?r.insertBefore(e,a):r.appendChild(e)})}function re(){E.forEach(function(t){t!==H&&t.parentNode&&t.parentNode.removeChild(t)})}k.mount(new sr);k.mount(Ne,Me);var ur=Object.freeze(Object.defineProperty({__proto__:null,default:k,MultiDrag:cr,Sortable:k,Swap:ir},Symbol.toStringTag,{value:"Module"})),fr=xn(ur);(function(t,r){(function(n,a){t.exports=a(fr)})(typeof self!="undefined"?self:Tn,function(e){return function(n){var a={};function o(s){if(a[s])return a[s].exports;var i=a[s]={i:s,l:!1,exports:{}};return n[s].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=n,o.c=a,o.d=function(s,i,l){o.o(s,i)||Object.defineProperty(s,i,{enumerable:!0,get:l})},o.r=function(s){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},o.t=function(s,i){if(i&1&&(s=o(s)),i&8||i&4&&typeof s=="object"&&s&&s.__esModule)return s;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:s}),i&2&&typeof s!="string")for(var c in s)o.d(l,c,function(d){return s[d]}.bind(null,c));return l},o.n=function(s){var i=s&&s.__esModule?function(){return s.default}:function(){return s};return o.d(i,"a",i),i},o.o=function(s,i){return Object.prototype.hasOwnProperty.call(s,i)},o.p="",o(o.s="fb15")}({"01f9":function(n,a,o){var s=o("2d00"),i=o("5ca1"),l=o("2aba"),c=o("32e9"),d=o("84f2"),u=o("41a0"),f=o("7f20"),v=o("38fd"),h=o("2b4c")("iterator"),m=!([].keys&&"next"in[].keys()),b="@@iterator",T="keys",S="values",x=function(){return this};n.exports=function(D,N,W,B,j,L,I){u(W,N,B);var R=function(g){if(!m&&g in G)return G[g];switch(g){case T:return function(){return new W(this,g)};case S:return function(){return new W(this,g)}}return function(){return new W(this,g)}},K=N+" Iterator",et=j==S,q=!1,G=D.prototype,U=G[h]||G[b]||j&&G[j],X=U||R(j),ut=j?et?R("entries"):X:void 0,st=N=="Array"&&G.entries||U,ot,y,p;if(st&&(p=v(st.call(new D)),p!==Object.prototype&&p.next&&(f(p,K,!0),!s&&typeof p[h]!="function"&&c(p,h,x))),et&&U&&U.name!==S&&(q=!0,X=function(){return U.call(this)}),(!s||I)&&(m||q||!G[h])&&c(G,h,X),d[N]=X,d[K]=x,j)if(ot={values:et?X:R(S),keys:L?X:R(T),entries:ut},I)for(y in ot)y in G||l(G,y,ot[y]);else i(i.P+i.F*(m||q),N,ot);return ot}},"02f4":function(n,a,o){var s=o("4588"),i=o("be13");n.exports=function(l){return function(c,d){var u=String(i(c)),f=s(d),v=u.length,h,m;return f<0||f>=v?l?"":void 0:(h=u.charCodeAt(f),h<55296||h>56319||f+1===v||(m=u.charCodeAt(f+1))<56320||m>57343?l?u.charAt(f):h:l?u.slice(f,f+2):(h-55296<<10)+(m-56320)+65536)}}},"0390":function(n,a,o){var s=o("02f4")(!0);n.exports=function(i,l,c){return l+(c?s(i,l).length:1)}},"0bfb":function(n,a,o){var s=o("cb7c");n.exports=function(){var i=s(this),l="";return i.global&&(l+="g"),i.ignoreCase&&(l+="i"),i.multiline&&(l+="m"),i.unicode&&(l+="u"),i.sticky&&(l+="y"),l}},"0d58":function(n,a,o){var s=o("ce10"),i=o("e11e");n.exports=Object.keys||function(c){return s(c,i)}},1495:function(n,a,o){var s=o("86cc"),i=o("cb7c"),l=o("0d58");n.exports=o("9e1e")?Object.defineProperties:function(d,u){i(d);for(var f=l(u),v=f.length,h=0,m;v>h;)s.f(d,m=f[h++],u[m]);return d}},"214f":function(n,a,o){o("b0c5");var s=o("2aba"),i=o("32e9"),l=o("79e5"),c=o("be13"),d=o("2b4c"),u=o("520a"),f=d("species"),v=!l(function(){var m=/./;return m.exec=function(){var b=[];return b.groups={a:"7"},b},"".replace(m,"$<a>")!=="7"}),h=function(){var m=/(?:)/,b=m.exec;m.exec=function(){return b.apply(this,arguments)};var T="ab".split(m);return T.length===2&&T[0]==="a"&&T[1]==="b"}();n.exports=function(m,b,T){var S=d(m),x=!l(function(){var L={};return L[S]=function(){return 7},""[m](L)!=7}),D=x?!l(function(){var L=!1,I=/a/;return I.exec=function(){return L=!0,null},m==="split"&&(I.constructor={},I.constructor[f]=function(){return I}),I[S](""),!L}):void 0;if(!x||!D||m==="replace"&&!v||m==="split"&&!h){var N=/./[S],W=T(c,S,""[m],function(I,R,K,et,q){return R.exec===u?x&&!q?{done:!0,value:N.call(R,K,et)}:{done:!0,value:I.call(K,R,et)}:{done:!1}}),B=W[0],j=W[1];s(String.prototype,m,B),i(RegExp.prototype,S,b==2?function(L,I){return j.call(L,this,I)}:function(L){return j.call(L,this)})}}},"230e":function(n,a,o){var s=o("d3f4"),i=o("7726").document,l=s(i)&&s(i.createElement);n.exports=function(c){return l?i.createElement(c):{}}},"23c6":function(n,a,o){var s=o("2d95"),i=o("2b4c")("toStringTag"),l=s(function(){return arguments}())=="Arguments",c=function(d,u){try{return d[u]}catch{}};n.exports=function(d){var u,f,v;return d===void 0?"Undefined":d===null?"Null":typeof(f=c(u=Object(d),i))=="string"?f:l?s(u):(v=s(u))=="Object"&&typeof u.callee=="function"?"Arguments":v}},2621:function(n,a){a.f=Object.getOwnPropertySymbols},"2aba":function(n,a,o){var s=o("7726"),i=o("32e9"),l=o("69a8"),c=o("ca5a")("src"),d=o("fa5b"),u="toString",f=(""+d).split(u);o("8378").inspectSource=function(v){return d.call(v)},(n.exports=function(v,h,m,b){var T=typeof m=="function";T&&(l(m,"name")||i(m,"name",h)),v[h]!==m&&(T&&(l(m,c)||i(m,c,v[h]?""+v[h]:f.join(String(h)))),v===s?v[h]=m:b?v[h]?v[h]=m:i(v,h,m):(delete v[h],i(v,h,m)))})(Function.prototype,u,function(){return typeof this=="function"&&this[c]||d.call(this)})},"2aeb":function(n,a,o){var s=o("cb7c"),i=o("1495"),l=o("e11e"),c=o("613b")("IE_PROTO"),d=function(){},u="prototype",f=function(){var v=o("230e")("iframe"),h=l.length,m="<",b=">",T;for(v.style.display="none",o("fab2").appendChild(v),v.src="javascript:",T=v.contentWindow.document,T.open(),T.write(m+"script"+b+"document.F=Object"+m+"/script"+b),T.close(),f=T.F;h--;)delete f[u][l[h]];return f()};n.exports=Object.create||function(h,m){var b;return h!==null?(d[u]=s(h),b=new d,d[u]=null,b[c]=h):b=f(),m===void 0?b:i(b,m)}},"2b4c":function(n,a,o){var s=o("5537")("wks"),i=o("ca5a"),l=o("7726").Symbol,c=typeof l=="function",d=n.exports=function(u){return s[u]||(s[u]=c&&l[u]||(c?l:i)("Symbol."+u))};d.store=s},"2d00":function(n,a){n.exports=!1},"2d95":function(n,a){var o={}.toString;n.exports=function(s){return o.call(s).slice(8,-1)}},"2fdb":function(n,a,o){var s=o("5ca1"),i=o("d2c8"),l="includes";s(s.P+s.F*o("5147")(l),"String",{includes:function(d){return!!~i(this,d,l).indexOf(d,arguments.length>1?arguments[1]:void 0)}})},"32e9":function(n,a,o){var s=o("86cc"),i=o("4630");n.exports=o("9e1e")?function(l,c,d){return s.f(l,c,i(1,d))}:function(l,c,d){return l[c]=d,l}},"38fd":function(n,a,o){var s=o("69a8"),i=o("4bf8"),l=o("613b")("IE_PROTO"),c=Object.prototype;n.exports=Object.getPrototypeOf||function(d){return d=i(d),s(d,l)?d[l]:typeof d.constructor=="function"&&d instanceof d.constructor?d.constructor.prototype:d instanceof Object?c:null}},"41a0":function(n,a,o){var s=o("2aeb"),i=o("4630"),l=o("7f20"),c={};o("32e9")(c,o("2b4c")("iterator"),function(){return this}),n.exports=function(d,u,f){d.prototype=s(c,{next:i(1,f)}),l(d,u+" Iterator")}},"456d":function(n,a,o){var s=o("4bf8"),i=o("0d58");o("5eda")("keys",function(){return function(c){return i(s(c))}})},4588:function(n,a){var o=Math.ceil,s=Math.floor;n.exports=function(i){return isNaN(i=+i)?0:(i>0?s:o)(i)}},4630:function(n,a){n.exports=function(o,s){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:s}}},"4bf8":function(n,a,o){var s=o("be13");n.exports=function(i){return Object(s(i))}},5147:function(n,a,o){var s=o("2b4c")("match");n.exports=function(i){var l=/./;try{"/./"[i](l)}catch{try{return l[s]=!1,!"/./"[i](l)}catch{}}return!0}},"520a":function(n,a,o){var s=o("0bfb"),i=RegExp.prototype.exec,l=String.prototype.replace,c=i,d="lastIndex",u=function(){var h=/a/,m=/b*/g;return i.call(h,"a"),i.call(m,"a"),h[d]!==0||m[d]!==0}(),f=/()??/.exec("")[1]!==void 0,v=u||f;v&&(c=function(m){var b=this,T,S,x,D;return f&&(S=new RegExp("^"+b.source+"$(?!\\s)",s.call(b))),u&&(T=b[d]),x=i.call(b,m),u&&x&&(b[d]=b.global?x.index+x[0].length:T),f&&x&&x.length>1&&l.call(x[0],S,function(){for(D=1;D<arguments.length-2;D++)arguments[D]===void 0&&(x[D]=void 0)}),x}),n.exports=c},"52a7":function(n,a){a.f={}.propertyIsEnumerable},5537:function(n,a,o){var s=o("8378"),i=o("7726"),l="__core-js_shared__",c=i[l]||(i[l]={});(n.exports=function(d,u){return c[d]||(c[d]=u!==void 0?u:{})})("versions",[]).push({version:s.version,mode:o("2d00")?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(n,a,o){var s=o("7726"),i=o("8378"),l=o("32e9"),c=o("2aba"),d=o("9b43"),u="prototype",f=function(v,h,m){var b=v&f.F,T=v&f.G,S=v&f.S,x=v&f.P,D=v&f.B,N=T?s:S?s[h]||(s[h]={}):(s[h]||{})[u],W=T?i:i[h]||(i[h]={}),B=W[u]||(W[u]={}),j,L,I,R;T&&(m=h);for(j in m)L=!b&&N&&N[j]!==void 0,I=(L?N:m)[j],R=D&&L?d(I,s):x&&typeof I=="function"?d(Function.call,I):I,N&&c(N,j,I,v&f.U),W[j]!=I&&l(W,j,R),x&&B[j]!=I&&(B[j]=I)};s.core=i,f.F=1,f.G=2,f.S=4,f.P=8,f.B=16,f.W=32,f.U=64,f.R=128,n.exports=f},"5eda":function(n,a,o){var s=o("5ca1"),i=o("8378"),l=o("79e5");n.exports=function(c,d){var u=(i.Object||{})[c]||Object[c],f={};f[c]=d(u),s(s.S+s.F*l(function(){u(1)}),"Object",f)}},"5f1b":function(n,a,o){var s=o("23c6"),i=RegExp.prototype.exec;n.exports=function(l,c){var d=l.exec;if(typeof d=="function"){var u=d.call(l,c);if(typeof u!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return u}if(s(l)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(l,c)}},"613b":function(n,a,o){var s=o("5537")("keys"),i=o("ca5a");n.exports=function(l){return s[l]||(s[l]=i(l))}},"626a":function(n,a,o){var s=o("2d95");n.exports=Object("z").propertyIsEnumerable(0)?Object:function(i){return s(i)=="String"?i.split(""):Object(i)}},6762:function(n,a,o){var s=o("5ca1"),i=o("c366")(!0);s(s.P,"Array",{includes:function(c){return i(this,c,arguments.length>1?arguments[1]:void 0)}}),o("9c6c")("includes")},6821:function(n,a,o){var s=o("626a"),i=o("be13");n.exports=function(l){return s(i(l))}},"69a8":function(n,a){var o={}.hasOwnProperty;n.exports=function(s,i){return o.call(s,i)}},"6a99":function(n,a,o){var s=o("d3f4");n.exports=function(i,l){if(!s(i))return i;var c,d;if(l&&typeof(c=i.toString)=="function"&&!s(d=c.call(i))||typeof(c=i.valueOf)=="function"&&!s(d=c.call(i))||!l&&typeof(c=i.toString)=="function"&&!s(d=c.call(i)))return d;throw TypeError("Can't convert object to primitive value")}},7333:function(n,a,o){var s=o("0d58"),i=o("2621"),l=o("52a7"),c=o("4bf8"),d=o("626a"),u=Object.assign;n.exports=!u||o("79e5")(function(){var f={},v={},h=Symbol(),m="abcdefghijklmnopqrst";return f[h]=7,m.split("").forEach(function(b){v[b]=b}),u({},f)[h]!=7||Object.keys(u({},v)).join("")!=m})?function(v,h){for(var m=c(v),b=arguments.length,T=1,S=i.f,x=l.f;b>T;)for(var D=d(arguments[T++]),N=S?s(D).concat(S(D)):s(D),W=N.length,B=0,j;W>B;)x.call(D,j=N[B++])&&(m[j]=D[j]);return m}:u},7726:function(n,a){var o=n.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=o)},"77f1":function(n,a,o){var s=o("4588"),i=Math.max,l=Math.min;n.exports=function(c,d){return c=s(c),c<0?i(c+d,0):l(c,d)}},"79e5":function(n,a){n.exports=function(o){try{return!!o()}catch{return!0}}},"7f20":function(n,a,o){var s=o("86cc").f,i=o("69a8"),l=o("2b4c")("toStringTag");n.exports=function(c,d,u){c&&!i(c=u?c:c.prototype,l)&&s(c,l,{configurable:!0,value:d})}},8378:function(n,a){var o=n.exports={version:"2.6.5"};typeof __e=="number"&&(__e=o)},"84f2":function(n,a){n.exports={}},"86cc":function(n,a,o){var s=o("cb7c"),i=o("c69a"),l=o("6a99"),c=Object.defineProperty;a.f=o("9e1e")?Object.defineProperty:function(u,f,v){if(s(u),f=l(f,!0),s(v),i)try{return c(u,f,v)}catch{}if("get"in v||"set"in v)throw TypeError("Accessors not supported!");return"value"in v&&(u[f]=v.value),u}},"9b43":function(n,a,o){var s=o("d8e8");n.exports=function(i,l,c){if(s(i),l===void 0)return i;switch(c){case 1:return function(d){return i.call(l,d)};case 2:return function(d,u){return i.call(l,d,u)};case 3:return function(d,u,f){return i.call(l,d,u,f)}}return function(){return i.apply(l,arguments)}}},"9c6c":function(n,a,o){var s=o("2b4c")("unscopables"),i=Array.prototype;i[s]==null&&o("32e9")(i,s,{}),n.exports=function(l){i[s][l]=!0}},"9def":function(n,a,o){var s=o("4588"),i=Math.min;n.exports=function(l){return l>0?i(s(l),9007199254740991):0}},"9e1e":function(n,a,o){n.exports=!o("79e5")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},a352:function(n,a){n.exports=e},a481:function(n,a,o){var s=o("cb7c"),i=o("4bf8"),l=o("9def"),c=o("4588"),d=o("0390"),u=o("5f1b"),f=Math.max,v=Math.min,h=Math.floor,m=/\$([$&`']|\d\d?|<[^>]*>)/g,b=/\$([$&`']|\d\d?)/g,T=function(S){return S===void 0?S:String(S)};o("214f")("replace",2,function(S,x,D,N){return[function(j,L){var I=S(this),R=j==null?void 0:j[x];return R!==void 0?R.call(j,I,L):D.call(String(I),j,L)},function(B,j){var L=N(D,B,this,j);if(L.done)return L.value;var I=s(B),R=String(this),K=typeof j=="function";K||(j=String(j));var et=I.global;if(et){var q=I.unicode;I.lastIndex=0}for(var G=[];;){var U=u(I,R);if(U===null||(G.push(U),!et))break;var X=String(U[0]);X===""&&(I.lastIndex=d(R,l(I.lastIndex),q))}for(var ut="",st=0,ot=0;ot<G.length;ot++){U=G[ot];for(var y=String(U[0]),p=f(v(c(U.index),R.length),0),g=[],C=1;C<U.length;C++)g.push(T(U[C]));var O=U.groups;if(K){var P=[y].concat(g,p,R);O!==void 0&&P.push(O);var z=String(j.apply(void 0,P))}else z=W(y,R,p,g,O,j);p>=st&&(ut+=R.slice(st,p)+z,st=p+y.length)}return ut+R.slice(st)}];function W(B,j,L,I,R,K){var et=L+B.length,q=I.length,G=b;return R!==void 0&&(R=i(R),G=m),D.call(K,G,function(U,X){var ut;switch(X.charAt(0)){case"$":return"$";case"&":return B;case"`":return j.slice(0,L);case"'":return j.slice(et);case"<":ut=R[X.slice(1,-1)];break;default:var st=+X;if(st===0)return U;if(st>q){var ot=h(st/10);return ot===0?U:ot<=q?I[ot-1]===void 0?X.charAt(1):I[ot-1]+X.charAt(1):U}ut=I[st-1]}return ut===void 0?"":ut})}})},aae3:function(n,a,o){var s=o("d3f4"),i=o("2d95"),l=o("2b4c")("match");n.exports=function(c){var d;return s(c)&&((d=c[l])!==void 0?!!d:i(c)=="RegExp")}},ac6a:function(n,a,o){for(var s=o("cadf"),i=o("0d58"),l=o("2aba"),c=o("7726"),d=o("32e9"),u=o("84f2"),f=o("2b4c"),v=f("iterator"),h=f("toStringTag"),m=u.Array,b={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},T=i(b),S=0;S<T.length;S++){var x=T[S],D=b[x],N=c[x],W=N&&N.prototype,B;if(W&&(W[v]||d(W,v,m),W[h]||d(W,h,x),u[x]=m,D))for(B in s)W[B]||l(W,B,s[B],!0)}},b0c5:function(n,a,o){var s=o("520a");o("5ca1")({target:"RegExp",proto:!0,forced:s!==/./.exec},{exec:s})},be13:function(n,a){n.exports=function(o){if(o==null)throw TypeError("Can't call method on  "+o);return o}},c366:function(n,a,o){var s=o("6821"),i=o("9def"),l=o("77f1");n.exports=function(c){return function(d,u,f){var v=s(d),h=i(v.length),m=l(f,h),b;if(c&&u!=u){for(;h>m;)if(b=v[m++],b!=b)return!0}else for(;h>m;m++)if((c||m in v)&&v[m]===u)return c||m||0;return!c&&-1}}},c649:function(n,a,o){(function(s){o.d(a,"c",function(){return v}),o.d(a,"a",function(){return u}),o.d(a,"b",function(){return l}),o.d(a,"d",function(){return f}),o("a481");function i(){return typeof window!="undefined"?window.console:s.console}var l=i();function c(h){var m=Object.create(null);return function(T){var S=m[T];return S||(m[T]=h(T))}}var d=/-(\w)/g,u=c(function(h){return h.replace(d,function(m,b){return b?b.toUpperCase():""})});function f(h){h.parentElement!==null&&h.parentElement.removeChild(h)}function v(h,m,b){var T=b===0?h.children[0]:h.children[b-1].nextSibling;h.insertBefore(m,T)}}).call(this,o("c8ba"))},c69a:function(n,a,o){n.exports=!o("9e1e")&&!o("79e5")(function(){return Object.defineProperty(o("230e")("div"),"a",{get:function(){return 7}}).a!=7})},c8ba:function(n,a){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}n.exports=o},ca5a:function(n,a){var o=0,s=Math.random();n.exports=function(i){return"Symbol(".concat(i===void 0?"":i,")_",(++o+s).toString(36))}},cadf:function(n,a,o){var s=o("9c6c"),i=o("d53b"),l=o("84f2"),c=o("6821");n.exports=o("01f9")(Array,"Array",function(d,u){this._t=c(d),this._i=0,this._k=u},function(){var d=this._t,u=this._k,f=this._i++;return!d||f>=d.length?(this._t=void 0,i(1)):u=="keys"?i(0,f):u=="values"?i(0,d[f]):i(0,[f,d[f]])},"values"),l.Arguments=l.Array,s("keys"),s("values"),s("entries")},cb7c:function(n,a,o){var s=o("d3f4");n.exports=function(i){if(!s(i))throw TypeError(i+" is not an object!");return i}},ce10:function(n,a,o){var s=o("69a8"),i=o("6821"),l=o("c366")(!1),c=o("613b")("IE_PROTO");n.exports=function(d,u){var f=i(d),v=0,h=[],m;for(m in f)m!=c&&s(f,m)&&h.push(m);for(;u.length>v;)s(f,m=u[v++])&&(~l(h,m)||h.push(m));return h}},d2c8:function(n,a,o){var s=o("aae3"),i=o("be13");n.exports=function(l,c,d){if(s(c))throw TypeError("String#"+d+" doesn't accept regex!");return String(i(l))}},d3f4:function(n,a){n.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},d53b:function(n,a){n.exports=function(o,s){return{value:s,done:!!o}}},d8e8:function(n,a){n.exports=function(o){if(typeof o!="function")throw TypeError(o+" is not a function!");return o}},e11e:function(n,a){n.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},f559:function(n,a,o){var s=o("5ca1"),i=o("9def"),l=o("d2c8"),c="startsWith",d=""[c];s(s.P+s.F*o("5147")(c),"String",{startsWith:function(f){var v=l(this,f,c),h=i(Math.min(arguments.length>1?arguments[1]:void 0,v.length)),m=String(f);return d?d.call(v,m,h):v.slice(h,h+m.length)===m}})},f6fd:function(n,a){(function(o){var s="currentScript",i=o.getElementsByTagName("script");s in o||Object.defineProperty(o,s,{get:function(){try{throw new Error}catch(d){var l,c=(/.*at [^\(]*\((.*):.+:.+\)$/ig.exec(d.stack)||[!1])[1];for(l in i)if(i[l].src==c||i[l].readyState=="interactive")return i[l];return null}}})})(document)},f751:function(n,a,o){var s=o("5ca1");s(s.S+s.F,"Object",{assign:o("7333")})},fa5b:function(n,a,o){n.exports=o("5537")("native-function-to-string",Function.toString)},fab2:function(n,a,o){var s=o("7726").document;n.exports=s&&s.documentElement},fb15:function(n,a,o){if(o.r(a),typeof window!="undefined"){o("f6fd");var s;(s=window.document.currentScript)&&(s=s.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(o.p=s[1])}o("f751"),o("f559"),o("ac6a"),o("cadf"),o("456d");function i(y){if(Array.isArray(y))return y}function l(y,p){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(y)))){var g=[],C=!0,O=!1,P=void 0;try{for(var z=y[Symbol.iterator](),tt;!(C=(tt=z.next()).done)&&(g.push(tt.value),!(p&&g.length===p));C=!0);}catch($t){O=!0,P=$t}finally{try{!C&&z.return!=null&&z.return()}finally{if(O)throw P}}return g}}function c(y,p){(p==null||p>y.length)&&(p=y.length);for(var g=0,C=new Array(p);g<p;g++)C[g]=y[g];return C}function d(y,p){if(!!y){if(typeof y=="string")return c(y,p);var g=Object.prototype.toString.call(y).slice(8,-1);if(g==="Object"&&y.constructor&&(g=y.constructor.name),g==="Map"||g==="Set")return Array.from(y);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return c(y,p)}}function u(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(y,p){return i(y)||l(y,p)||d(y,p)||u()}o("6762"),o("2fdb");function v(y){if(Array.isArray(y))return c(y)}function h(y){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(y))return Array.from(y)}function m(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(y){return v(y)||h(y)||d(y)||m()}var T=o("a352"),S=o.n(T),x=o("c649");function D(y,p,g){return g===void 0||(y=y||{},y[p]=g),y}function N(y,p){return y.map(function(g){return g.elm}).indexOf(p)}function W(y,p,g,C){if(!y)return[];var O=y.map(function(tt){return tt.elm}),P=p.length-C,z=b(p).map(function(tt,$t){return $t>=P?O.length:O.indexOf(tt)});return g?z.filter(function(tt){return tt!==-1}):z}function B(y,p){var g=this;this.$nextTick(function(){return g.$emit(y.toLowerCase(),p)})}function j(y){var p=this;return function(g){p.realList!==null&&p["onDrag"+y](g),B.call(p,y,g)}}function L(y){return["transition-group","TransitionGroup"].includes(y)}function I(y){if(!y||y.length!==1)return!1;var p=f(y,1),g=p[0].componentOptions;return g?L(g.tag):!1}function R(y,p,g){return y[g]||(p[g]?p[g]():void 0)}function K(y,p,g){var C=0,O=0,P=R(p,g,"header");P&&(C=P.length,y=y?[].concat(b(P),b(y)):b(P));var z=R(p,g,"footer");return z&&(O=z.length,y=y?[].concat(b(y),b(z)):b(z)),{children:y,headerOffset:C,footerOffset:O}}function et(y,p){var g=null,C=function(Qt,Dn){g=D(g,Qt,Dn)},O=Object.keys(y).filter(function($t){return $t==="id"||$t.startsWith("data-")}).reduce(function($t,Qt){return $t[Qt]=y[Qt],$t},{});if(C("attrs",O),!p)return g;var P=p.on,z=p.props,tt=p.attrs;return C("on",P),C("props",z),Object.assign(g.attrs,tt),g}var q=["Start","Add","Remove","Update","End"],G=["Choose","Unchoose","Sort","Filter","Clone"],U=["Move"].concat(q,G).map(function(y){return"on"+y}),X=null,ut={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(p){return p}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},st={name:"draggable",inheritAttrs:!1,props:ut,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1}},render:function(p){var g=this.$slots.default;this.transitionMode=I(g);var C=K(g,this.$slots,this.$scopedSlots),O=C.children,P=C.headerOffset,z=C.footerOffset;this.headerOffset=P,this.footerOffset=z;var tt=et(this.$attrs,this.componentData);return p(this.getTag(),tt,O)},created:function(){this.list!==null&&this.value!==null&&x.b.error("Value and list props are mutually exclusive! Please set one or another."),this.element!=="div"&&x.b.warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),this.options!==void 0&&x.b.warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var p=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var g={};q.forEach(function(P){g["on"+P]=j.call(p,P)}),G.forEach(function(P){g["on"+P]=B.bind(p,P)});var C=Object.keys(this.$attrs).reduce(function(P,z){return P[Object(x.a)(z)]=p.$attrs[z],P},{}),O=Object.assign({},this.options,C,g,{onMove:function(z,tt){return p.onDragMove(z,tt)}});!("draggable"in O)&&(O.draggable=">*"),this._sortable=new S.a(this.rootContainer,O),this.computeIndexes()},beforeDestroy:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(p){this.updateOptions(p)},deep:!0},$attrs:{handler:function(p){this.updateOptions(p)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getIsFunctional:function(){var p=this._vnode.fnOptions;return p&&p.functional},getTag:function(){return this.tag||this.element},updateOptions:function(p){for(var g in p){var C=Object(x.a)(g);U.indexOf(C)===-1&&this._sortable.option(C,p[g])}},getChildrenNodes:function(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var p=this.$slots.default;return this.transitionMode?p[0].child.$slots.default:p},computeIndexes:function(){var p=this;this.$nextTick(function(){p.visibleIndexes=W(p.getChildrenNodes(),p.rootContainer.children,p.transitionMode,p.footerOffset)})},getUnderlyingVm:function(p){var g=N(this.getChildrenNodes()||[],p);if(g===-1)return null;var C=this.realList[g];return{index:g,element:C}},getUnderlyingPotencialDraggableComponent:function(p){var g=p.__vue__;return!g||!g.$options||!L(g.$options._componentTag)?!("realList"in g)&&g.$children.length===1&&"realList"in g.$children[0]?g.$children[0]:g:g.$parent},emitChanges:function(p){var g=this;this.$nextTick(function(){g.$emit("change",p)})},alterList:function(p){if(this.list){p(this.list);return}var g=b(this.value);p(g),this.$emit("input",g)},spliceList:function(){var p=arguments,g=function(O){return O.splice.apply(O,b(p))};this.alterList(g)},updatePosition:function(p,g){var C=function(P){return P.splice(g,0,P.splice(p,1)[0])};this.alterList(C)},getRelatedContextFromMoveEvent:function(p){var g=p.to,C=p.related,O=this.getUnderlyingPotencialDraggableComponent(g);if(!O)return{component:O};var P=O.realList,z={list:P,component:O};if(g!==C&&P&&O.getUnderlyingVm){var tt=O.getUnderlyingVm(C);if(tt)return Object.assign(tt,z)}return z},getVmIndex:function(p){var g=this.visibleIndexes,C=g.length;return p>C-1?C:g[p]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(p){if(!(!this.noTransitionOnDrag||!this.transitionMode)){var g=this.getChildrenNodes();g[p].data=null;var C=this.getComponent();C.children=[],C.kept=void 0}},onDragStart:function(p){this.context=this.getUnderlyingVm(p.item),p.item._underlying_vm_=this.clone(this.context.element),X=p.item},onDragAdd:function(p){var g=p.item._underlying_vm_;if(g!==void 0){Object(x.d)(p.item);var C=this.getVmIndex(p.newIndex);this.spliceList(C,0,g),this.computeIndexes();var O={element:g,newIndex:C};this.emitChanges({added:O})}},onDragRemove:function(p){if(Object(x.c)(this.rootContainer,p.item,p.oldIndex),p.pullMode==="clone"){Object(x.d)(p.clone);return}var g=this.context.index;this.spliceList(g,1);var C={element:this.context.element,oldIndex:g};this.resetTransitionData(g),this.emitChanges({removed:C})},onDragUpdate:function(p){Object(x.d)(p.item),Object(x.c)(p.from,p.item,p.oldIndex);var g=this.context.index,C=this.getVmIndex(p.newIndex);this.updatePosition(g,C);var O={element:this.context.element,oldIndex:g,newIndex:C};this.emitChanges({moved:O})},updateProperty:function(p,g){p.hasOwnProperty(g)&&(p[g]+=this.headerOffset)},computeFutureIndex:function(p,g){if(!p.element)return 0;var C=b(g.to.children).filter(function(tt){return tt.style.display!=="none"}),O=C.indexOf(g.related),P=p.component.getVmIndex(O),z=C.indexOf(X)!==-1;return z||!g.willInsertAfter?P:P+1},onDragMove:function(p,g){var C=this.move;if(!C||!this.realList)return!0;var O=this.getRelatedContextFromMoveEvent(p),P=this.context,z=this.computeFutureIndex(O,p);Object.assign(P,{futureIndex:z});var tt=Object.assign({},p,{relatedContext:O,draggedContext:P});return C(tt,g)},onDragEnd:function(){this.computeIndexes(),X=null}}};typeof window!="undefined"&&"Vue"in window&&window.Vue.component("draggable",st);var ot=st;a.default=ot}}).default})})(dn);var _n=Sn(dn.exports),hr=function(){var t=this,r=t.$createElement,e=t._self._c||r;return t.rowMode?e("Row",{staticClass:"task-add-row"},[e("Col",{class:["row-add",t.active?"active":""],attrs:{span:"12"}},[e("div",{staticClass:"add-input",on:{mouseenter:function(n){t.mouseEnter=!0},mouseleave:function(n){t.mouseEnter=!1}}},[e("Input",{ref:"input",attrs:{type:"textarea",rows:1,autosize:{minRows:1,maxRows:3},maxlength:255,placeholder:t.$L(t.typeName+"\u63CF\u8FF0\uFF0C\u56DE\u8F66\u521B\u5EFA"),enterkeyhint:"done"},on:{"on-focus":function(n){t.onFocus=!0},"on-blur":function(n){t.onFocus=!1},"on-keydown":t.onKeydown},model:{value:t.addData.name,callback:function(n){t.$set(t.addData,"name",n)},expression:"addData.name"}}),t.parentId==0?e("div",{staticClass:"priority"},[e("ul",t._l(t.taskPriority,function(n,a){return e("li",{key:a},[t.active?e("ETooltip",{attrs:{disabled:t.$isEEUiApp||t.windowTouch,content:t.taskPriorityContent(n)}},[e("i",{staticClass:"taskfont",style:{color:n.color},domProps:{innerHTML:t._s(t.addData.p_name==n.name?"&#xe61d;":"&#xe61c;")},on:{click:function(o){return t.choosePriority(n)}}})]):t._e()],1)}),0),e("Icon",{attrs:{type:"md-settings"},on:{click:t.onPriority}})],1):t._e()],1),e("div",{staticClass:"add-btn",on:{click:t.openAdd}},[e("Icon",{staticClass:"add-icon",attrs:{type:"md-add"}}),t._v(t._s(t.$L("\u6DFB\u52A0"+t.typeName))+" ")],1)]),e("Col",{attrs:{span:"3"}}),e("Col",{attrs:{span:"3"}}),e("Col",{attrs:{span:"3"}}),e("Col",{attrs:{span:"3"}})],1):e("div",{class:["task-add-simple",t.active?"active":""],on:{mouseenter:function(n){t.mouseEnter=!0},mouseleave:function(n){t.mouseEnter=!1}}},[e("Input",{ref:"input",attrs:{type:"textarea",rows:2,autosize:{minRows:2,maxRows:3},maxlength:255,placeholder:t.$L(t.typeName+"\u63CF\u8FF0\uFF0C\u56DE\u8F66\u521B\u5EFA"),enterkeyhint:"done"},on:{"on-focus":function(n){t.onFocus=!0},"on-blur":function(n){t.onFocus=!1},"on-keydown":t.onKeydown},model:{value:t.addData.name,callback:function(n){t.$set(t.addData,"name",n)},expression:"addData.name"}}),e("div",{staticClass:"add-placeholder",on:{click:t.openAdd}},[e("Icon",{attrs:{type:"md-add"}}),t._v(t._s(t.$L("\u6DFB\u52A0"+t.typeName))+" ")],1),e("div",{staticClass:"priority"},[e("ul",t._l(t.taskPriority,function(n,a){return e("li",{key:a},[t.active?e("ETooltip",{attrs:{disabled:t.$isEEUiApp||t.windowTouch,content:t.taskPriorityContent(n)}},[e("i",{staticClass:"taskfont",style:{color:n.color},domProps:{innerHTML:t._s(t.addData.p_name==n.name?"&#xe61d;":"&#xe61c;")},on:{click:function(o){return t.choosePriority(n)}}})]):t._e()],1)}),0),e("Icon",{attrs:{type:"md-settings"},on:{click:t.onPriority}})],1)],1)},pr=[];const mr={name:"TaskAddSimple",props:{parentId:{type:Number,default:0},projectId:{type:Number,default:0},columnId:{type:Number,default:0},addTop:{type:Boolean,default:!1},autoActive:{type:Boolean,default:!1},rowMode:{type:Boolean,default:!1}},data(){return{addData:{name:"",owner:0,column_id:0,times:[],subtasks:[],p_level:0,p_name:"",p_color:"",visibility_appoint:1,visibility_appointor:[]},active:!1,onFocus:!1,mouseEnter:!1}},mounted(){this.autoActive&&this.$nextTick(this.openAdd)},computed:{...It(["taskPriority"]),typeName(){return this.parentId>0?"\u5B50\u4EFB\u52A1":"\u4EFB\u52A1"}},watch:{active(t){t||this.$emit("on-close")},mouseEnter(){this.chackClose()},onFocus(){this.chackClose()}},methods:{getData(){return this.parentId>0?{task_id:this.parentId,name:this.addData.name}:(this.addData.project_id=this.projectId||this.$store.state.projectId,this.addData.column_id=this.columnId||"",this.addData.owner=[this.userId],this.addData.top=this.addTop?1:0,$A.cloneJSON(this.addData))},openAdd(){this.active=!0,this.defaultPriority(),this.$nextTick(()=>{this.$refs.input.focus()})},chackClose(){this.mouseEnter||this.onFocus||this.addData.name||(this.active=!1)},onPriority(){this.$emit("on-priority",this.getData()),this.active=!1},onKeydown(t){if(t.keyCode===13){if(t.shiftKey)return;t.preventDefault(),this.onAdd()}},onAdd(){if(!this.addData.name){$A.messageWarning("\u8BF7\u8F93\u5165\u4EFB\u52A1\u63CF\u8FF0");return}this.loadIng++;let t=this.parentId>0?"taskAddSub":"taskAdd";this.$store.dispatch(t,this.getData()).then(({msg:r})=>{$A.messageSuccess(r),this.loadIng--,this.active=!1,this.addData={name:"",owner:0,column_id:0,times:[],subtasks:[],p_level:0,p_name:"",p_color:"",visibility_appoint:1,visibility_appointor:[]}}).catch(({msg:r})=>{$A.modalError(r),this.loadIng--})},taskPriorityContent(t){let r=$A.runNum(t.days);return r<=0?t.name+" ("+this.$L("\u65E0\u65F6\u95F4\u9650\u5236")+")":t.name+" ("+r+this.$L("\u5929")+")"},choosePriority(t){if($A.runNum(t.days)>0){let r=new Date,e=new Date(new Date().setDate(r.getDate()+$A.runNum(t.days)));this.$set(this.addData,"times",$A.date2string([r,e]))}else this.$set(this.addData,"times",[]);this.$set(this.addData,"p_level",t.priority),this.$set(this.addData,"p_name",t.name),this.$set(this.addData,"p_color",t.color),this.$nextTick(()=>{this.$refs.input.focus()})},defaultPriority(){this.taskPriority.length!==0&&(this.addData.p_name||this.choosePriority(this.taskPriority[0]))}}},Ve={};var vr=gt(mr,hr,pr,!1,gr,null,null,null);function gr(t){for(let r in Ve)this[r]=Ve[r]}var Cn=function(){return vr.exports}(),yr=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"task-rows"},[t._l(t.list,function(n,a){return e("div",{key:a},[e("Row",{staticClass:"task-row",style:n.color?{backgroundColor:n.color,borderBottomColor:n.color}:{}},[n.p_name?e("em",{staticClass:"priority-color",style:{backgroundColor:n.p_color}}):t._e(),e("Col",{class:["row-name",n.complete_at?"complete":""],attrs:{span:"12"}},[n.sub_num>0&&n.sub_top!==!0||n.parent_id===0&&t.fastAddTask?e("Icon",{class:["sub-icon",t.taskOpen[n.id]?"active":""],attrs:{type:"ios-arrow-forward"},on:{click:function(o){return t.getSublist(n)}}}):t._e(),e("TaskMenu",{ref:`taskMenu_${n.id}`,refInFor:!0,attrs:{task:n}}),e("div",{staticClass:"item-title",on:{click:function(o){return t.openTask(n)}}},[n.flow_item_name?e("span",{class:n.flow_item_status,on:{click:function(o){return o.stopPropagation(),t.openMenu(o,n)}}},[t._v(t._s(n.flow_item_name))]):t._e(),n.sub_top===!0?e("span",[t._v(t._s(t.$L("\u5B50\u4EFB\u52A1")))]):t._e(),n.sub_my&&n.sub_my.length>0?e("span",[t._v("+"+t._s(n.sub_my.length))]):t._e(),t._v(" "+t._s(n.name)+" ")]),e("div",{staticClass:"item-icons",on:{click:function(o){return t.openTask(n)}}},[n.desc?e("div",{staticClass:"item-icon"},[e("i",{staticClass:"taskfont"},[t._v("\uE71A")])]):t._e(),n.file_num>0?e("div",{staticClass:"item-icon"},[e("i",{staticClass:"taskfont"},[t._v("\uE71C")]),e("em",[t._v(t._s(n.file_num))])]):t._e(),n.msg_num>0?e("div",{staticClass:"item-icon"},[e("i",{staticClass:"taskfont"},[t._v("\uE71E")]),e("em",[t._v(t._s(n.msg_num))])]):t._e(),n.sub_num>0?e("div",{staticClass:"item-icon",on:{click:function(o){return o.stopPropagation(),t.getSublist(n)}}},[e("i",{staticClass:"taskfont"},[t._v("\uE71F")]),e("em",[t._v(t._s(n.sub_complete)+"/"+t._s(n.sub_num))])]):t._e()])],1),e("Col",{staticClass:"row-column",attrs:{span:"3"}},[e("EDropdown",{attrs:{trigger:"click",size:"small",placement:"bottom",disabled:n.sub_top===!0},on:{command:function(o){return t.dropTask(n,o)}}},[e("div",{staticClass:"task-column"},[t._v(t._s(t.columnName(n.column_id)))]),e("EDropdownMenu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.columnList(n.project_id),function(o){return e("EDropdownItem",{key:o.id,attrs:{command:"column::"+o.id}},[t._v(" "+t._s(o.name)+" ")])}),1)],1)],1),e("Col",{staticClass:"row-priority",attrs:{span:"3"}},[e("EDropdown",{attrs:{trigger:"click",size:"small",placement:"bottom",disabled:n.sub_top===!0},on:{command:function(o){return t.dropTask(n,o)}}},[e("TaskPriority",{attrs:{backgroundColor:n.p_color}},[t._v(t._s(n.p_name))]),e("EDropdownMenu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.taskPriority,function(o,s){return e("EDropdownItem",{key:s,attrs:{command:"priority::"+s}},[e("i",{staticClass:"taskfont",style:{color:o.color},domProps:{innerHTML:t._s(o.p_name==o.name?"&#xe61d;":"&#xe61c;")}}),t._v(" "+t._s(o.name)+" ")])}),1)],1)],1),e("Col",{staticClass:"row-user",attrs:{span:"3"}},[e("ul",{on:{click:function(o){return t.openTask(n)}}},[t._l(t.ownerUser(n.task_user),function(o,s){return s<3?e("li",{key:s},[e("UserAvatar",{attrs:{userid:o.userid,size:"32",borderWitdh:2,borderColor:n.color,showName:t.ownerUser(n.task_user).length===1}})],1):t._e()}),t.ownerUser(n.task_user).length===0?e("li",{staticClass:"no-owner"},[e("Button",{attrs:{type:"primary",size:"small"},on:{click:function(o){return o.stopPropagation(),t.openTask(n,!0)}}},[t._v(t._s(t.$L("\u9886\u53D6\u4EFB\u52A1")))])],1):t._e()],2)]),e("Col",{staticClass:"row-time",attrs:{span:"3"}},[!n.complete_at&&n.end_at?e("ETooltip",{class:["task-time",n.today?"today":"",n.overdue?"overdue":""],attrs:{disabled:t.$isEEUiApp||t.windowTouch,"open-delay":600,content:n.end_at}},[e("div",{on:{click:function(o){return t.openTask(n)}}},[t._v(t._s(t.expiresFormat(n.end_at)))])]):t.showCompleteAt&&n.complete_at?e("div",{attrs:{title:n.complete_at}},[t._v(t._s(t.completeAtFormat(n.complete_at)))]):t._e()],1)],1),t.taskOpen[n.id]===!0?e("TaskRow",{attrs:{list:t.subTask(n.id),"parent-id":n.id,"fast-add-task":n.parent_id===0&&t.fastAddTask,"open-key":t.openKey},on:{command:t.dropTask}}):t._e()],1)}),t.fastAddTask||t.parentId>0?e("TaskAddSimple",{attrs:{"parent-id":t.parentId,"row-mode":""},on:{"on-priority":t.onPriority}}):t._e()],2)},br=[];const wr={name:"TaskRow",components:{TaskMenu:ln,TaskAddSimple:Cn,TaskPriority:sn},props:{list:{type:Array,default:()=>[]},parentId:{type:Number,default:0},fastAddTask:{type:Boolean,default:!1},openKey:{type:String,default:"default"},showCompleteAt:{type:Boolean,default:!1}},data(){return{nowTime:$A.Time(),nowInterval:null,taskLoad:{},taskOpen:{}}},mounted(){this.nowInterval=setInterval(()=>{this.nowTime=$A.Time()},1e3)},destroyed(){clearInterval(this.nowInterval)},computed:{...It(["cacheTasks","taskPriority","cacheColumns"]),subTask(){return function(t){return this.cacheTasks.filter(r=>r.archived_at?!1:r.parent_id==t).sort((r,e)=>r.id-e.id)}}},methods:{columnName(t){const r=this.cacheColumns.find(({id:e})=>e==t);return r?r.name:""},dropTask(t,r){const e=this.$refs[`taskMenu_${t.id}`];if(!!e){if($A.leftExists(r,"column::")){e[0].updateTask({column_id:$A.leftDelete(r,"column::")});return}if($A.leftExists(r,"priority::")){let n=this.taskPriority[parseInt($A.leftDelete(r,"priority::"))];n&&e[0].updateTask({p_level:n.priority,p_name:n.name,p_color:n.color})}}},onPriority(t){this.$emit("on-priority",t)},getSublist(t){if(t.sub_top===!0){this.openTask(t);return}if(this.taskOpen[t.id]===!0){this.$set(this.taskOpen,t.id,!1);return}this.taskLoad[t.id]!==!0&&(this.$set(this.taskLoad,t.id,!0),this.$store.dispatch("getTaskForParent",t.id).then(()=>{this.$set(this.taskLoad,t.id,!1),this.$set(this.taskOpen,t.id,!0)}).catch(({msg:r})=>{$A.modalError(r),this.$set(this.taskLoad,t.id,!1)}))},columnList(t){return this.cacheColumns.filter(({project_id:r})=>r==t)},openTask(t,r){this.$store.dispatch("openTask",t),r===!0&&setTimeout(()=>{Se.Store.set("receiveTask",!0)},300)},openMenu(t,r){const e=this.$refs[`taskMenu_${r.id}`];e&&e[0].handleClick(t)},ownerUser(t){return t.filter(({owner:r})=>r==1).sort((r,e)=>r.id-e.id)},expiresFormat(t){return $A.countDownFormat(t,this.nowTime)},completeAtFormat(t){let r=$A.Date(t,!0);return $A.formatDate("Y")===$A.formatDate("Y",r)?$A.formatDate("m-d H:i",r):$A.formatDate("Y-m-d",r)}}},Ke={};var $r=gt(wr,yr,br,!1,_r,null,null,null);function _r(t){for(let r in Ke)this[r]=Ke[r]}var Cr=function(){return $r.exports}(),Dr=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"task-archived"},[e("div",{staticClass:"archived-title"},[t._v(" "+t._s(t.$L("\u5F52\u6863\u7684\u4EFB\u52A1"))+" "),e("div",{staticClass:"title-icon"},[t.loadIng>0?e("Loading"):t._e()],1)]),e("div",{staticClass:"search-container lr"},[e("ul",[e("li",[e("div",{staticClass:"search-label"},[t._v(" "+t._s(t.$L("\u5173\u952E\u8BCD"))+" ")]),e("div",{staticClass:"search-content"},[e("Input",{attrs:{placeholder:t.$L("ID\u3001\u4EFB\u52A1\u540D..."),clearable:""},model:{value:t.keys.name,callback:function(n){t.$set(t.keys,"name",n)},expression:"keys.name"}})],1)]),e("li",{staticClass:"search-button"},[e("Tooltip",{attrs:{theme:"light",placement:"right","transfer-class-name":"search-button-clear",transfer:""}},[e("Button",{attrs:{loading:t.loadIng>0,type:"primary",icon:"ios-search"},on:{click:t.onSearch}},[t._v(t._s(t.$L("\u641C\u7D22")))]),e("div",{attrs:{slot:"content"},slot:"content"},[t.keyIs?e("Button",{attrs:{type:"text"},on:{click:function(n){t.keyIs=!1}}},[t._v(t._s(t.$L("\u53D6\u6D88\u7B5B\u9009")))]):e("Button",{attrs:{loading:t.loadIng>0,type:"text"},on:{click:t.getLists}},[t._v(t._s(t.$L("\u5237\u65B0")))])],1)],1)],1)])]),e("div",{staticClass:"table-page-box"},[e("Table",{attrs:{columns:t.columns,data:t.list,loading:t.loadIng>0,"no-data-text":t.$L(t.noText),stripe:""}}),e("Page",{attrs:{total:t.total,current:t.page,"page-size":t.pageSize,disabled:t.loadIng>0,simple:t.windowPortrait,"page-size-opts":[10,20,30,50,100],"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.setPage,"on-page-size-change":t.setPageSize}})],1)])},xr=[];const Tr={name:"TaskArchived",props:{projectId:{type:Number,default:0}},data(){return{loadIng:0,keys:{},keyIs:!1,columns:[{title:"ID",key:"id",width:80,render:(t,{row:r,column:e})=>t("TableAction",{props:{column:e,align:"left"}},[t("div",r.id)])},{title:this.$L("\u4EFB\u52A1\u540D\u79F0"),key:"name",minWidth:200,render:(t,{row:r})=>t("AutoTip",{on:{"on-click":()=>{this.$store.dispatch("openTask",r)}}},r.name)},{title:this.$L("\u5B8C\u6210\u65F6\u95F4"),key:"complete_at",width:168,render:(t,{row:r})=>t("div",{style:{color:r.complete_at?"":"#f00"}},r.complete_at||this.$L("\u672A\u5B8C\u6210"))},{title:this.$L("\u5F52\u6863\u65F6\u95F4"),key:"archived_at",width:168},{title:this.$L("\u5F52\u6863\u4EBA\u5458"),key:"archived_userid",minWidth:100,render:(t,{row:r})=>r.archived_userid?t("UserAvatar",{props:{userid:r.archived_userid,size:24,showName:!0}}):t("Tag",this.$L("\u7CFB\u7EDF\u81EA\u52A8"))},{title:this.$L("\u64CD\u4F5C"),align:"center",width:100,render:(t,r)=>{if(this.cacheTasks.find(n=>n.id==r.row.id&&!n.archived_at))return t("div",{style:{color:"#888"}},this.$L("\u5DF2\u8FD8\u539F"));const e=[t("span",{style:{fontSize:"13px",cursor:"pointer",color:"#84C56A"},on:{click:()=>{this.$store.dispatch("openTask",r.row)}}},this.$L("\u67E5\u770B")),t("Poptip",{props:{title:this.$L("\u4F60\u786E\u5B9A\u8981\u8FD8\u539F\u5F52\u6863\u5417\uFF1F"),confirm:!0,transfer:!0,placement:"left",okText:this.$L("\u786E\u5B9A"),cancelText:this.$L("\u53D6\u6D88")},style:{marginLeft:"6px",fontSize:"13px",cursor:"pointer",color:"#84C56A"},on:{"on-ok":()=>{this.recovery(r.row)}}},this.$L("\u8FD8\u539F")),t("Poptip",{props:{title:this.$L("\u4F60\u786E\u5B9A\u8981\u5220\u9664\u4EFB\u52A1\u5417\uFF1F"),confirm:!0,transfer:!0,placement:"left",okText:this.$L("\u786E\u5B9A"),cancelText:this.$L("\u53D6\u6D88")},style:{marginLeft:"6px",fontSize:"13px",cursor:"pointer",color:"#f00"},on:{"on-ok":()=>{this.delete(r.row)}}},this.$L("\u5220\u9664"))];return t("TableAction",{props:{column:r.column}},e)}}],list:[],page:1,pageSize:20,total:0,noText:""}},mounted(){},computed:{...It(["cacheTasks"])},watch:{projectId:{handler(){this.getLists()},immediate:!0},keyIs(t){t||(this.keys={},this.setPage(1))}},methods:{onSearch(){this.page=1,this.getLists()},getLists(){!this.projectId||(this.loadIng++,this.keyIs=$A.objImplode(this.keys)!="",this.$store.dispatch("call",{url:"project/task/lists",data:{keys:this.keys,project_id:this.projectId,parent_id:-1,archived:"yes",sorts:{archived_at:"desc"},page:Math.max(this.page,1),pagesize:Math.max($A.runNum(this.pageSize),10)}}).then(({data:t})=>{this.page=t.current_page,this.total=t.total,this.list=t.data,this.noText="\u6CA1\u6709\u76F8\u5173\u7684\u6570\u636E"}).catch(()=>{this.noText="\u6570\u636E\u52A0\u8F7D\u5931\u8D25"}).finally(t=>{this.loadIng--}))},setPage(t){this.page=t,this.getLists()},setPageSize(t){this.page=1,this.pageSize=t,this.getLists()},recovery(t){this.list=this.list.filter(({id:r})=>r!=t.id),this.loadIng++,this.$store.dispatch("archivedTask",{task_id:t.id,type:"recovery"}).then(({msg:r})=>{$A.messageSuccess(r),this.loadIng--,this.getLists(),this.$store.dispatch("openTask",t)}).catch(({msg:r})=>{$A.modalError(r),this.loadIng--,this.getLists()})},delete(t){this.list=this.list.filter(({id:r})=>r!=t.id),this.loadIng++,this.$store.dispatch("removeTask",{task_id:t.id}).then(({msg:r})=>{$A.messageSuccess(r),this.loadIng--,this.getLists()}).catch(({msg:r})=>{$A.modalError(r),this.loadIng--,this.getLists()})}}},Je={};var Sr=gt(Tr,Dr,xr,!1,kr,null,null,null);function kr(t){for(let r in Je)this[r]=Je[r]}var Ir=function(){return Sr.exports}(),jr=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"project-workflow"},[e("div",{staticClass:"workflow-title"},[t._v(" "+t._s(t.$L("\u5DE5\u4F5C\u6D41\u8BBE\u7F6E"))+" "),e("div",{staticClass:"title-icon"},[t.loadIng>0?e("Loading"):e("Icon",{attrs:{type:"ios-refresh"},on:{click:t.getData}})],1)]),t.list.length>0?e("div",{staticClass:"workflow-content"},[e("Collapse",{attrs:{accordion:""},model:{value:t.openIndex,callback:function(n){t.openIndex=n},expression:"openIndex"}},t._l(t.list,function(n){return e("Panel",{key:n.id,attrs:{name:"index_"+n.id}},[e("div",{staticClass:"workflow-item"},[e("div",{staticClass:"workflow-name"},[t._v(t._s(n.name))]),e("div",{staticClass:"workflow-status"},t._l(n.project_flow_item,function(a){return e("div",{class:a.status},[t._v(t._s(a.name))])}),0),e("div",{staticClass:"workflow-save",on:{click:function(a){a.stopPropagation()}}},[t.contrast(n.project_flow_item,n.project_flow_bak)?[e("Button",{attrs:{loading:t.loadIng>0,type:"primary"},on:{click:function(a){return t.onSave(n)}}},[t._v(t._s(t.$L("\u4FDD\u5B58")))]),n.id>0?e("Button",{attrs:{disabled:t.loadIng>0,type:"primary",ghost:""},on:{click:function(a){return t.onReduction(n,a)}}},[t._v(t._s(t.$L("\u8FD8\u539F")))]):t._e()]:t._e(),e("Button",{attrs:{disabled:t.loadIng>0,type:"error",ghost:""},on:{click:function(a){return t.onDelete(n)}}},[t._v(t._s(t.$L("\u5220\u9664")))])],2)]),e("div",{staticClass:"taskflow-config",attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"taskflow-config-table"},[e("div",{staticClass:"taskflow-config-table-left-container"},[e("div",{staticClass:"taskflow-config-table-column-header left-header"},[t._v(t._s(t.$L("\u914D\u7F6E\u9879")))]),e("div",{ref:`overlay_${n.id}`,refInFor:!0,staticClass:"taskflow-config-table-column-body"},[e("div",{staticClass:"taskflow-config-table-block"},[e("div",{staticClass:"taskflow-config-table-block-title"},[t._v(t._s(t.$L("\u8BBE\u7F6E\u72B6\u6001\u4E3A")))]),e("div",{staticClass:"taskflow-config-table-block-item"},[e("div",[e("div",{staticClass:"title"},[t._v(t._s(t.$L("\u5F00\u59CB\u72B6\u6001")))]),e("div",{staticClass:"subtitle"},[t._v(t._s(t.$L("\u65B0\u5EFA\u4EFB\u52A1\u9ED8\u8BA4\u72B6\u6001")))])])]),e("div",{staticClass:"taskflow-config-table-block-item"},[e("div",[e("div",{staticClass:"title"},[t._v(t._s(t.$L("\u8FDB\u884C\u4E2D")))]),e("div",{staticClass:"subtitle"},[t._v(t._s(t.$L("\u53EF\u8BBE\u7F6E\u591A\u4E2A\u72B6\u6001\u4E3A\u8FDB\u884C\u4E2D")))])])]),e("div",{staticClass:"taskflow-config-table-block-item"},[e("div",[e("div",{staticClass:"title"},[t._v(t._s(t.$L("\u9A8C\u6536/\u6D4B\u8BD5")))]),e("div",{staticClass:"subtitle"},[t._v(t._s(t.$L("\u53EA\u80FD\u8BBE\u7F6E\u5355\u4E2A\u72B6\u6001\u4E3A\u9A8C\u6536/\u6D4B\u8BD5")))])])]),e("div",{staticClass:"taskflow-config-table-block-item"},[e("div",[e("div",{staticClass:"title"},[t._v(t._s(t.$L("\u7ED3\u675F\u72B6\u6001")))]),e("div",{staticClass:"subtitle"},[t._v(t._s(t.$L("\u8BE5\u72B6\u6001\u4E0B\u4EFB\u52A1\u81EA\u52A8\u6807\u8BB0\u5B8C\u6210")))])])])]),e("div",{staticClass:"taskflow-config-table-block hr"},[e("div",{staticClass:"taskflow-config-table-block-title"},[t._v(t._s(t.$L("\u53EF\u6D41\u8F6C\u5230")))]),t._l(n.project_flow_item,function(a){return e("div",{staticClass:"taskflow-config-table-block-item"},[e("span",{staticClass:"transform-status-name"},[t._v(t._s(a.name))])])})],2)])]),e("div",{staticClass:"taskflow-config-table-right-container"},[e("Draggable",{staticClass:"taskflow-config-table-list-wrapper",attrs:{list:n.project_flow_item,animation:150,disabled:t.$isEEUiApp||t.windowTouch,tag:"div",draggable:".column-border"},on:{sort:function(a){}}},[t._l(n.project_flow_item,function(a){return e("div",{staticClass:"taskflow-config-table-status-column column-border",class:a.status},[e("div",{staticClass:"taskflow-config-table-status-item taskflow-config-table-column-header"},[e("div",{staticClass:"status-label-with-menu",class:a.status},[e("div",{staticClass:"name"},[t._v(t._s(t.$L(a.name)))]),e("EDropdown",{staticClass:"more",class:{opacity:a.userids.length>0},attrs:{trigger:"click"},on:{command:function(o){return t.onMore(o,a)}}},[e("div",{staticClass:"more-icon"},[a.userids.length>1?e("EAvatar",{attrs:{size:20}},[t._v(t._s(a.userids.length))]):a.userids.length>0?e("UserAvatar",{attrs:{userid:a.userids[0],size:20,tooltipDisabled:""}}):e("Icon",{attrs:{type:"ios-more"}})],1),e("EDropdownMenu",{staticClass:"taskflow-config-more-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[a.userids.length>0?e("EDropdownItem",{attrs:{command:"user"}},[e("div",{staticClass:"users"},t._l(a.userids,function(o,s){return e("UserAvatar",{key:s,attrs:{userid:o,size:28,borderWitdh:1,showName:a.userids.length===1,tooltipDisabled:""}})}),1)]):t._e(),e("EDropdownItem",{attrs:{command:"user"}},[e("div",{staticClass:"item"},[e("Icon",{attrs:{type:"md-person"}}),t._v(" "+t._s(t.$L("\u72B6\u6001\u8D1F\u8D23\u4EBA"))+" ")],1)]),e("EDropdownItem",{attrs:{command:"name"}},[e("div",{staticClass:"item"},[e("Icon",{attrs:{type:"md-create"}}),t._v(t._s(t.$L("\u4FEE\u6539\u540D\u79F0"))+" ")],1)]),e("EDropdownItem",{attrs:{command:"remove"}},[e("div",{staticClass:"item delete"},[e("Icon",{attrs:{type:"md-trash"}}),t._v(t._s(t.$L("\u5220\u9664"))+" ")],1)])],1)],1)],1)]),e("div",{ref:`overlay_${n.id}`,refInFor:!0,staticClass:"taskflow-config-table-column-body"},[e("div",{staticClass:"taskflow-config-table-block"},[e("div",{staticClass:"taskflow-config-table-block-title"}),e("RadioGroup",{model:{value:a.status,callback:function(o){t.$set(a,"status",o)},expression:"item.status"}},[e("Radio",{attrs:{label:"start"}},[e("span")]),e("Radio",{attrs:{label:"progress"}},[e("span")]),e("Radio",{attrs:{label:"test"}},[e("span")]),e("Radio",{attrs:{label:"end"}},[e("span")])],1)],1),e("div",{staticClass:"taskflow-config-table-block"},[e("div",{staticClass:"taskflow-config-table-block-title"}),e("CheckboxGroup",{on:{"on-change":function(o){return t.onTurns(a)}},model:{value:a.turns,callback:function(o){t.$set(a,"turns",o)},expression:"item.turns"}},t._l(n.project_flow_item,function(o){return e("Checkbox",{key:o.id,attrs:{label:o.id,disabled:o.id==a.id}},[e("span")])}),1)],1)])])}),e("div",{staticClass:"taskflow-config-table-status-column addnew",on:{click:function(a){return t.onAdd(n)}}},[t._v(t._s(t.$L("\u6DFB\u52A0\u72B6\u6001")))])],2)],1)])])])}),1)],1):t.loadIng==0?e("div",{staticClass:"workflow-no"},[t._v(" "+t._s(t.$L("\u5F53\u524D\u9879\u76EE\u8FD8\u6CA1\u6709\u521B\u5EFA\u5DE5\u4F5C\u6D41"))+" "),e("Button",{attrs:{type:"primary"},on:{click:t.onCreate}},[t._v(t._s(t.$L("\u521B\u5EFA\u5DE5\u4F5C\u6D41")))])],1):t._e(),e("Modal",{attrs:{title:`${t.$L("\u72B6\u6001\u8D1F\u8D23\u4EBA")} (${t.userData.name})`,"mask-closable":!1},model:{value:t.userShow,callback:function(n){t.userShow=n},expression:"userShow"}},[e("Form",{attrs:{model:t.userData,"label-width":"auto"},nativeOn:{submit:function(n){n.preventDefault()}}},[e("FormItem",{attrs:{prop:"userids",label:t.$L("\u72B6\u6001\u8D1F\u8D23\u4EBA")}},[e("UserSelect",{attrs:{"project-id":t.projectId,"multiple-max":5,title:t.$L("\u9009\u62E9\u72B6\u6001\u8D1F\u8D23\u4EBA")},model:{value:t.userData.userids,callback:function(n){t.$set(t.userData,"userids",n)},expression:"userData.userids"}})],1),e("FormItem",{attrs:{prop:"usertype",label:t.$L("\u6D41\u8F6C\u6A21\u5F0F")}},[e("RadioGroup",{model:{value:t.userData.usertype,callback:function(n){t.$set(t.userData,"usertype",n)},expression:"userData.usertype"}},[e("Radio",{attrs:{label:"add"}},[t._v(t._s(t.$L("\u6DFB\u52A0\u6A21\u5F0F")))]),e("Radio",{attrs:{label:"replace"}},[t._v(t._s(t.$L("\u6D41\u8F6C\u6A21\u5F0F")))]),e("Radio",{attrs:{label:"merge"}},[t._v(t._s(t.$L("\u5254\u9664\u6A21\u5F0F")))])],1),t.userData.usertype=="replace"?e("div",{staticClass:"form-tip"},[t._v(t._s(t.$L(`\u6D41\u8F6C\u5230\u3010${t.userData.name}\u3011\u65F6\u6539\u53D8\u4EFB\u52A1\u8D1F\u8D23\u4EBA\u4E3A\u72B6\u6001\u8D1F\u8D23\u4EBA\uFF0C\u539F\u672C\u7684\u4EFB\u52A1\u8D1F\u8D23\u4EBA\u79FB\u81F3\u534F\u52A9\u4EBA\u5458\u3002`)))]):t.userData.usertype=="merge"?e("div",{staticClass:"form-tip"},[t._v(t._s(t.$L(`\u6D41\u8F6C\u5230\u3010${t.userData.name}\u3011\u65F6\u6539\u53D8\u4EFB\u52A1\u8D1F\u8D23\u4EBA\u4E3A\u72B6\u6001\u8D1F\u8D23\u4EBA\uFF08\u5E76\u4FDD\u7559\u64CD\u4F5C\u72B6\u6001\u7684\u4EBA\u5458\uFF09\uFF0C\u539F\u672C\u7684\u4EFB\u52A1\u8D1F\u8D23\u4EBA\u79FB\u81F3\u534F\u52A9\u4EBA\u5458\u3002`)))]):e("div",{staticClass:"form-tip"},[t._v(t._s(t.$L(`\u6D41\u8F6C\u5230\u3010${t.userData.name}\u3011\u65F6\u6DFB\u52A0\u72B6\u6001\u8D1F\u8D23\u4EBA\u81F3\u4EFB\u52A1\u8D1F\u8D23\u4EBA\u3002`)))])],1),e("FormItem",{attrs:{prop:"userlimit",label:t.$L("\u9650\u5236\u8D1F\u8D23\u4EBA")}},[e("iSwitch",{attrs:{"true-value":1,"false-value":0},model:{value:t.userData.userlimit,callback:function(n){t.$set(t.userData,"userlimit",n)},expression:"userData.userlimit"}}),t.userData.userlimit===1?e("div",{staticClass:"form-tip"},[t._v(t._s(t.$L(`\u6D41\u8F6C\u5230\u3010${t.userData.name}\u3011\u65F6\uFF0C[\u4EFB\u52A1\u8D1F\u8D23\u4EBA] \u548C [\u9879\u76EE\u7BA1\u7406\u5458] \u53EF\u4EE5\u4FEE\u6539\u72B6\u6001\u3002`)))]):e("div",{staticClass:"form-tip"},[t._v(t._s(t.$L(`\u6D41\u8F6C\u5230\u3010${t.userData.name}\u3011\u65F6\uFF0C[\u4EFB\u52A1\u8D1F\u8D23\u4EBA] \u548C [\u9879\u76EE\u7BA1\u7406\u5458] \u53EF\u4EE5\u4FEE\u6539\u72B6\u6001\u3002`)))])],1)],1),e("div",{staticClass:"adaption",attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"default"},on:{click:function(n){t.userShow=!1}}},[t._v(t._s(t.$L("\u53D6\u6D88")))]),e("Button",{attrs:{type:"primary"},on:{click:t.onUser}},[t._v(t._s(t.$L("\u4FDD\u5B58")))])],1)],1)],1)},Er=[];const Lr={name:"ProjectWorkflow",components:{UserSelect:cn,Draggable:_n},props:{projectId:{type:Number,default:0}},data(){return{loadIng:0,list:[],openIndex:"",userShow:!1,userData:{}}},mounted(){},watch:{projectId:{handler(t){t&&this.getData()},immediate:!0}},methods:{getData(){this.loadIng++,this.$store.dispatch("call",{url:"project/flow/list",data:{project_id:this.projectId}}).then(({data:t})=>{this.list=t.map(r=>(r.project_flow_bak=JSON.stringify(r.project_flow_item),r)),this.openIndex=this.list.length===1?"index_"+this.list[0].id:"",this.$nextTick(this.syncScroller)}).catch(({msg:t})=>{$A.modalError(t)}).finally(t=>{this.loadIng--})},syncScroller(){this.list.some(t=>{this.$refs[`overlay_${t.id}`]&&this.$refs[`overlay_${t.id}`].some(r=>{Object.keys(r.attributes).includes("sync-scroller")||(r.setAttribute("sync-scroller",!0),r.addEventListener("scroll",({target:e})=>{let n=e.scrollTop,a=e.scrollLeft;this.$nextTick(()=>{this.$refs[`overlay_${t.id}`].some(o=>{o!=r&&o.scrollTo(a,n)})})}))})})},contrast(t,r){return JSON.stringify(t)!=r},existDiff(){return!!this.list.find(t=>this.contrast(t.project_flow_item,t.project_flow_bak))},onCreate(){let t=-1*$A.randNum(1e3,1e4);this.list.push({id:t,name:"Default",project_flow_item:[{id:-10,name:"\u5F85\u5904\u7406",status:"start",turns:[-10,-11,-12,-13,-14],userids:[],usertype:"add",userlimit:0},{id:-11,name:"\u8FDB\u884C\u4E2D",status:"progress",turns:[-10,-11,-12,-13,-14],userids:[],usertype:"add",userlimit:0},{id:-12,name:"\u5F85\u6D4B\u8BD5",status:"test",turns:[-10,-11,-12,-13,-14],userids:[],usertype:"add",userlimit:0},{id:-13,name:"\u5DF2\u5B8C\u6210",status:"end",turns:[-10,-11,-12,-13,-14],userids:[],usertype:"add",userlimit:0},{id:-14,name:"\u5DF2\u53D6\u6D88",status:"end",turns:[-10,-11,-12,-13,-14],userids:[],usertype:"add",userlimit:0}]}),this.openIndex="index_"+t,this.$nextTick(this.syncScroller)},onDelete(t){$A.modalConfirm({title:"\u5220\u9664\u5DE5\u4F5C\u6D41",content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5DE5\u4F5C\u6D41\u5417\uFF1F",loading:!0,onOk:()=>{if(t.id>0)return new Promise((e,n)=>{this.loadIng++,this.$store.dispatch("call",{url:"project/flow/delete",data:{project_id:this.projectId}}).then(({msg:a})=>{e(a);let o=this.list.findIndex(({id:s})=>s==t.id);o>-1&&this.list.splice(o,1)}).catch(({msg:a})=>{n(a)}).finally(a=>{this.loadIng--})});const r=this.list.findIndex(({id:e})=>e==t.id);r>-1&&this.list.splice(r,1)}})},onMore(t,r){switch(t){case"user":this.$set(this.userData,"id",r.id),this.$set(this.userData,"name",r.name),this.$set(this.userData,"userids",r.userids),this.$set(this.userData,"usertype",r.usertype),this.$set(this.userData,"userlimit",r.userlimit),this.userShow=!0;break;case"name":this.onName(r);break;case"remove":this.onRemove(r);break}},onUser(){this.userShow=!1,this.list.some(t=>{let r=t.project_flow_item.find(e=>e.id==this.userData.id);r&&(this.$set(r,"userids",this.userData.userids),this.$set(r,"usertype",this.userData.usertype),this.$set(r,"userlimit",this.userData.userlimit))})},onName(t){$A.modalInput({value:t.name,title:"\u4FEE\u6539\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u6D41\u7A0B\u540D\u79F0",onOk:r=>{if(!r)return"\u8BF7\u8F93\u5165\u6D41\u7A0B\u540D\u79F0";this.$set(t,"name",r)}})},onRemove(t){this.list.some(r=>{let e=r.project_flow_item.findIndex(({id:n})=>n==t.id);e>-1&&r.project_flow_item.splice(e,1)})},onTurns(t){this.$set(t,"turns",t.turns.sort())},onAdd(t){$A.modalInput({title:"\u6DFB\u52A0\u72B6\u6001",placeholder:"\u8BF7\u8F93\u5165\u72B6\u6001\u540D\u79F0",onOk:r=>{if(!r)return"\u8BF7\u8F93\u5165\u72B6\u6001\u540D\u79F0";const e=$A.randNum(1e5,999999)*-1,n=t.project_flow_item.map(({id:a})=>a);t.project_flow_item.push({id:e,name:r,status:"end",turns:n,userids:[],usertype:"add",userlimit:0}),t.project_flow_item.some(a=>{a.turns.push(e)})}})},onReduction(t){this.$set(t,"project_flow_item",JSON.parse(t.project_flow_bak))},onSave(t){let r=0;t.project_flow_item.some(e=>{e.sort=r++}),this.loadIng++,this.$store.dispatch("call",{url:"project/flow/save",data:{project_id:this.projectId,flows:t.project_flow_item},method:"post"}).then(({data:e,msg:n})=>{$.messageSuccess(n),e.project_flow_bak=JSON.stringify(e.project_flow_item);let a=this.list.findIndex(({id:o})=>o==t.id);a>-1?this.list.splice(a,1,e):this.list.push(e),this.openIndex="index_"+e.id,this.$nextTick(this.syncScroller)}).catch(({msg:e})=>{$A.modalError(e)}).finally(e=>{this.loadIng--})},saveAll(){this.list.some(t=>{this.contrast(t.project_flow_item,t.project_flow_bak)&&this.onSave(t)})}}},Ze={};var Ar=gt(Lr,jr,Er,!1,Or,null,null,null);function Or(t){for(let r in Ze)this[r]=Ze[r]}var Pr=function(){return Ar.exports}(),Mr=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"task-deleted"},[e("div",{staticClass:"deleted-title"},[t._v(" "+t._s(t.$L("\u5220\u9664\u7684\u4EFB\u52A1"))+" "),e("div",{staticClass:"title-icon"},[t.loadIng>0?e("Loading"):t._e()],1)]),e("div",{staticClass:"search-container lr"},[e("ul",[e("li",[e("div",{staticClass:"search-label"},[t._v(" "+t._s(t.$L("\u5173\u952E\u8BCD"))+" ")]),e("div",{staticClass:"search-content"},[e("Input",{attrs:{placeholder:t.$L("ID\u3001\u4EFB\u52A1\u540D..."),clearable:""},model:{value:t.keys.name,callback:function(n){t.$set(t.keys,"name",n)},expression:"keys.name"}})],1)]),e("li",{staticClass:"search-button"},[e("Tooltip",{attrs:{theme:"light",placement:"right","transfer-class-name":"search-button-clear",transfer:""}},[e("Button",{attrs:{loading:t.loadIng>0,type:"primary",icon:"ios-search"},on:{click:t.onSearch}},[t._v(t._s(t.$L("\u641C\u7D22")))]),e("div",{attrs:{slot:"content"},slot:"content"},[t.keyIs?e("Button",{attrs:{type:"text"},on:{click:function(n){t.keyIs=!1}}},[t._v(t._s(t.$L("\u53D6\u6D88\u7B5B\u9009")))]):e("Button",{attrs:{loading:t.loadIng>0,type:"text"},on:{click:t.getLists}},[t._v(t._s(t.$L("\u5237\u65B0")))])],1)],1)],1)])]),e("div",{staticClass:"table-page-box"},[e("Table",{attrs:{columns:t.columns,data:t.list,loading:t.loadIng>0,"no-data-text":t.$L(t.noText),stripe:""}}),e("Page",{attrs:{total:t.total,current:t.page,"page-size":t.pageSize,disabled:t.loadIng>0,simple:t.windowPortrait,"page-size-opts":[10,20,30,50,100],"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.setPage,"on-page-size-change":t.setPageSize}})],1)])},Nr=[];const Fr={name:"TaskDeleted",props:{projectId:{type:Number,default:0}},data(){return{loadIng:0,keys:{},keyIs:!1,columns:[{title:"ID",key:"id",width:80,render:(t,{row:r,column:e})=>t("TableAction",{props:{column:e,align:"left"}},[t("div",r.id)])},{title:this.$L("\u4EFB\u52A1\u540D\u79F0"),key:"name",minWidth:200,render:(t,{row:r})=>t("AutoTip",r.name)},{title:this.$L("\u521B\u5EFA\u65F6\u95F4"),key:"created_at",width:168},{title:this.$L("\u5220\u9664\u65F6\u95F4"),key:"deleted_at",width:168},{title:this.$L("\u5220\u9664\u4EBA\u5458"),key:"deleted_userid",minWidth:100,render:(t,{row:r})=>r.deleted_userid?t("UserAvatar",{props:{userid:r.deleted_userid,size:24,showName:!0}}):t("span","-")},{title:this.$L("\u64CD\u4F5C"),align:"center",width:100,render:(t,r)=>{const e=[t("Poptip",{props:{title:this.$L("\u4F60\u786E\u5B9A\u8981\u8FD8\u539F\u5220\u9664\u5417\uFF1F"),confirm:!0,transfer:!0,placement:"left",okText:this.$L("\u786E\u5B9A"),cancelText:this.$L("\u53D6\u6D88")},style:{fontSize:"13px",cursor:"pointer",color:"#84C56A"},on:{"on-ok":()=>{this.recovery(r.row)}}},this.$L("\u8FD8\u539F"))];return t("TableAction",{props:{column:r.column}},e)}}],list:[],page:1,pageSize:20,total:0,noText:""}},mounted(){},computed:{...It(["cacheTasks"])},watch:{projectId:{handler(){this.getLists()},immediate:!0},keyIs(t){t||(this.keys={},this.setPage(1))}},methods:{onSearch(){this.page=1,this.getLists()},getLists(){!this.projectId||(this.loadIng++,this.keyIs=$A.objImplode(this.keys)!="",this.$store.dispatch("call",{url:"project/task/lists",data:{keys:this.keys,project_id:this.projectId,parent_id:-1,deleted:"yes",sorts:{deleted_at:"desc"},page:Math.max(this.page,1),pagesize:Math.max($A.runNum(this.pageSize),10)}}).then(({data:t})=>{this.page=t.current_page,this.total=t.total,this.list=t.data,this.noText="\u6CA1\u6709\u76F8\u5173\u7684\u6570\u636E"}).catch(()=>{this.noText="\u6570\u636E\u52A0\u8F7D\u5931\u8D25"}).finally(t=>{this.loadIng--}))},setPage(t){this.page=t,this.getLists()},setPageSize(t){this.page=1,this.pageSize=t,this.getLists()},recovery(t){this.list=this.list.filter(({id:r})=>r!=t.id),this.loadIng++,this.$store.dispatch("removeTask",{task_id:t.id,type:"recovery"}).then(({msg:r})=>{$A.messageSuccess(r),this.loadIng--,this.getLists(),this.$store.dispatch("openTask",t)}).catch(({msg:r})=>{$A.modalError(r),this.loadIng--,this.getLists()})}}},Qe={};var Rr=gt(Fr,Mr,Nr,!1,Wr,null,null,null);function Wr(t){for(let r in Qe)this[r]=Qe[r]}var Br=function(){return Rr.exports}(),Ur=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"common-gantt"},[e("div",{staticClass:"gantt-left",style:{width:t.menuWidth+"px"}},[e("div",{staticClass:"gantt-title"},[e("div",{staticClass:"gantt-title-text"},[t._v(t._s(t.$L("\u4EFB\u52A1\u540D\u79F0")))])]),e("ul",{ref:"ganttItem",staticClass:"gantt-item",on:{scroll:t.itemScrollListener,mouseenter:function(n){t.mouseType="item"}}},t._l(t.lists,function(n,a){return e("li",{key:a},[n.overdue?e("div",{staticClass:"item-overdue",on:{click:function(o){return t.clickItem(n)}}},[t._v(t._s(t.$L("\u5DF2\u8D85\u671F")))]):t._e(),e("div",{staticClass:"item-title",class:{complete:n.complete,overdue:n.overdue},on:{click:function(o){return t.clickItem(n)}}},[t._v(t._s(n.label))]),e("Icon",{staticClass:"item-icon",attrs:{type:"ios-locate-outline"},on:{click:function(o){return t.scrollPosition(a)}}})],1)}),0)]),e("div",{ref:"ganttRight",staticClass:"gantt-right"},[e("div",{staticClass:"gantt-chart"},[e("ul",{staticClass:"gantt-month"},t._l(t.monthNum,function(n,a){return e("li",{key:a,style:t.monthStyle(a)},[e("div",{staticClass:"month-format"},[t._v(t._s(t.monthFormat(a)))])])}),0),e("ul",{staticClass:"gantt-date",on:{mousedown:t.dateMouseDown}},t._l(t.dateNum,function(n,a){return e("li",{key:a,style:t.dateStyle(a)},[e("div",{staticClass:"date-format"},[e("div",{staticClass:"format-day"},[t._v(t._s(t.dateFormat(a,"day")))]),t.dateWidth>46?e("div",{staticClass:"format-week"},[t._v(t._s(t.dateFormat(a,"week")))]):t._e()])])}),0),e("ul",{ref:"ganttTimeline",staticClass:"gantt-timeline",on:{scroll:t.timelineScrollListener,mouseenter:function(n){t.mouseType="timeline"}}},t._l(t.lists,function(n,a){return e("li",{key:a},[e("div",{staticClass:"timeline-item",style:t.itemStyle(n),on:{mousedown:function(o){return t.itemMouseDown(o,n)}}},[e("div",{staticClass:"timeline-title",attrs:{title:n.label}},[t._v(t._s(n.label))]),e("div",{staticClass:"timeline-resizer"})])])}),0)])])])},zr=[];const Gr={name:"GanttView",props:{lists:{type:Array},menuWidth:{type:Number,default:300},itemWidth:{type:Number,default:100}},data(){return{mouseType:"",mouseWidth:0,mouseScaleWidth:0,dateWidth:100,ganttWidth:0,mouseItem:null,mouseBak:{},dateMove:null}},mounted(){this.dateWidth=this.itemWidth,this.$refs.ganttRight.addEventListener("mousewheel",this.handleScroll,!1),document.addEventListener("mousemove",this.itemMouseMove),document.addEventListener("mouseup",this.itemMouseUp),window.addEventListener("resize",this.handleResize,!1),this.handleResize()},beforeDestroy(){this.$refs.ganttRight.removeEventListener("mousewheel",this.handleScroll,!1),document.removeEventListener("mousemove",this.itemMouseMove),document.removeEventListener("mouseup",this.itemMouseUp),window.removeEventListener("resize",this.handleResize,!1)},watch:{itemWidth(t){this.dateWidth=t}},computed:{monthNum(){const{ganttWidth:t,dateWidth:r}=this;return Math.floor(t/r/30)+2},monthStyle(){const{mouseWidth:t,dateWidth:r}=this;return function(e){let n=t==0?0:t/r,a=new Date,o=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0),s=new Date(o.getTime()+n*864e5),i=new Date(s.getFullYear(),s.getMonth()+1,0,23,59,59),l=(i-s)/1e3/60/60/24,c=r*l;return e>0&&(i=new Date(s.getFullYear(),s.getMonth()+1+e,0),c=i.getDate()*r),{width:c+"px"}}},monthFormat(){const{mouseWidth:t,dateWidth:r}=this;return function(e){let n=t==0?0:t/r,a=new Date,o=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0),s=new Date(o.getTime()+n*864e5);return e>0&&(s=new Date(s.getFullYear(),s.getMonth()+1+e,0)),$A.formatDate("Y-m",s)}},dateNum(){const{ganttWidth:t,dateWidth:r}=this;return Math.floor(t/r)+2},dateStyle(){const{mouseWidth:t,dateWidth:r}=this;return function(e){const n={};let a=t==0?0:t/r,o=Math.floor(a)+e;a==Math.floor(a)&&o--;let s=t==0?e-1:o,i=new Date(new Date().getTime()+s*864e5);[0,6].indexOf(i.getDay())!==-1&&(n.backgroundColor="#f9fafb");let l=r;return e==0&&(l=Math.abs((t%l-l)%l)),n.width=l+"px",n}},dateFormat(){const{mouseWidth:t,dateWidth:r}=this;return function(e,n){let a=t==0?0:t/r,o=Math.floor(a)+e;a==Math.floor(a)&&o--;let s=t==0?e-1:o,i=new Date(new Date().getTime()+s*864e5);return n=="day"?i.getDate():n=="week"?this.$L(`\u661F\u671F${"\u65E5\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D".charAt(i.getDay())}`):i}},itemStyle(){const{mouseWidth:t,dateWidth:r,ganttWidth:e}=this;return function(n){const{start:a,end:o}=n.time,{style:s,moveX:i,moveW:l}=n;let c=new Date,d=new Date(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0).getTime(),u=(a-d)/1e3/60/60/24,f=(o-d)/1e3/60/60/24,v=r*u+t*-1,h=r*(f-u);typeof i=="number"&&(v+=i),typeof l=="number"&&(h+=l);const m={left:Math.min(Math.max(v,h*-1.2),e*1.2).toFixed(2)+"px",width:h.toFixed(2)+"px"};return v<0&&Math.abs(v)<h&&(m.paddingLeft=Math.abs(v).toFixed(2)+"px"),v+h>e&&v<e&&(m.paddingRight=Math.abs(v+h-e).toFixed(2)+"px"),typeof s=="object"?Object.assign(m,s):m}}},methods:{itemScrollListener(t){this.mouseType!="timeline"&&(this.$refs.ganttTimeline.scrollTop=t.target.scrollTop)},timelineScrollListener(t){this.mouseType!="item"&&(this.$refs.ganttItem.scrollTop=t.target.scrollTop)},handleScroll(t){if(t.preventDefault(),t.ctrlKey){this.dateWidth=Math.min(600,Math.max(24,this.dateWidth-Math.floor(t.deltaY))),this.mouseWidth=this.ganttWidth/2*((this.dateWidth-100)/100)+this.dateWidth/100*this.mouseScaleWidth;return}if(t.deltaY!=0){const r=this.$refs.ganttTimeline;let e=r.scrollTop+t.deltaY;e<0?e=0:e>r.scrollHeight-r.clientHeight&&(e=r.scrollHeight-r.clientHeight),r.scrollTop!=e&&(this.mouseType="timeline",r.scrollTop=e)}t.deltaX!=0&&(this.mouseWidth+=t.deltaX,this.mouseScaleWidth+=t.deltaX*(100/this.dateWidth))},handleResize(){this.ganttWidth=this.$refs.ganttTimeline.clientWidth},dateMouseDown(t){t.preventDefault(),this.mouseItem=null,this.dateMove={clientX:t.clientX}},itemMouseDown(t,r){t.preventDefault();let e="moveX";t.target.className=="timeline-resizer"&&(e="moveW"),typeof r[e]!="number"&&this.$set(r,e,0),this.mouseBak={type:e,clientX:t.clientX,value:r[e]},this.mouseItem=r,this.dateMove=null},itemMouseMove(t){if(this.mouseItem!=null){t.preventDefault();const r=this.mouseBak.value+(t.clientX-this.mouseBak.clientX);if(this.mouseBak.type==="moveW"){const e=864e5/this.dateWidth,{start:n,end:a}=this.mouseItem.time;let o=r*e;if(a+o-n<=0)return}this.$set(this.mouseItem,this.mouseBak.type,r)}else if(this.dateMove!=null){t.preventDefault();let r=(this.dateMove.clientX-t.clientX)*5;this.dateMove.clientX=t.clientX,this.mouseWidth+=r,this.mouseScaleWidth+=r*(100/this.dateWidth)}},itemMouseUp(t){if(this.mouseItem!=null){const{start:r,end:e}=this.mouseItem.time;let n=!1,a=864e5/this.dateWidth;if(typeof this.mouseItem.moveX=="number"&&this.mouseItem.moveX!=0){let o=this.mouseItem.moveX*a;this.$set(this.mouseItem.time,"start",r+o),this.$set(this.mouseItem.time,"end",e+o),this.$set(this.mouseItem,"moveX",0),n=!0}if(typeof this.mouseItem.moveW=="number"&&this.mouseItem.moveW!=0){let o=this.mouseItem.moveW*a;this.$set(this.mouseItem.time,"end",e+o),this.$set(this.mouseItem,"moveW",0),n=!0}n?this.$emit("on-change",this.mouseItem):t.target.className=="timeline-title"&&this.clickItem(this.mouseItem),this.mouseItem=null}else this.dateMove!=null&&(this.dateMove=null)},scrollPosition(t){let r=new Date,e=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0),n=864e5/this.dateWidth,a=(this.lists[t].time.start-e)/n-this.dateWidth-this.mouseWidth;this.mouseWidth+=a,this.mouseScaleWidth+=a*(100/this.dateWidth)},clickItem(t){this.$emit("on-click",t)}}},qe={};var Hr=gt(Gr,Ur,zr,!1,Xr,null,null,null);function Xr(t){for(let r in qe)this[r]=qe[r]}var Yr=function(){return Hr.exports}(),Vr=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"project-gstc-gantt"},[e("GanttView",{attrs:{lists:t.lists,menuWidth:t.menuWidth,itemWidth:80},on:{"on-change":t.onChange,"on-click":t.onClick}}),e("Dropdown",{staticClass:"project-gstc-dropdown-filtr",style:t.dropStyle,attrs:{trigger:"click"},on:{"on-click":t.onSwitchColumn}},[e("Icon",{staticClass:"project-gstc-dropdown-icon",class:{filtr:t.filtrProjectId>0},attrs:{type:"md-funnel"}}),e("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[e("DropdownItem",{class:{"dropdown-active":t.filtrProjectId==0},attrs:{name:0}},[t._v(t._s(t.$L("\u5168\u90E8")))]),t._l(t.projectColumn,function(n,a){return e("DropdownItem",{key:a,class:{"dropdown-active":t.filtrProjectId==n.id},attrs:{name:n.id}},[t._v(" "+t._s(n.name)+" "),n.tasks?e("span",[t._v("("+t._s(t.filtrLength(n.tasks))+")")]):t._e()])})],2)],1),e("div",{staticClass:"project-gstc-edit",class:{info:t.editShowInfo,visible:t.editData&&t.editData.length>0}},[e("div",{staticClass:"project-gstc-edit-info"},[e("Table",{attrs:{size:"small","max-height":"600",columns:t.editColumns,data:t.editData}}),e("div",{staticClass:"project-gstc-edit-btns"},[e("Button",{attrs:{loading:t.editLoad>0,size:"small",type:"text"},on:{click:function(n){return t.editSubmit(!1)}}},[t._v(t._s(t.$L("\u53D6\u6D88")))]),e("Button",{attrs:{loading:t.editLoad>0,size:"small",type:"primary"},on:{click:function(n){return t.editSubmit(!0)}}},[t._v(t._s(t.$L("\u4FDD\u5B58")))]),e("Icon",{staticClass:"zoom",attrs:{type:"md-arrow-dropright"},on:{click:function(n){t.editShowInfo=!1}}})],1)],1),e("div",{staticClass:"project-gstc-edit-small"},[e("div",{staticClass:"project-gstc-edit-text",on:{click:function(n){t.editShowInfo=!0}}},[t._v(t._s(t.$L("\u672A\u4FDD\u5B58\u8BA1\u5212\u65F6\u95F4"))+": "),t.editData?e("span",[t._v(t._s(t.editData.length))]):t._e()]),e("Button",{attrs:{loading:t.editLoad>0,size:"small",type:"text"},on:{click:function(n){return t.editSubmit(!1)}}},[t._v(t._s(t.$L("\u53D6\u6D88")))]),e("Button",{attrs:{loading:t.editLoad>0,size:"small",type:"primary"},on:{click:function(n){return t.editSubmit(!0)}}},[t._v(t._s(t.$L("\u4FDD\u5B58")))])],1)])],1)},Kr=[];const Jr={name:"ProjectGantt",components:{GanttView:Yr},props:{projectColumn:{default:[]},flowInfo:{default:{}}},data(){return{lists:[],filtrProjectId:0,editColumns:[{title:this.$L("\u4EFB\u52A1\u540D\u79F0"),key:"label",minWidth:150,ellipsis:!0},{title:this.$L("\u539F\u8BA1\u5212\u65F6\u95F4"),minWidth:135,align:"center",render:(t,{row:r})=>r.notime===!0?t("span","-"):t("div",{style:{}},[t("div",$A.formatDate("Y-m-d H:i",Math.round(r.baktime.start/1e3))),t("div",$A.formatDate("Y-m-d H:i",Math.round(r.baktime.end/1e3)))])},{title:this.$L("\u65B0\u8BA1\u5212\u65F6\u95F4"),minWidth:135,align:"center",render:(t,{row:r})=>t("div",{style:{}},[t("div",$A.formatDate("Y-m-d H:i",Math.round(r.newTime.start/1e3))),t("div",$A.formatDate("Y-m-d H:i",Math.round(r.newTime.end/1e3)))])}],editData:[],editLoad:0,editShowInfo:!1}},mounted(){this.initData()},computed:{...It(["taskPriority"]),...Ae(["projectData"]),menuWidth(){return this.windowWidth<1440?180:260},dropStyle(){return this.windowWidth<1440?{left:"142px"}:{}},completedTask(){return this.projectData.cacheParameter.completedTask}},watch:{projectColumn:{handler(){this.initData()},deep:!0},flowInfo:{handler(){this.initData()},deep:!0},completedTask(){this.initData()}},methods:{initData(){this.lists=[],this.projectColumn&&this.projectColumn.some(this.checkAdd)},flowTask(t){return $A.leftExists(this.flowInfo.value,"user:")&&!t.task_user.find(({userid:r,owner:e})=>r===this.flowInfo.userid&&e)?!0:this.flowInfo.value>0&&t.flow_item_id!==this.flowInfo.value},filtrLength(t){return t.filter(r=>!(r.complete_at&&!this.completedTask||this.flowTask(r))).length},checkAdd(t){this.filtrProjectId>0&&t.id!=this.filtrProjectId||t.tasks&&t.tasks.some(r=>{let e=!r.start_at||!r.end_at,n=this.getTimeObj(r),a=n.start,o=n.end;if(r.complete_at&&!this.completedTask||this.flowTask(r))return!1;let s="#058ce4";this.taskPriority.some(d=>{if(d.priority===r.p_level)return s=d.color,!0});let i={start:a,end:o},l=$A.cloneJSON(i),c=this.editData.find(({id:d})=>d==r.id);c&&(i=$A.cloneJSON(c.newTime)),this.lists.push({id:r.id,label:r.name,complete:r.complete_at,overdue:r.overdue,time:i,notime:e,baktime:l,style:{background:s}})})},onChange(t){const{time:r,baktime:e}=t;if(Math.abs(e.end-r.end)>1e3||Math.abs(e.start-r.start)>1e3){let n=this.editData.find(({id:a})=>a==t.id);n?n.newTime=r:this.editData.push({id:t.id,label:t.label,notime:t.notime,baktime:t.baktime,newTime:r})}},onClick(t){this.$store.dispatch("openTask",t)},editSubmit(t){this.editData&&this.editData.forEach(r=>{let e=this.lists.find(({id:n})=>n==r.id);if(t){this.editLoad++;let n=$A.formatDate("Y-m-d H:i",Math.round(r.newTime.start/1e3)),a=$A.formatDate("Y-m-d H:i",Math.round(r.newTime.end/1e3)),o={task_id:r.id,times:[n,a]};this.$store.dispatch("taskUpdate",o).then(({msg:s})=>{this.editLoad--,this.editLoad===0&&$A.messageSuccess(s),e&&this.$set(e,"baktime",$A.cloneJSON(e.time))}).catch(({msg:s})=>{this.editLoad--,this.editLoad===0&&$A.modalError(s),e&&this.$set(e,"time",$A.cloneJSON(e.baktime))})}else e&&this.$set(e,"time",$A.cloneJSON(e.baktime))}),this.editData=[]},getTimeObj(t){let r=$A.Time(t.start_at)||$A.Time(t.created_at),e=$A.Time(t.end_at)||$A.Time(t.created_at)+86400;return e==r&&(e=Math.round(new Date($A.formatDate("Y-m-d 23:59:59",e)).getTime()/1e3)),e=Math.max(e,r+60),r*=1e3,e*=1e3,{start:r,end:e}},onSwitchColumn(t){this.filtrProjectId=$A.runNum(t),this.initData()}}},tn={};var Zr=gt(Jr,Vr,Kr,!1,Qr,null,null,null);function Qr(t){for(let r in tn)this[r]=tn[r]}var qr=function(){return Zr.exports}(),to=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"markdown-preview-nostyle",domProps:{innerHTML:t._s(t.html)}})},eo=[];const no={name:"markdown-preview-nostyle",props:{initialValue:{type:String,default:""}},data(){return{html:""}},mounted(){this.translateMarkdown()},methods:{translateMarkdown(){this.html=kn(this.initialValue,{sanitize:!1}).replace(/href="/gi,'target="_blank" href="')}},watch:{initialValue(){this.translateMarkdown()}}},en={};var ro=gt(no,to,eo,!1,oo,null,null,null);function oo(t){for(let r in en)this[r]=en[r]}var ao=function(){return ro.exports}(),so=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"project-panel",class:[t.tabTypeActive]},[e("PageTitle",{attrs:{title:t.projectData.name}}),e("div",{staticClass:"project-titbox"},[e("div",{staticClass:"project-title"},[e("div",{staticClass:"project-back",on:{click:t.onBack}},[e("i",{staticClass:"taskfont"},[t._v("\uE676")])]),e("h1",{on:{click:t.showName}},[t._v(t._s(t.projectData.name))]),t.loading?e("div",{staticClass:"project-load"},[e("Loading")],1):t._e()]),e("ul",{staticClass:"project-icons"},[e("li",{staticClass:"project-avatar",class:{"cursor-default":t.projectData.owner_userid!==t.userId},on:{click:function(n){return t.projectDropdown("user")}}},[e("ul",[e("li",[e("UserAvatar",{attrs:{userid:t.projectData.owner_userid,size:36,borderWitdh:2,openDelay:0}},[e("p",[t._v(t._s(t.$L("\u9879\u76EE\u8D1F\u8D23\u4EBA")))])]),(t.windowWidth<=980||t.projectData.cacheParameter.chat)&&t.projectUser.length>0?e("Badge",{attrs:{type:"normal","overflow-count":999,count:t.projectData.project_user.length}}):t._e()],1),t._l(t.projectUser,function(n){return!(t.windowWidth<=980||t.projectData.cacheParameter.chat)&&t.projectUser.length>0?[n.userid===-1?e("li",{staticClass:"more"},[e("ETooltip",{attrs:{disabled:t.$isEEUiApp||t.windowTouch,content:t.$L("\u5171"+t.projectData.project_user.length+"\u4E2A\u6210\u5458")}},[e("Icon",{attrs:{type:"ios-more"}})],1)],1):e("li",[e("UserAvatar",{attrs:{userid:n.userid,size:36,borderWitdh:2,openDelay:0}})],1)]:t._e()})],2)]),e("li",{staticClass:"project-icon",on:{click:function(n){return t.addTaskOpen(0)}}},[e("ETooltip",{attrs:{disabled:t.$isEEUiApp||t.windowTouch,content:t.$L("\u6DFB\u52A0\u4EFB\u52A1")}},[e("Icon",{staticClass:"menu-icon",attrs:{type:"md-add"}})],1)],1),e("li",{class:["project-icon",t.searchText!=""?"active":""]},[e("Tooltip",{attrs:{always:t.searchText!="",theme:"light",rawIndex:10},on:{"on-popper-show":t.searchFocus}},[e("Icon",{staticClass:"menu-icon",attrs:{type:"ios-search"},on:{click:t.searchFocus}}),e("div",{attrs:{slot:"content"},slot:"content"},[e("Input",{ref:"searchInput",staticClass:"search-input",attrs:{placeholder:t.$L("ID\u3001\u540D\u79F0\u3001\u63CF\u8FF0..."),clearable:""},model:{value:t.searchText,callback:function(n){t.searchText=n},expression:"searchText"}})],1)],1)],1),e("li",{class:["project-icon",t.windowLandscape&&t.projectData.cacheParameter.chat?"active":""],on:{click:function(n){return t.toggleParameter("chat")}}},[e("Icon",{staticClass:"menu-icon",attrs:{type:"ios-chatbubbles"}}),e("Badge",{staticClass:"menu-badge",attrs:{"overflow-count":999,count:t.msgUnread}})],1),e("li",{staticClass:"project-icon"},[e("EDropdown",{attrs:{trigger:"click",transfer:""},on:{command:t.projectDropdown}},[e("Icon",{staticClass:"menu-icon",attrs:{type:"ios-more"}}),t.projectData.owner_userid===t.userId?e("EDropdownMenu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("EDropdownItem",{attrs:{command:"setting"}},[t._v(t._s(t.$L("\u9879\u76EE\u8BBE\u7F6E")))]),e("EDropdownItem",{attrs:{command:"workflow"}},[t._v(t._s(t.$L("\u5DE5\u4F5C\u6D41\u8BBE\u7F6E")))]),e("EDropdownItem",{attrs:{command:"user",divided:""}},[t._v(t._s(t.$L("\u6210\u5458\u7BA1\u7406")))]),e("EDropdownItem",{attrs:{command:"invite"}},[t._v(t._s(t.$L("\u9080\u8BF7\u94FE\u63A5")))]),e("EDropdownItem",{attrs:{command:"log",divided:""}},[t._v(t._s(t.$L("\u9879\u76EE\u52A8\u6001")))]),e("EDropdownItem",{attrs:{command:"archived_task"}},[t._v(t._s(t.$L("\u5DF2\u5F52\u6863\u4EFB\u52A1")))]),e("EDropdownItem",{attrs:{command:"deleted_task"}},[t._v(t._s(t.$L("\u5DF2\u5220\u9664\u4EFB\u52A1")))]),e("EDropdownItem",{attrs:{command:"transfer",divided:""}},[t._v(t._s(t.$L("\u79FB\u4EA4\u9879\u76EE")))]),e("EDropdownItem",{attrs:{command:"archived"}},[t._v(t._s(t.$L("\u5F52\u6863\u9879\u76EE")))]),e("EDropdownItem",{staticStyle:{color:"#f40"},attrs:{command:"delete"}},[t._v(t._s(t.$L("\u5220\u9664\u9879\u76EE")))])],1):e("EDropdownMenu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("EDropdownItem",{attrs:{command:"log"}},[t._v(t._s(t.$L("\u9879\u76EE\u52A8\u6001")))]),e("EDropdownItem",{attrs:{command:"archived_task"}},[t._v(t._s(t.$L("\u5DF2\u5F52\u6863\u4EFB\u52A1")))]),e("EDropdownItem",{attrs:{command:"deleted_task"}},[t._v(t._s(t.$L("\u5DF2\u5220\u9664\u4EFB\u52A1")))]),e("EDropdownItem",{staticStyle:{color:"#f40"},attrs:{command:"exit",divided:""}},[t._v(t._s(t.$L("\u9000\u51FA\u9879\u76EE")))])],1)],1)],1)])]),e("div",{staticClass:"project-subbox"},[e("div",{staticClass:"project-subtitle",on:{click:t.showDesc}},[e("MarkdownPreviewNostyle",{ref:"descPreview",attrs:{initialValue:t.projectData.desc}})],1),e("div",{staticClass:"project-switch"},[t.completedCount>0?e("div",{staticClass:"project-checkbox"},[e("Checkbox",{attrs:{value:t.projectData.cacheParameter.completedTask},on:{"on-change":t.toggleCompleted}},[t._v(t._s(t.$L("\u663E\u793A\u5DF2\u5B8C\u6210")))])],1):t._e(),t.flowList.length>0?e("div",{staticClass:"project-select"},[e("Cascader",{ref:"flow",attrs:{data:t.flowData,"transfer-class-name":"project-panel-flow-cascader",transfer:""},on:{"on-change":t.flowChange}},[e("span",{class:`project-flow ${t.flowInfo.status||""}`},[t._v(t._s(t.flowTitle))])])],1):t._e(),e("div",{staticClass:"project-switch-button"},[e("div",{staticClass:"slider",style:t.tabTypeStyle}),e("div",{class:{active:t.tabTypeActive==="column"},on:{click:function(n){return t.tabTypeChange("column")}}},[e("i",{staticClass:"taskfont"},[t._v("\uE60C")])]),e("div",{class:{active:t.tabTypeActive==="table"},on:{click:function(n){return t.tabTypeChange("table")}}},[e("i",{staticClass:"taskfont"},[t._v("\uE66A")])]),e("div",{class:{active:t.tabTypeActive==="gantt"},on:{click:function(n){return t.tabTypeChange("gantt")}}},[e("i",{staticClass:"taskfont"},[t._v("\uE797")])])])])]),t.tabTypeActive==="column"?e("div",{staticClass:"project-column"},[e("Draggable",{staticClass:"column-list",attrs:{list:t.columnList,animation:150,disabled:t.sortDisabled||t.$isEEUiApp||t.windowTouch,tag:"ul",draggable:".column-item"},on:{sort:function(n){return t.sortUpdate(!0)}}},[t._l(t.columnList,function(n){return e("li",{staticClass:"column-item"},[e("div",{class:["column-head",n.color?"custom-color":""],style:n.color?{backgroundColor:n.color}:{}},[e("div",{staticClass:"column-head-title"},[e("AutoTip",[t._v(t._s(n.name))]),e("em",[t._v("("+t._s(t.panelTask(n.tasks).length)+")")])],1),e("div",{staticClass:"column-head-icon"},[t.columnLoad[n.id]===!0?e("div",{staticClass:"loading"},[e("Loading")],1):e("EDropdown",{attrs:{trigger:"click",size:"small"},on:{command:function(a){return t.dropColumn(n,a)}}},[e("Icon",{attrs:{type:"ios-more"}}),e("EDropdownMenu",{staticClass:"project-panel-more-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[e("EDropdownItem",{attrs:{command:"title"}},[e("div",{staticClass:"item"},[e("Icon",{attrs:{type:"md-create"}}),t._v(t._s(t.$L("\u4FEE\u6539"))+" ")],1)]),e("EDropdownItem",{attrs:{command:"remove"}},[e("div",{staticClass:"item"},[e("Icon",{attrs:{type:"md-trash"}}),t._v(t._s(t.$L("\u5220\u9664"))+" ")],1)]),t._l(t.$store.state.columnColorList,function(a,o){return e("EDropdownItem",{key:o,attrs:{divided:o==0,command:a}},[e("div",{staticClass:"item"},[e("i",{staticClass:"taskfont",style:{color:a.color},domProps:{innerHTML:t._s(a.color==n.color?"&#xe61d;":"&#xe61c;")}}),t._v(t._s(t.$L(a.name))+" ")])])})],2)],1),e("Icon",{staticClass:"last",attrs:{type:"md-add"},on:{click:function(a){return t.addTopShow(n.id,!0)}}})],1)]),e("Scrollbar",{staticClass:"column-task"},[t.columnTopShow[n.id]?e("div",{staticClass:"task-item additem"},[e("TaskAddSimple",{attrs:{"column-id":n.id,"project-id":t.projectId,"add-top":!0,"auto-active":""},on:{"on-close":function(a){return t.addTopShow(n.id,!1)},"on-priority":t.addTaskOpen}})],1):t._e(),e("Draggable",{staticClass:"task-list",attrs:{list:n.tasks,animation:150,disabled:t.sortDisabled||t.$isEEUiApp||t.windowTouch,draggable:".task-draggable",filter:".complete",group:"task"},on:{sort:t.sortUpdate,remove:t.sortUpdate}},[t._l(n.tasks,function(a){return e("div",{class:["task-item task-draggable",a.complete_at?"complete":"",t.taskIsHidden(a)?"hidden":""],style:a.color?{backgroundColor:a.color}:{},on:{click:function(o){return t.openTask(a)}}},[e("div",{class:["task-head",a.desc?"has-desc":""]},[e("div",{staticClass:"task-title"},[a.flow_item_name?e("span",{class:a.flow_item_status,on:{click:function(o){return o.stopPropagation(),t.openMenu(o,a)}}},[t._v(t._s(a.flow_item_name))]):t._e(),e("pre",[t._v(t._s(a.name))])]),e("div",{staticClass:"task-menu",on:{click:function(o){o.stopPropagation()}}},[e("TaskMenu",{ref:`taskMenu_${a.id}`,refInFor:!0,attrs:{task:a,icon:"ios-more"}})],1)]),a.desc?e("div",{staticClass:"task-desc"},[e("pre",{domProps:{innerHTML:t._s(a.desc)}})]):t._e(),a.task_tag.length>0?e("div",{staticClass:"task-tags"},t._l(a.task_tag,function(o,s){return e("Tag",{key:s,attrs:{color:o.color}},[t._v(t._s(o.name))])}),1):t._e(),e("div",{staticClass:"task-users"},[e("ul",[t._l(t.ownerUser(a.task_user),function(o,s){return e("li",{key:s},[e("UserAvatar",{attrs:{userid:o.userid,size:"32",borderWitdh:2,borderColor:a.color}})],1)}),t.ownerUser(a.task_user).length===0?e("li",{staticClass:"no-owner"},[e("Button",{attrs:{type:"primary",size:"small",ghost:""},on:{click:function(o){return o.stopPropagation(),t.openTask(a,!0)}}},[t._v(t._s(t.$L("\u9886\u53D6\u4EFB\u52A1")))])],1):t._e()],2),a.file_num>0?e("div",{staticClass:"task-icon"},[t._v(t._s(a.file_num)),e("Icon",{attrs:{type:"ios-link-outline"}})],1):t._e(),a.msg_num>0?e("div",{staticClass:"task-icon"},[t._v(t._s(a.msg_num)),e("Icon",{attrs:{type:"ios-chatbubbles-outline"}})],1):t._e()]),e("div",{staticClass:"task-progress"},[a.sub_num>0?e("div",{staticClass:"task-sub-num"},[t._v(t._s(a.sub_complete)+"/"+t._s(a.sub_num))]):t._e(),e("Progress",{attrs:{percent:a.percent,"stroke-width":6}}),a.end_at?e("ETooltip",{class:["task-time",a.today?"today":"",a.overdue?"overdue":""],attrs:{disabled:t.$isEEUiApp||t.windowTouch,"open-delay":600,content:a.end_at}},[a.complete_at?t._e():e("div",[e("i",{staticClass:"taskfont"},[t._v("\uE71D")]),t._v(t._s(t.expiresFormat(a.end_at)))])]):t._e()],1),a.p_name?e("em",{staticClass:"priority-color",style:{backgroundColor:a.p_color}}):t._e()])}),e("div",{staticClass:"task-item additem"},[e("TaskAddSimple",{attrs:{"column-id":n.id,"project-id":t.projectId},on:{"on-priority":t.addTaskOpen}})],1)],2)],1)],1)}),e("li",{class:["add-column",t.addColumnShow?"show-input":""]},[e("div",{staticClass:"add-column-text",on:{click:t.addColumnOpen}},[e("Icon",{attrs:{type:"md-add"}}),t._v(t._s(t.$L("\u6DFB\u52A0\u5217\u8868"))+" ")],1),e("div",{staticClass:"add-column-input"},[e("Input",{ref:"addColumnName",attrs:{placeholder:t.$L("\u5217\u8868\u540D\u79F0\uFF0C\u56DE\u8F66\u521B\u5EFA"),clearable:""},on:{"on-blur":t.addColumnBlur,"on-enter":t.addColumnSubmit,"on-clear":function(n){t.addColumnShow=!1}},model:{value:t.addColumnName,callback:function(n){t.addColumnName=n},expression:"addColumnName"}})],1)])],2)],1):t.tabTypeActive==="table"?e("Scrollbar",{staticClass:"project-table",attrs:{"enable-x":""}},[e("div",{staticClass:"project-table-head"},[e("Row",{staticClass:"task-row"},[e("Col",{attrs:{span:"12"}},[t._v("# "+t._s(t.$L("\u4EFB\u52A1\u540D\u79F0")))]),e("Col",{attrs:{span:"3"}},[t._v(t._s(t.$L("\u5217\u8868")))]),e("Col",{attrs:{span:"3"}},[e("div",{staticClass:"sort",on:{click:function(n){return t.onSort("level")}}},[t._v(" "+t._s(t.$L("\u4F18\u5148\u7EA7"))+" "),e("div",{staticClass:"task-sort"},[e("Icon",{class:{on:t.sortField=="level"&&t.sortType=="asc"},attrs:{type:"md-arrow-dropup"}}),e("Icon",{class:{on:t.sortField=="level"&&t.sortType=="desc"},attrs:{type:"md-arrow-dropdown"}})],1)])]),e("Col",{attrs:{span:"3"}},[t._v(t._s(t.$L("\u8D1F\u8D23\u4EBA")))]),e("Col",{attrs:{span:"3"}},[e("div",{staticClass:"sort",on:{click:function(n){return t.onSort("end_at")}}},[t._v(" "+t._s(t.$L("\u5230\u671F\u65F6\u95F4"))+" "),e("div",{staticClass:"task-sort"},[e("Icon",{class:{on:t.sortField=="end_at"&&t.sortType=="asc"},attrs:{type:"md-arrow-dropup"}}),e("Icon",{class:{on:t.sortField=="end_at"&&t.sortType=="desc"},attrs:{type:"md-arrow-dropdown"}})],1)])])],1)],1),e("div",{class:["project-table-body",t.projectData.cacheParameter.showMy?"":"project-table-hide"]},[e("Row",{staticClass:"task-row"},[e("Col",{staticClass:"row-title",attrs:{span:"12"}},[e("i",{staticClass:"taskfont",on:{click:function(n){return t.toggleParameter("showMy")}}},[t._v("\uE689")]),e("div",{staticClass:"row-h1"},[t._v(t._s(t.$L("\u6211\u7684\u4EFB\u52A1")))]),e("div",{staticClass:"row-num"},[t._v("("+t._s(t.myList.length)+")")])]),e("Col",{attrs:{span:"3"}}),e("Col",{attrs:{span:"3"}}),e("Col",{attrs:{span:"3"}}),e("Col",{attrs:{span:"3"}})],1),t.projectData.cacheParameter.showMy?e("TaskRow",{attrs:{list:t.transforTasks(t.myList),"open-key":"my","fast-add-task":""},on:{"on-priority":t.addTaskOpen}}):t._e()],1),t.helpList.length?e("div",{class:["project-table-body",t.projectData.cacheParameter.showHelp?"":"project-table-hide"]},[e("Row",{staticClass:"task-row"},[e("Col",{staticClass:"row-title",attrs:{span:"12"}},[e("i",{staticClass:"taskfont",on:{click:function(n){return t.toggleParameter("showHelp")}}},[t._v("\uE689")]),e("div",{staticClass:"row-h1"},[t._v(t._s(t.$L("\u534F\u52A9\u7684\u4EFB\u52A1")))]),e("div",{staticClass:"row-num"},[t._v("("+t._s(t.helpList.length)+")")])]),e("Col",{attrs:{span:"3"}}),e("Col",{attrs:{span:"3"}}),e("Col",{attrs:{span:"3"}}),e("Col",{attrs:{span:"3"}})],1),t.projectData.cacheParameter.showHelp?e("TaskRow",{attrs:{list:t.helpList,"open-key":"help"},on:{"on-priority":t.addTaskOpen}}):t._e()],1):t._e(),t.projectData.task_num>0?e("div",{class:["project-table-body",t.projectData.cacheParameter.showUndone?"":"project-table-hide"]},[e("Row",{staticClass:"task-row"},[e("Col",{staticClass:"row-title",attrs:{span:"12"}},[e("i",{staticClass:"taskfont",on:{click:function(n){return t.toggleParameter("showUndone")}}},[t._v("\uE689")]),e("div",{staticClass:"row-h1"},[t._v(t._s(t.$L("\u672A\u5B8C\u6210\u4EFB\u52A1")))]),e("div",{staticClass:"row-num"},[t._v("("+t._s(t.unList.length)+")")])]),e("Col",{attrs:{span:"3"}}),e("Col",{attrs:{span:"3"}}),e("Col",{attrs:{span:"3"}}),e("Col",{attrs:{span:"3"}})],1),t.projectData.cacheParameter.showUndone?e("TaskRow",{attrs:{list:t.unList,"open-key":"undone"},on:{"on-priority":t.addTaskOpen}}):t._e()],1):t._e(),t.projectData.task_num>0?e("div",{class:["project-table-body",t.projectData.cacheParameter.showCompleted?"":"project-table-hide"]},[e("Row",{staticClass:"task-row"},[e("Col",{staticClass:"row-title",attrs:{span:"12"}},[e("i",{staticClass:"taskfont",on:{click:function(n){return t.toggleParameter("showCompleted")}}},[t._v("\uE689")]),e("div",{staticClass:"row-h1"},[t._v(t._s(t.$L("\u5DF2\u5B8C\u6210\u4EFB\u52A1")))]),e("div",{staticClass:"row-num"},[t._v("("+t._s(t.completedList.length)+")")])]),e("Col",{attrs:{span:"3"}}),e("Col",{attrs:{span:"3"}}),e("Col",{attrs:{span:"3"}}),e("Col",{attrs:{span:"3"}},[t._v(t._s(t.projectData.task_num>0&&t.projectData.cacheParameter.showCompleted?t.$L("\u5B8C\u6210\u65F6\u95F4"):""))])],1),t.projectData.cacheParameter.showCompleted?e("TaskRow",{attrs:{list:t.completedList,"open-key":"completed",showCompleteAt:""},on:{"on-priority":t.addTaskOpen}}):t._e()],1):t._e()]):t.tabTypeActive==="gantt"?e("div",{staticClass:"project-gantt"},[e("ProjectGantt",{attrs:{projectColumn:t.columnList,flowInfo:t.flowInfo}})],1):t._e(),e("Modal",{attrs:{title:t.$L("\u9879\u76EE\u8BBE\u7F6E"),"mask-closable":!1},model:{value:t.settingShow,callback:function(n){t.settingShow=n},expression:"settingShow"}},[e("Form",{attrs:{model:t.settingData,"label-width":"auto"},nativeOn:{submit:function(n){n.preventDefault()}}},[e("FormItem",{attrs:{prop:"name",label:t.$L("\u9879\u76EE\u540D\u79F0")}},[e("Input",{ref:"projectName",attrs:{type:"text",maxlength:32,placeholder:t.$L("\u5FC5\u586B")},model:{value:t.settingData.name,callback:function(n){t.$set(t.settingData,"name",n)},expression:"settingData.name"}})],1),e("FormItem",{attrs:{prop:"desc",label:t.$L("\u9879\u76EE\u4ECB\u7ECD")}},[e("Input",{ref:"projectDesc",attrs:{type:"textarea",autosize:{minRows:3,maxRows:5},maxlength:255,placeholder:`${t.$L("\u9009\u586B")} (${t.$L("\u652F\u6301 Markdown \u683C\u5F0F")})`},model:{value:t.settingData.desc,callback:function(n){t.$set(t.settingData,"desc",n)},expression:"settingData.desc"}})],1)],1),e("div",{staticClass:"adaption",attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"default"},on:{click:function(n){t.settingShow=!1}}},[t._v(t._s(t.$L("\u53D6\u6D88")))]),e("Button",{attrs:{type:"primary",loading:t.settingLoad>0},on:{click:t.onSetting}},[t._v(t._s(t.$L("\u4FEE\u6539")))])],1)],1),e("Modal",{attrs:{title:t.$L("\u6210\u5458\u7BA1\u7406"),"mask-closable":!1},model:{value:t.userShow,callback:function(n){t.userShow=n},expression:"userShow"}},[e("Form",{attrs:{model:t.userData,"label-width":"auto"},nativeOn:{submit:function(n){n.preventDefault()}}},[e("FormItem",{attrs:{prop:"userids",label:t.$L("\u9879\u76EE\u6210\u5458")}},[e("UserSelect",{attrs:{uncancelable:t.userData.uncancelable,"multiple-max":100,title:t.$L("\u9009\u62E9\u9879\u76EE\u6210\u5458")},model:{value:t.userData.userids,callback:function(n){t.$set(t.userData,"userids",n)},expression:"userData.userids"}})],1)],1),e("div",{staticClass:"adaption",attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"default"},on:{click:function(n){t.userShow=!1}}},[t._v(t._s(t.$L("\u53D6\u6D88")))]),t.userWaitRemove.length>0?e("Poptip",{staticStyle:{"margin-left":"8px"},attrs:{confirm:"",placement:"bottom","ok-text":t.$L("\u786E\u5B9A"),"cancel-text":t.$L("\u53D6\u6D88"),transfer:""},on:{"on-ok":t.onUser}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("p",[e("strong",[t._v(t._s(t.$L("\u79FB\u9664\u6210\u5458\u8D1F\u8D23\u7684\u4EFB\u52A1\u5C06\u53D8\u6210\u65E0\u8D1F\u8D23\u4EBA\uFF0C")))])]),e("p",[t._v(t._s(t.$L("\u6CE8\u610F\u6B64\u64CD\u4F5C\u4E0D\u53EF\u9006\uFF01")))]),e("ul",{staticClass:"project-panel-wait-remove"},[e("li",[t._v(t._s(t.$L("\u5373\u5C06\u79FB\u9664"))+"\uFF1A")]),t._l(t.userWaitRemove,function(n){return e("li",{key:n},[e("UserAvatar",{attrs:{userid:n,size:20,showName:"",tooltipDisabled:""}})],1)})],2)]),e("Button",{attrs:{type:"primary",loading:t.userLoad>0}},[t._v(t._s(t.$L("\u4FDD\u5B58")))])],1):e("Button",{attrs:{type:"primary",loading:t.userLoad>0},on:{click:t.onUser}},[t._v(t._s(t.$L("\u4FDD\u5B58")))])],1)],1),e("Modal",{attrs:{title:t.$L("\u9080\u8BF7\u94FE\u63A5"),"mask-closable":!1},model:{value:t.inviteShow,callback:function(n){t.inviteShow=n},expression:"inviteShow"}},[e("Form",{attrs:{model:t.inviteData,"label-width":"auto"},nativeOn:{submit:function(n){n.preventDefault()}}},[e("FormItem",{attrs:{label:t.$L("\u94FE\u63A5\u5730\u5740")}},[e("Input",{ref:"inviteInput",attrs:{type:"textarea",rows:3,readonly:""},on:{"on-focus":t.inviteFocus},model:{value:t.inviteData.url,callback:function(n){t.$set(t.inviteData,"url",n)},expression:"inviteData.url"}}),e("div",{staticClass:"form-tip"},[t._v(t._s(t.$L("\u53EF\u901A\u8FC7\u6B64\u94FE\u63A5\u76F4\u63A5\u52A0\u5165\u9879\u76EE\u3002")))])],1)],1),e("div",{staticClass:"adaption",attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"default"},on:{click:function(n){t.inviteShow=!1}}},[t._v(t._s(t.$L("\u53D6\u6D88")))]),e("Poptip",{staticStyle:{"margin-left":"8px"},attrs:{confirm:"",placement:"bottom","ok-text":t.$L("\u786E\u5B9A"),"cancel-text":t.$L("\u53D6\u6D88"),transfer:""},on:{"on-ok":function(n){return t.inviteGet(!0)}}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("p",[e("strong",[t._v(t._s(t.$L("\u6CE8\u610F\uFF1A\u5237\u65B0\u5C06\u5BFC\u81F4\u539F\u6765\u7684\u9080\u8BF7\u94FE\u63A5\u5931\u6548\uFF01")))])])]),e("Button",{attrs:{type:"primary",loading:t.inviteLoad>0}},[t._v(t._s(t.$L("\u5237\u65B0")))])],1)],1)],1),e("Modal",{attrs:{title:t.$L("\u79FB\u4EA4\u9879\u76EE"),"mask-closable":!1},model:{value:t.transferShow,callback:function(n){t.transferShow=n},expression:"transferShow"}},[e("Form",{attrs:{model:t.transferData,"label-width":"auto"},nativeOn:{submit:function(n){n.preventDefault()}}},[e("FormItem",{attrs:{prop:"owner_userid",label:t.$L("\u65B0\u9879\u76EE\u8D1F\u8D23\u4EBA")}},[e("UserSelect",{attrs:{"multiple-max":1,title:t.$L("\u9009\u62E9\u9879\u76EE\u8D1F\u8D23\u4EBA")},model:{value:t.transferData.owner_userid,callback:function(n){t.$set(t.transferData,"owner_userid",n)},expression:"transferData.owner_userid"}})],1)],1),e("div",{staticClass:"adaption",attrs:{slot:"footer"},slot:"footer"},[e("Button",{attrs:{type:"default"},on:{click:function(n){t.transferShow=!1}}},[t._v(t._s(t.$L("\u53D6\u6D88")))]),e("Button",{attrs:{type:"primary",loading:t.transferLoad>0},on:{click:t.onTransfer}},[t._v(t._s(t.$L("\u79FB\u4EA4")))])],1)],1),e("DrawerOverlay",{attrs:{placement:"right",beforeClose:t.workflowBeforeClose,size:1280},model:{value:t.workflowShow,callback:function(n){t.workflowShow=n},expression:"workflowShow"}},[t.workflowShow?e("ProjectWorkflow",{ref:"workflow",attrs:{"project-id":t.projectId}}):t._e()],1),e("DrawerOverlay",{attrs:{placement:"right",size:720},model:{value:t.logShow,callback:function(n){t.logShow=n},expression:"logShow"}},[t.logShow?e("ProjectLog",{attrs:{"project-id":t.projectId}}):t._e()],1),e("DrawerOverlay",{attrs:{placement:"right",size:1e3},model:{value:t.archivedTaskShow,callback:function(n){t.archivedTaskShow=n},expression:"archivedTaskShow"}},[t.archivedTaskShow?e("TaskArchived",{attrs:{"project-id":t.projectId}}):t._e()],1),e("DrawerOverlay",{attrs:{placement:"right",size:1e3},model:{value:t.deletedTaskShow,callback:function(n){t.deletedTaskShow=n},expression:"deletedTaskShow"}},[t.deletedTaskShow?e("TaskDeleted",{attrs:{"project-id":t.projectId}}):t._e()],1)],1)},io=[];const lo={name:"ProjectPanel",components:{UserSelect:cn,MarkdownPreviewNostyle:ao,TaskMenu:ln,ProjectWorkflow:Pr,DrawerOverlay:jn,ProjectLog:In,TaskArchived:Ir,TaskRow:Cr,Draggable:_n,TaskAddSimple:Cn,TaskPriority:sn,TaskDeleted:Br,ProjectGantt:qr},data(){return{loading:!1,nowTime:$A.Time(),nowInterval:null,columnLoad:{},columnTopShow:{},sortField:"end_at",sortType:"desc",searchText:"",addColumnShow:!1,addColumnName:"",sortData:[],sortDisabled:!1,settingShow:!1,settingData:{},settingLoad:0,userShow:!1,userData:{},userLoad:0,inviteShow:!1,inviteData:{},inviteLoad:0,transferShow:!1,transferData:{},transferLoad:0,workflowShow:!1,logShow:!1,archivedTaskShow:!1,deletedTaskShow:!1,flowInfo:{},flowList:[]}},mounted(){this.nowInterval=setInterval(()=>{this.nowTime=$A.Time()},1e3)},destroyed(){clearInterval(this.nowInterval)},computed:{...It(["cacheDialogs","projectId","projectLoad","cacheTasks","cacheColumns","taskCompleteTemps","cacheUserBasic"]),...Ae(["projectData","transforTasks"]),tabTypeActive(){return this.projectData.cacheParameter.menuType},tabTypeStyle(){const t={};switch(this.tabTypeActive){case"column":t.left="0";break;case"table":t.left="33.33%";break;case"gantt":t.left="66.66%";break;default:t.display="none"}return t},userWaitRemove(){const{userids:t,useridbak:r}=this.userData;if(!t)return[];let e=[];return r.some(n=>{t.includes(n)||e.push(n)}),e},msgUnread(){const{cacheDialogs:t,projectData:r}=this,e=t.find(({id:n})=>n===r.dialog_id);return $A.getDialogNum(e)},panelTask(){const{searchText:t,flowInfo:r}=this;return function(e){return this.projectData.cacheParameter.completedTask||(e=e.filter(({complete_at:n})=>!n)),$A.leftExists(r.value,"user:")?e=e.filter(({task_user:n})=>n.find(({userid:a,owner:o})=>a===r.userid&&o)):r.value>0&&(e=e.filter(({flow_item_id:n})=>n===r.value)),t&&(e=e.filter(({id:n,name:a,desc:o})=>n==t||$A.strExists(`${a} ${o}`,t))),e}},projectUser(){const{projectData:t,windowWidth:r}=this;if(!t.project_user)return[];let e=r>1200?8:3,n=t.project_user.filter(({userid:o})=>o!=t.owner_userid);if(n.length<=e)return n;let a=n.slice(0,e-1);return a.push({userid:-1}),a.push(n[n.length-1]),a},allTask(){const{cacheTasks:t,projectId:r}=this;return t.filter(e=>e.archived_at?!1:e.project_id==r)},columnList(){const{projectId:t,cacheColumns:r,allTask:e}=this,n=r.filter(({project_id:a})=>a==t).sort((a,o)=>a.sort!=o.sort?a.sort-o.sort:a.id-o.id);return n.forEach(a=>{a.tasks=this.transforTasks(e.filter(o=>o.column_id==a.id)).sort((o,s)=>o.complete_at||s.complete_at?$A.Date(o.complete_at)-$A.Date(s.complete_at):o.sort!=s.sort?o.sort-s.sort:o.id-s.id)}),n},myList(){const{allTask:t,taskCompleteTemps:r,sortField:e,sortType:n}=this;let a=t.filter(o=>this.myFilter(o));if(r.length>0){let o=t.filter(s=>r.includes(s.id)&&this.myFilter(s,!1));o.length>0&&(a=$A.cloneJSON(a),a.push(...o))}return a.sort((o,s)=>{if(n=="asc"&&([o,s]=[s,o]),e=="level")return o.p_level-s.p_level;if(e=="end_at")return o.end_at==s.end_at?o.p_level-s.p_level:$A.Date(o.end_at||"2099-12-31 23:59:59")-$A.Date(s.end_at||"2099-12-31 23:59:59")})},helpList(){const{allTask:t,taskCompleteTemps:r,sortField:e,sortType:n}=this;let a=t.filter(o=>this.helpFilter(o));if(r.length>0){let o=t.filter(s=>r.includes(s.id)&&this.helpFilter(s,!1));o.length>0&&(a=$A.cloneJSON(a),a.push(...o))}return a.sort((o,s)=>{if(n=="asc"&&([o,s]=[s,o]),e=="level")return o.p_level-s.p_level;if(e=="end_at")return o.end_at==s.end_at?o.p_level-s.p_level:$A.Date(o.end_at||"2099-12-31 23:59:59")-$A.Date(s.end_at||"2099-12-31 23:59:59")})},unList(){const{allTask:t,searchText:r,sortField:e,sortType:n}=this;return t.filter(o=>o.parent_id>0||this.flowTask(o)||r&&o.id!=r&&!$A.strExists(o.name,r)&&!$A.strExists(o.desc,r)?!1:!o.complete_at).sort((o,s)=>{if(n=="asc"&&([o,s]=[s,o]),e=="level")return o.p_level-s.p_level;if(e=="end_at")return o.end_at==s.end_at?o.p_level-s.p_level:$A.Date(o.end_at||"2099-12-31 23:59:59")-$A.Date(s.end_at||"2099-12-31 23:59:59")})},completedList(){const{allTask:t,searchText:r}=this;return t.filter(n=>n.parent_id>0||this.flowTask(n)||r&&n.id!=r&&!$A.strExists(n.name,r)&&!$A.strExists(n.desc,r)?!1:n.complete_at).sort((n,a)=>{let o=$A.Date(n.complete_at);return $A.Date(a.complete_at)-o})},completedCount(){const{allTask:t}=this;return t.filter(r=>r.parent_id>0?!1:r.complete_at).length},flowTitle(){const{flowInfo:t,flowData:r,allTask:e}=this;if(t.value){const n=r.find(a=>a.value===t.value);return n?n.label:t.label}return`${this.$L("\u5168\u90E8")} (${e.length})`},flowData(){const{flowList:t,allTask:r,cacheUserBasic:e}=this,n=[{value:0,label:`${this.$L("\u5168\u90E8")} (${r.length})`,children:[]}],a=t.map(i=>({value:i.id,label:i.name,status:i.status,children:i.project_flow_item.map(l=>{const c=r.filter(({flow_item_id:d})=>d==l.id).length;return{value:l.id,label:`${l.name} (${c})`,status:l.status,class:l.status}})}));a.length===1?n.push(...a[0].children):a.length>0&&n.push(...a);const{project_user:o}=this.projectData,s=o.map((i,l)=>{const c=e.find(({userid:u})=>u===i.userid)||{},d=r.filter(({task_user:u,complete_at:f})=>!this.projectData.cacheParameter.completedTask&&f?!1:u.find(({userid:v,owner:h})=>v===i.userid&&h)).length;return{value:`user:${c.userid}`,label:`${c.nickname} (${d})`,class:`user-${l}`,userid:c.userid||0,length:d}}).filter(({userid:i,length:l})=>i>0&&l>0);return s.length>0&&n.push(...s),n}},watch:{projectData(){this.sortData=this.getSort()},projectLoad(t){this._loadTimeout&&clearTimeout(this._loadTimeout),t>0?this._loadTimeout=setTimeout(()=>{this.loading=!0},1e3):this.loading=!1},projectId:{handler(t){t>0&&this.getFlowData()},immediate:!0}},methods:{showName(){this.windowLandscape||$A.modalInfo({language:!1,title:this.$L("\u9879\u76EE\u540D\u79F0"),content:this.projectData.name})},showDesc(){this.windowLandscape||$A.modalInfo({language:!1,title:this.$L("\u9879\u76EE\u63CF\u8FF0"),content:this.$refs.descPreview.$el.innerHTML})},searchFocus(){this.$nextTick(()=>{this.$refs.searchInput.focus({cursor:"end"})})},getSort(){const t=[];return this.columnList.forEach(r=>{t.push({id:r.id,task:r.tasks.map(({id:e})=>e)})}),t},sortUpdate(t){const r=this.sortData,e=this.getSort();if(JSON.stringify(r)===JSON.stringify(e))return;this.sortData=e;const n={project_id:this.projectId,sort:this.sortData,only_column:t===!0?1:0};this.sortDisabled=!0,this.$store.dispatch("call",{url:"project/sort",data:n}).then(({msg:a})=>{$A.messageSuccess(a),this.sortDisabled=!1;let o,s=[];n.only_column?(o=-1,n.sort.forEach(i=>{o++,s.push({id:i.id,sort:o})}),this.$store.dispatch("saveColumn",s)):(n.sort.forEach(i=>{o=-1,s.push(...i.task.map(l=>(o++,s.push(...this.allTask.filter(c=>c.parent_id==l).map(({id:c})=>({id:c,sort:o,column_id:i.id}))),{id:l,sort:o,column_id:i.id})))}),this.$store.dispatch("saveTask",s))}).catch(({msg:a})=>{$A.modalError(a),this.sortDisabled=!1,this.$store.dispatch("getTaskForProject",this.projectId).catch(()=>{})})},addTopShow(t,r){this.$set(this.columnTopShow,t,r)},addTaskOpen(t){Se.Store.set("addTask",t)},addColumnOpen(){this.addColumnShow=!0,this.$nextTick(()=>{this.$refs.addColumnName.focus()})},addColumnBlur(){this.addColumnName===""&&(this.addColumnShow=!1)},addColumnSubmit(){let t=this.addColumnName.trim();t!==""&&this.$store.dispatch("call",{url:"project/column/add",data:{project_id:this.projectId,name:t}}).then(({data:r,msg:e})=>{$A.messageSuccess(e),this.addColumnName="",this.$store.dispatch("saveColumn",r)}).catch(({msg:r})=>{$A.modalError(r)})},dropColumn(t,r){r==="title"?this.titleColumn(t):r==="remove"?this.removeColumn(t):r.name&&this.updateColumn(t,{color:r.color}).catch($A.modalError)},titleColumn(t){$A.modalInput({value:t.name,title:"\u4FEE\u6539\u5217\u8868",placeholder:"\u8F93\u5165\u5217\u8868\u540D\u79F0",onOk:r=>r?this.updateColumn(t,{name:r}):"\u5217\u8868\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"})},updateColumn(t,r){return new Promise((e,n)=>{if(this.columnLoad[t.id]===!0){e();return}this.$set(this.columnLoad,t.id,!0),Object.keys(r).forEach(a=>this.$set(t,a,r[a])),this.$store.dispatch("call",{url:"project/column/update",data:Object.assign(r,{column_id:t.id})}).then(({data:a})=>{this.$set(this.columnLoad,t.id,!1),this.$store.dispatch("saveColumn",a),e()}).catch(({msg:a})=>{this.$set(this.columnLoad,t.id,!1),this.$store.dispatch("getColumns",this.projectId).catch(()=>{}),n(a)})})},removeColumn(t){$A.modalConfirm({title:"\u5220\u9664\u5217\u8868",content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5217\u8868\u3010"+t.name+"\u3011\u53CA\u5217\u8868\u5185\u7684\u4EFB\u52A1\u5417\uFF1F",loading:!0,onOk:()=>{if(this.columnLoad[t.id]!==!0)return this.$set(this.columnLoad,t.id,!0),new Promise((r,e)=>{this.$store.dispatch("removeColumn",t.id).then(({msg:n})=>{r(n)}).catch(({msg:n})=>{e(n)}).finally(n=>{this.$set(this.columnLoad,t.id,!1)})})}})},onSort(t){this.sortField=t,this.sortType=this.sortType=="desc"?"asc":"desc"},onSetting(){this.settingLoad++,this.$store.dispatch("call",{url:"project/update",data:Object.assign(this.settingData,{project_id:this.projectId})}).then(({data:t,msg:r})=>{$A.messageSuccess(r),this.settingShow=!1,this.$store.dispatch("saveProject",t)}).catch(({msg:t})=>{$A.modalError(t)}).finally(t=>{this.settingLoad--})},onUser(){this.userLoad++,this.$store.dispatch("call",{url:"project/user",data:{project_id:this.projectId,userid:this.userData.userids}}).then(({msg:t})=>{$A.messageSuccess(t),this.userShow=!1,this.$store.dispatch("getProjectOne",this.projectId).catch(()=>{}),this.$store.dispatch("getTaskForProject",this.projectId).catch(()=>{})}).catch(({msg:t})=>{$A.modalError(t)}).finally(t=>{this.userLoad--})},onTransfer(){this.transferLoad++,this.$store.dispatch("call",{url:"project/transfer",data:{project_id:this.projectId,owner_userid:this.transferData.owner_userid[0]}}).then(({msg:t})=>{$A.messageSuccess(t),this.transferShow=!1,this.$store.dispatch("getProjectOne",this.projectId).catch(()=>{}),this.$store.dispatch("getTaskForProject",this.projectId).catch(()=>{})}).catch(({msg:t})=>{$A.modalError(t)}).finally(t=>{this.transferLoad--})},onArchived(){$A.modalConfirm({title:"\u5F52\u6863\u9879\u76EE",content:"\u4F60\u786E\u5B9A\u8981\u5F52\u6863\u9879\u76EE\u3010"+this.projectData.name+"\u3011\u5417\uFF1F",loading:!0,onOk:()=>new Promise((t,r)=>{this.$store.dispatch("archivedProject",this.projectId).then(({msg:e})=>{t(e)}).catch(({msg:e})=>{r(e)})})})},onDelete(){$A.modalConfirm({title:"\u5220\u9664\u9879\u76EE",content:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u9879\u76EE\u3010"+this.projectData.name+"\u3011\u5417\uFF1F",loading:!0,onOk:()=>new Promise((t,r)=>{this.$store.dispatch("removeProject",this.projectId).then(({msg:e})=>{t(e)}).catch(({msg:e})=>{r(e)})})})},onExit(){$A.modalConfirm({title:"\u9000\u51FA\u9879\u76EE",content:"\u4F60\u786E\u5B9A\u8981\u9000\u51FA\u9879\u76EE\u3010"+this.projectData.name+"\u3011\u5417\uFF1F",loading:!0,onOk:()=>new Promise((t,r)=>{this.$store.dispatch("exitProject",this.projectId).then(({msg:e})=>{t(e)}).catch(({msg:e})=>{r(e)})})})},projectDropdown(t){switch(t){case"setting":this.$set(this.settingData,"name",this.projectData.name),this.$set(this.settingData,"desc",this.projectData.desc),this.settingShow=!0,this.$nextTick(()=>{this.$refs.projectName.focus(),setTimeout(this.$refs.projectDesc.resizeTextarea,0)});break;case"user":if(this.projectData.owner_userid!==this.userId)return;const r=this.projectData.project_user.map(({userid:e})=>e);this.$set(this.userData,"userids",r),this.$set(this.userData,"useridbak",r),this.$set(this.userData,"uncancelable",[this.projectData.owner_userid]),this.userShow=!0;break;case"invite":this.inviteData={},this.inviteShow=!0,this.inviteGet();break;case"workflow":this.workflowShow=!0;break;case"log":this.logShow=!0;break;case"archived_task":this.archivedTaskShow=!0;break;case"deleted_task":this.deletedTaskShow=!0;break;case"transfer":this.$set(this.transferData,"owner_userid",[]),this.transferShow=!0;break;case"archived":this.onArchived();break;case"delete":this.onDelete();break;case"exit":this.onExit();break}},openTask(t,r){this.$store.dispatch("openTask",t),r===!0&&setTimeout(()=>{Se.Store.set("receiveTask",!0)},300)},openMenu(t,r){const e=this.$refs[`taskMenu_${r.id}`];e&&e[0].handleClick(t)},taskIsHidden(t){const{id:r,name:e,desc:n,complete_at:a}=t,{searchText:o}=this;return!!(!this.projectData.cacheParameter.completedTask&&a||this.flowTask(t)||o&&r!=o&&!$A.strExists(`${e} ${n}`,o))},ownerUser(t){return t.filter(({owner:r})=>r==1).sort((r,e)=>r.id-e.id)},inviteGet(t){this.inviteLoad++,this.$store.dispatch("call",{url:"project/invite",data:{project_id:this.projectId,refresh:t===!0?"yes":"no"}}).then(({data:r})=>{this.inviteData=r,this.inviteCopy()}).catch(({msg:r})=>{$A.modalError(r)}).finally(r=>{this.inviteLoad--})},getFlowData(){this.flowInfo={},this.$store.dispatch("call",{url:"project/flow/list",data:{project_id:this.projectId}}).then(({data:t})=>{var r;this.flowList=t,(r=this.$refs.flow)==null||r.clearSelect()}).catch(()=>{this.flowList=[]})},flowChange(t,r){this.flowInfo=r.pop()||{}},inviteCopy(){!this.inviteData.url||this.$copyText(this.inviteData.url).then(t=>{$A.messageSuccess("\u590D\u5236\u6210\u529F")}).catch(t=>{$A.messageError("\u590D\u5236\u5931\u8D25")})},inviteFocus(){this.$refs.inviteInput.focus({cursor:"all"})},toggleCompleted(){this.toggleParameter("completedTask")},workflowBeforeClose(){return new Promise(t=>{if(!this.$refs.workflow.existDiff()){t();return}$A.modalConfirm({content:"\u8BBE\u7F6E\u5C1A\u672A\u4FDD\u5B58\uFF0C\u662F\u5426\u653E\u5F03\u4FEE\u6539\uFF1F",cancelText:"\u53D6\u6D88",okText:"\u653E\u5F03",onOk:()=>{t()}})})},myFilter(t,r=!0){return!this.projectData.cacheParameter.completedTask&&r===!0&&t.complete_at||this.flowTask(t)||this.searchText&&t.id!=this.searchText&&!$A.strExists(t.name,this.searchText)&&!$A.strExists(t.desc,this.searchText)?!1:t.owner},helpFilter(t,r=!0){return t.parent_id>0||!this.projectData.cacheParameter.completedTask&&r===!0&&t.complete_at||this.flowTask(t)||this.searchText&&t.id!=this.searchText&&!$A.strExists(t.name,this.searchText)&&!$A.strExists(t.desc,this.searchText)?!1:t.task_user&&t.task_user.find(({userid:e,owner:n})=>e==this.userId&&n==0)},flowTask(t){return $A.leftExists(this.flowInfo.value,"user:")&&!t.task_user.find(({userid:r,owner:e})=>r===this.flowInfo.userid&&e)?!0:this.flowInfo.value>0&&t.flow_item_id!==this.flowInfo.value},expiresFormat(t){return $A.countDownFormat(t,this.nowTime)},tabTypeChange(t){switch(t){case"column":this.toggleParameter({project_id:this.projectId,key:"menuType",value:"column"});break;case"table":this.toggleParameter({project_id:this.projectId,key:"menuType",value:"table"});break;case"gantt":this.toggleParameter({project_id:this.projectId,key:"menuType",value:"gantt"});break}},toggleParameter(t){if(t==="completedTask")this.$store.dispatch("forgetTaskCompleteTemp",!0);else if(t==="chat"&&this.windowPortrait){this.$store.dispatch("openDialog",this.projectData.dialog_id);return}this.$store.dispatch("toggleProjectParameter",t)},onBack(){const{name:t,params:r}=this.$store.state.routeHistoryLast;t===this.$route.name&&/^\d+$/.test(r.projectId)?this.goForward({name:this.$route.name,params:{projectId:"all"}}):this.goBack()}}},nn={};var co=gt(lo,so,io,!1,uo,null,null,null);function uo(t){for(let r in nn)this[r]=nn[r]}var fo=function(){return co.exports}(),ho=function(){var t=this,r=t.$createElement,e=t._self._c||r;return t.dialogShow?e("DialogWrapper",{staticClass:"project-dialog",attrs:{"dialog-id":t.projectData.dialog_id}},[e("template",{slot:"head"},[e("div",{staticClass:"dialog-user"},[e("div",{staticClass:"member-head"},[e("div",{staticClass:"member-title"},[t._v(t._s(t.$L("\u9879\u76EE\u6210\u5458"))),e("span",{on:{click:function(n){t.memberShowAll=!t.memberShowAll}}},[t._v("("+t._s(t.projectData.project_user.length)+")")])]),e("div",{staticClass:"member-close",on:{click:t.onClose}},[e("Icon",{attrs:{type:"ios-close"}})],1)]),e("ul",{class:["member-list",t.memberShowAll?"member-all":""]},t._l(t.projectData.project_user,function(n){return e("li",[e("UserAvatar",{attrs:{userid:n.userid,size:36}})],1)}),0)]),e("div",{staticClass:"nav-wrapper"},[e("div",{staticClass:"dialog-title"},[e("h2",[t._v(t._s(t.$L("\u7FA4\u804A")))])])])])],2):t._e()},po=[];const mo={name:"ProjectDialog",components:{DialogWrapper:En},data(){return{loadIng:!1,memberShowAll:!1}},computed:{...Ae(["projectData"]),dialogShow(){return this.windowLandscape&&this.projectData.dialog_id&&this.projectData.cacheParameter.chat}},methods:{onClose(){this.$store.dispatch("toggleProjectParameter","chat")}}},rn={};var vo=gt(mo,ho,po,!1,go,null,null,null);function go(t){for(let r in rn)this[r]=rn[r]}var yo=function(){return vo.exports}(),bo=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"project-list"},[e("PageTitle",{attrs:{title:t.$L("\u9879\u76EE")}}),e("div",{staticClass:"list-search"},[e("div",{staticClass:"search-wrapper"},[e("Input",{attrs:{placeholder:t.$L(t.loadProjects?"\u66F4\u65B0\u4E2D...":"\u641C\u7D22\u9879\u76EE"),clearable:""},model:{value:t.projectKeyValue,callback:function(n){t.projectKeyValue=n},expression:"projectKeyValue"}},[e("div",{staticClass:"search-pre",attrs:{slot:"prefix"},slot:"prefix"},[t.loadProjects?e("Loading"):e("Icon",{attrs:{type:"ios-search"}})],1)])],1)]),e("ul",{on:{scroll:function(n){t.operateVisible=!1}}},[t.projectLists.length===0?[t.projectKeyLoading>0?e("li",{staticClass:"loading"},[e("Loading")],1):e("li",{staticClass:"nothing"},[t._v(" "+t._s(t.$L(t.projectKeyValue?`\u6CA1\u6709\u4EFB\u4F55\u4E0E"${t.projectKeyValue}"\u76F8\u5173\u7684\u9879\u76EE`:"\u6CA1\u6709\u4EFB\u4F55\u9879\u76EE"))+" ")])]:t._e(),t._l(t.projectLists,function(n,a){return e("li",{directives:[{name:"longpress",rawName:"v-longpress",value:t.handleLongpress,expression:"handleLongpress"}],key:a,class:{operate:n.id==t.operateItem.id&&t.operateVisible},attrs:{"data-id":n.id},on:{click:function(o){return t.toggleRoute("project",{projectId:n.id})}}},[e("div",{staticClass:"project-item"},[e("div",{staticClass:"item-left"},[e("div",{staticClass:"project-h1"},[e("div",{staticClass:"project-name"},[t._v(t._s(n.name))]),n.top_at?e("div",{staticClass:"icon-top"}):t._e(),n.task_my_num-n.task_my_complete>0?e("div",{staticClass:"num"},[t._v(t._s(n.task_my_num-n.task_my_complete))]):t._e()]),e("div",{staticClass:"project-h2"},[t._v(" "+t._s(n.desc)+" ")])]),n.task_num>0?e("div",{staticClass:"item-right",on:{click:function(o){return o.stopPropagation(),t.modalPercent(n)}}},[e("iCircle",{attrs:{type:"circle","trail-color":"rgba(132, 197, 106, 0.2)","trail-width":7,"stroke-color":n.task_percent===100?"rgba(132, 197, 106, 0)":"#84C56A","stroke-width":7,percent:n.task_percent,size:44}},[n.task_percent===100?e("Icon",{attrs:{type:"ios-checkmark"}}):e("span",{staticClass:"percent-text"},[t._v(t._s(n.task_percent)+"%")])],1)],1):t._e()])])})],2),e("div",{directives:[{name:"show",rawName:"v-show",value:t.operateVisible,expression:"operateVisible"}],staticClass:"operate-position",style:t.operateStyles},[e("Dropdown",{attrs:{trigger:"custom",placement:t.windowLandscape?"bottom":"top",visible:t.operateVisible,transfer:""},on:{"on-clickoutside":function(n){t.operateVisible=!1}}},[e("div",{style:{userSelect:t.operateVisible?"none":"auto",height:t.operateStyles.height}}),e("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[e("DropdownItem",{nativeOn:{click:function(n){return t.handleTopClick.apply(null,arguments)}}},[t._v(" "+t._s(t.$L(t.operateItem.top_at?"\u53D6\u6D88\u7F6E\u9876":"\u7F6E\u9876\u8BE5\u9879\u76EE"))+" ")])],1)],1)],1)],1)},wo=[];const $o={name:"ProjectList",directives:{longpress:Ln},data(){return{projectKeyValue:"",projectKeyLoading:0,operateStyles:{},operateVisible:!1,operateItem:{}}},computed:{...It(["cacheProjects","loadProjects"]),projectLists(){const{projectKeyValue:t,cacheProjects:r}=this,e=$A.cloneJSON(r).sort((n,a)=>n.top_at||a.top_at?$A.Date(a.top_at)-$A.Date(n.top_at):a.id-n.id);return t?e.filter(n=>$A.strExists(`${n.name} ${n.desc}`,t)):e}},watch:{projectKeyValue(t){t!=""&&(this.projectKeyLoading++,setTimeout(()=>{this.projectKeyValue==t&&this.searchProject(),this.projectKeyLoading--},600))}},methods:{searchProject(){this.projectKeyLoading++,this.$store.dispatch("getProjects",{keys:{name:this.projectKeyValue},hideload:!0}).finally(t=>{this.projectKeyLoading--})},toggleRoute(t,r){this.operateVisible||this.goForward({name:"manage-"+t,params:r||{}})},modalPercent(t){if(this.operateVisible)return;let r=`<p><strong>${this.$L("\u603B\u8FDB\u5EA6")}</strong></p>`;r+=`<p>${this.$L("\u603B\u6570\u91CF")}: ${t.task_num}</p>`,r+=`<p>${this.$L("\u5DF2\u5B8C\u6210")}: ${t.task_complete}</p>`,r+=`<p style="margin-top:12px"><strong>${this.$L("\u6211\u7684\u4EFB\u52A1")}</strong></p>`,r+=`<p>${this.$L("\u603B\u6570\u91CF")}: ${t.task_my_num}</p>`,r+=`<p>${this.$L("\u5DF2\u5B8C\u6210")}: ${t.task_my_complete}</p>`,$A.modalInfo({language:!1,title:`${t.name} ${this.$L("\u9879\u76EE\u8FDB\u5EA6")}`,content:r})},handleLongpress(t,r){const e=$A.getAttr(r,"data-id"),n=this.projectLists.find(a=>a.id==e);!n||(this.operateVisible=!1,this.operateItem=$A.isJson(n)?n:{},this.$nextTick(()=>{const a=r.getBoundingClientRect(),o=this.$el.getBoundingClientRect();this.operateStyles={left:`${t.clientX-o.left}px`,top:`${a.top+this.windowScrollY}px`,height:a.height+"px"},this.operateVisible=!0}))},handleTopClick(){this.$store.dispatch("call",{url:"project/top",data:{project_id:this.operateItem.id}}).then(({data:t})=>{this.$store.dispatch("saveProject",t)}).catch(({msg:t})=>{$A.modalError(t)})}}},on={};var _o=gt($o,bo,wo,!1,Co,null,null,null);function Co(t){for(let r in on)this[r]=on[r]}var Do=function(){return _o.exports}(),xo=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"page-project"},[t.projectId>0?[e("ProjectPanel"),e("ProjectDialog")]:t._e(),t.windowPortrait?e("ProjectList",{directives:[{name:"show",rawName:"v-show",value:t.projectId===0,expression:"projectId === 0"}]}):t._e()],2)},To=[];const So={components:{ProjectList:Do,ProjectDialog:yo,ProjectPanel:fo},deactivated(){this.$store.dispatch("forgetTaskCompleteTemp",!0)},computed:{...It(["cacheProjects","wsOpenNum"]),projectId(){const{projectId:t}=this.$route.params;return parseInt(/^\d+$/.test(t)?t:0)}},watch:{projectId:{handler(){this.getProjectData()},immediate:!0},wsOpenNum(t){t<=1||(this.wsOpenTimeout&&clearTimeout(this.wsOpenTimeout),this.wsOpenTimeout=setTimeout(()=>{this.$route.name=="manage-project"&&this.getProjectData()},5e3))}},methods:{getProjectData(){if(this.projectId<=0)return;const t=this.projectId;this.$nextTick(()=>{this.$store.state.projectId=t,this.$store.dispatch("getProjectOne",t).then(()=>{this.$store.dispatch("getColumns",t).catch(()=>{}),this.$store.dispatch("getTaskForProject",t).catch(()=>{})}).catch(({msg:r})=>{t===this.projectId&&$A.modalWarning({content:r,onOk:()=>{const e=this.cacheProjects.find(({id:n})=>n);e?$A.goForward({name:"manage-project",params:{projectId:e.id}}):$A.goForward({name:"manage-dashboard"})}})}),this.$store.dispatch("forgetTaskCompleteTemp",!0)})}}},an={};var ko=gt(So,xo,To,!1,Io,null,null,null);function Io(t){for(let r in an)this[r]=an[r]}var Ro=function(){return ko.exports}();export{Ro as default};
